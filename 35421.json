{"post_stream":{"posts":[{"id":124395,"name":"Graham Morrison","username":"degville","avatar_template":"/user_avatar/forum.snapcraft.io/degville/{size}/2021_2.png","created_at":"2023-05-31T16:22:57.016Z","cooked":"\u003cp\u003eHardware IO (input/output) interfaces, including the \u003ca href=\"/t/the-serial-port-interface/7913/18\"\u003eserial-port\u003c/a\u003e, \u003ca href=\"/t/the-gpio-interface/7829\"\u003egpio\u003c/a\u003e and \u003ca href=\"/t/the-i2c-interface/7842\"\u003ei2c\u003c/a\u003e interfaces, are designed to be used on devices running \u003ca href=\"/t/glossary/14612#heading--ubuntu-core\"\u003eUbuntu Core\u003c/a\u003e. These interfaces are driven from a device’s \u003ca href=\"/t/gadget-snaps/696\"\u003egadget snap\u003c/a\u003e which is used to define and configure a device’s system properties.\u003c/p\u003e\n\u003cp\u003eThis approach is more robust because it allows the gadget snap providing the slot to centralise and arbitrate the connection conditions. These conditions include which other snaps, identified by  their snap ID, can connect to the slots the gadget offers and, consequently, gain privileged access to the hardware.  For the application snap, usually no change is required other than to declare and use an appropriately-configured plug.\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"#heading--considerations\"\u003eInterface considerations\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#heading--examples\"\u003eCode examples\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"heading--considerations\"\u003eInterface considerations\u003c/h2\u003e\n\u003cp\u003eThe extent of access an interface has is granted through both \u003cem\u003econnection permissions\u003c/em\u003e and the specifics of the \u003cem\u003einterface connections\u003c/em\u003e being requested.\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cstrong\u003eConnection permissions\u003c/strong\u003e: \u003ca href=\"/t/the-interface-auto-connection-mechanism/20179\"\u003eauto-connect\u003c/a\u003e | \u003ca href=\"/t/interface-management/6154\"\u003eprivileged\u003c/a\u003e | \u003ca href=\"/t/super-privileged-interfaces/34740\"\u003esuper-privileged\u003c/a\u003e\n\u003cbr\u003eConnection requirements are dependent on which store a developer is using.\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"https://forum.snapcraft.io/t/glossary/14612#heading--snap-store\"\u003eGlobal Snap Store\u003c/a\u003e: privileged and super-privileged interfaces require store approval because of the level of trust and permissiveness these interfaces have, which is also why certain interfaces need certain oversight. See \u003ca href=\"/t/permission-requests/12822\"\u003ePermission requests\u003c/a\u003e for further details.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"/t/glossary/14612#heading--dedicated\"\u003eDedicated Snap Store\u003c/a\u003e: trust and permissiveness are now  the responsibility of the store owner, and many privileged interface connections can be self-served and defined within the dedicated snap store and the device context.\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cstrong\u003eInterface connections\u003c/strong\u003e: hardware IO interfaces | app-provided interfaces | other interfaces\n\u003cul\u003e\n\u003cli\u003e\n\u003cstrong\u003eHardware IO interfaces\u003c/strong\u003e: These require either a \u003ca href=\"/t/interface-management/6154#heading--slots-plugs\"\u003eslot\u003c/a\u003e to be defined by a device’s \u003cem\u003egadget snap\u003c/em\u003e or an interface with \u003ca href=\"/t/hotplug-support/10750\"\u003eHotplug support\u003c/a\u003e, in which case the slot appears from the system snap.\n\u003cul\u003e\n\u003cli\u003eAn unconstrained \u003ca href=\"/t/the-interface-auto-connection-mechanism/20179#heading--autoconnect\"\u003eauto-connection\u003c/a\u003e cannot be used because there may be \u003cem\u003emany slots of a given interface\u003c/em\u003e, resulting in ambiguity that requires  an extensive set of store rules to manage and maintain.\u003c/li\u003e\n\u003cli\u003eEach plug should therefore be connected to a slot, for example:\n\u003cul\u003e\n\u003cli\u003egreen led plug on app =\u0026gt; green led slot on gadget\u003c/li\u003e\n\u003cli\u003ered led plug on app =\u0026gt; red led slot on gadget\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cul\u003e\n\u003cli\u003eThis kind of 1-to-1 connections can usually be established via \u003ca href=\"/t/the-interface-auto-connection-mechanism/20179\"\u003eslot rules in the snap-declaration\u003c/a\u003e for the gadget.\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cstrong\u003eApp-provided interfaces\u003c/strong\u003e: slots are defined by apps, or occasionally from the gadget snap,\n\u003cul\u003e\n\u003cli\u003eMay require access, such as from the \u003ca href=\"/t/the-content-interface/1074\"\u003econtent\u003c/a\u003e or \u003ca href=\"/t/the-shared-memory-interface/28382\"\u003eshared-memory\u003c/a\u003e interfaces.\u003c/li\u003e\n\u003cli\u003eA slot might may be provided by the system snap to cover the case of an equivalent system service, such as \u003ca href=\"/t/the-audio-playback-interface/13089\"\u003eaudio-playback\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003ethe slot might be \u003ca href=\"/t/super-privileged-interfaces/34740\"\u003esuper-privileged\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cstrong\u003eOther interfaces\u003c/strong\u003e: For more system level access, slots are provided by the system snap.\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch3 id=\"heading--code-examples\"\u003eCode examples\u003c/h3\u003e\n\u003cp\u003eThe \u003ca href=\"https://github.com/snapcore/pi-gadget/tree/20-arm64\"\u003egadget snap\u003c/a\u003e definition for the reference \u003ca href=\"https://ubuntu.com/core/docs/install-raspberry-pi\"\u003eRaspberry Pi Ubuntu Core\u003c/a\u003e image contains interface definitions for various hardware IO interfaces on the system, including slots for each specific GPIO pin, i2c connections, the Bluetooth serial port, and the generic serial ports:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-yaml\"\u003eslots:\n  bcm-gpio-0:\n    interface: gpio\n    number: 0\n  bcm-gpio-1:\n    interface: gpio\n    number: 1\n  bcm-gpio-2:\n    interface: gpio\n    number: 2\n[...]\n  i2c-0:\n    interface: i2c\n    path: /dev/i2c-0\n[...]\n  bt-serial:\n    interface: serial-port\n    path: /dev/ttyAMA0\n[...]\n  serial0:\n    interface: serial-port\n    path: /dev/ttyS0\n  serial1:\n    interface: serial-port\n    path: /dev/ttyS1\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eOn a Raspberry Pi, the above hardware IO interfaces are accessible to apps from the system snap without requiring any further configuration.\u003c/p\u003e","post_number":1,"post_type":1,"updated_at":"2023-06-09T11:50:41.827Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":1,"reads":6,"readers_count":5,"score":5.8,"yours":false,"topic_id":35421,"topic_slug":"hardware-io-interfaces","display_username":"Graham Morrison","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":2,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://forum.snapcraft.io/t/the-gpio-interface/7829","internal":true,"reflection":false,"title":"The gpio interface","clicks":0},{"url":"https://forum.snapcraft.io/t/the-serial-port-interface/7913/18","internal":true,"reflection":false,"title":"The serial-port interface","clicks":0},{"url":"https://ubuntu.com/core/docs/install-raspberry-pi","internal":false,"reflection":false,"title":"Installing Ubuntu Core 22 on a Raspberry Pi | Ubuntu","clicks":0},{"url":"https://github.com/snapcore/pi-gadget/tree/20-arm64","internal":false,"reflection":false,"clicks":0},{"url":"https://forum.snapcraft.io/t/the-audio-playback-interface/13089","internal":true,"reflection":false,"title":"The audio-playback interface","clicks":0},{"url":"https://forum.snapcraft.io/t/the-shared-memory-interface/28382","internal":true,"reflection":false,"title":"The shared-memory interface","clicks":0},{"url":"https://forum.snapcraft.io/t/the-content-interface/1074","internal":true,"reflection":false,"title":"The content interface","clicks":0},{"url":"https://forum.snapcraft.io/t/hotplug-support/10750","internal":true,"reflection":false,"title":"Hotplug support","clicks":0},{"url":"https://forum.snapcraft.io/t/permission-requests/12822","internal":true,"reflection":false,"title":"Permission requests","clicks":0},{"url":"https://forum.snapcraft.io/t/super-privileged-interfaces/34740","internal":true,"reflection":false,"title":"Super-privileged interfaces","clicks":0},{"url":"https://forum.snapcraft.io/t/interface-management/6154","internal":true,"reflection":false,"title":"Interface management","clicks":0},{"url":"https://forum.snapcraft.io/t/the-interface-auto-connection-mechanism/20179","internal":true,"reflection":false,"title":"The interface auto-connection mechanism","clicks":0},{"url":"https://forum.snapcraft.io/t/gadget-snaps/696","internal":true,"reflection":false,"title":"Gadget snaps","clicks":0},{"url":"https://forum.snapcraft.io/t/glossary/14612","internal":true,"reflection":false,"title":"Glossary","clicks":0},{"url":"https://forum.snapcraft.io/t/the-i2c-interface/7842","internal":true,"reflection":false,"title":"The i2c interface","clicks":0},{"url":"https://forum.snapcraft.io/t/the-serial-port-interface/7913","internal":true,"reflection":true,"title":"The serial-port interface","clicks":0},{"url":"https://forum.snapcraft.io/t/snap-documentation/11127","internal":true,"reflection":true,"title":"Snap documentation","clicks":0}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":true,"admin":true,"staff":true,"user_id":2772,"hidden":false,"trust_level":4,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":true,"last_wiki_edit":"2023-06-09T11:50:41.839Z","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":124764,"name":"Samuele Pedroni","username":"pedronis","avatar_template":"/user_avatar/forum.snapcraft.io/pedronis/{size}/46_2.png","created_at":"2023-06-08T14:43:53.554Z","cooked":"\u003cblockquote\u003e\n\u003cul\u003e\n\u003cli\u003eEach plug should therefore be connected to a slot, for example:\n\u003cul\u003e\n\u003cli\u003egreen led plug on app =\u0026gt; green led slot on gadget\u003c/li\u003e\n\u003cli\u003ered led plug on app =\u0026gt; red led slot on gadget\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eI would add:\u003c/p\u003e\n\u003cp\u003eThis kind of 1-to-1 connections can usually be established via  \u003ca href=\"https://forum.snapcraft.io/t/the-interface-auto-connection-mechanism/20179\"\u003eslot rules in the snap-declaration\u003c/a\u003e for the gadget.\u003c/p\u003e","post_number":2,"post_type":1,"updated_at":"2023-06-08T14:43:53.554Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":3,"readers_count":2,"score":5.4,"yours":false,"topic_id":35421,"topic_slug":"hardware-io-interfaces","display_username":"Samuele Pedroni","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://forum.snapcraft.io/t/the-interface-auto-connection-mechanism/20179","internal":true,"reflection":false,"title":"The interface auto-connection mechanism","clicks":0}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":13,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":124833,"name":"Graham Morrison","username":"degville","avatar_template":"/user_avatar/forum.snapcraft.io/degville/{size}/2021_2.png","created_at":"2023-06-09T11:51:37.609Z","cooked":"\u003cp\u003eGreat, thank you for looking over this, and for the suggestion!\u003c/p\u003e","post_number":3,"post_type":1,"updated_at":"2023-06-09T11:51:37.609Z","reply_count":0,"reply_to_post_number":2,"quote_count":0,"incoming_link_count":0,"reads":3,"readers_count":2,"score":0.2,"yours":false,"topic_id":35421,"topic_slug":"hardware-io-interfaces","display_username":"Graham Morrison","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"pedronis","avatar_template":"/user_avatar/forum.snapcraft.io/pedronis/{size}/46_2.png"},"bookmarked":false,"actions_summary":[],"moderator":true,"admin":true,"staff":true,"user_id":2772,"hidden":false,"trust_level":4,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false}],"stream":[124395,124764,124833]},"timeline_lookup":[[1,15],[2,7]],"suggested_topics":[{"id":30851,"title":"Snap How-to guides","fancy_title":"Snap How-to guides","slug":"snap-how-to-guides","posts_count":1,"reply_count":0,"highest_post_number":1,"image_url":null,"created_at":"2022-07-12T10:45:54.942Z","last_posted_at":"2022-07-12T10:45:55.061Z","bumped":true,"bumped_at":"2022-07-12T10:45:55.061Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags":[],"like_count":0,"views":1546,"category_id":15,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest single","description":"Original Poster, Most Recent Poster","user":{"id":2772,"username":"degville","name":"Graham Morrison","avatar_template":"/user_avatar/forum.snapcraft.io/degville/{size}/2021_2.png"}}]},{"id":32229,"title":"Library linter","fancy_title":"Library linter","slug":"library-linter","posts_count":2,"reply_count":0,"highest_post_number":2,"image_url":null,"created_at":"2022-10-18T17:35:43.980Z","last_posted_at":"2022-10-19T03:00:57.683Z","bumped":true,"bumped_at":"2022-10-19T03:00:57.683Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags":[],"like_count":3,"views":794,"category_id":15,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":3793,"username":"cmatsuoka","name":"Claudio Matsuoka","avatar_template":"/user_avatar/forum.snapcraft.io/cmatsuoka/{size}/9338_2.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":393,"username":"jamesh","name":"James Henstridge","avatar_template":"/user_avatar/forum.snapcraft.io/jamesh/{size}/3947_2.png"}}]},{"id":33649,"title":"Classic confinement","fancy_title":"Classic confinement","slug":"classic-confinement","posts_count":3,"reply_count":0,"highest_post_number":3,"image_url":null,"created_at":"2023-01-27T10:19:25.555Z","last_posted_at":"2023-06-07T09:16:29.749Z","bumped":true,"bumped_at":"2023-06-07T09:16:29.749Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags":[],"like_count":4,"views":533,"category_id":15,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":2772,"username":"degville","name":"Graham Morrison","avatar_template":"/user_avatar/forum.snapcraft.io/degville/{size}/2021_2.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":11989,"username":"gbeuzeboc","name":"","avatar_template":"/letter_avatar/gbeuzeboc/{size}/5_6d6f4cde2641c35611d5cac2fb97c77e.png"}}]},{"id":33078,"title":"Build and publishing example","fancy_title":"Build and publishing example","slug":"build-and-publishing-example","posts_count":5,"reply_count":1,"highest_post_number":5,"image_url":null,"created_at":"2022-12-13T13:17:46.677Z","last_posted_at":"2023-05-31T16:11:13.715Z","bumped":true,"bumped_at":"2023-05-31T16:11:13.715Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags":[],"like_count":1,"views":728,"category_id":15,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":2772,"username":"degville","name":"Graham Morrison","avatar_template":"/user_avatar/forum.snapcraft.io/degville/{size}/2021_2.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":14652,"username":"jh-slack","name":"Jade Ho","avatar_template":"/letter_avatar/jh-slack/{size}/5_6d6f4cde2641c35611d5cac2fb97c77e.png"}}]},{"id":30858,"title":"Snap Explanation guides","fancy_title":"Snap Explanation guides","slug":"snap-explanation-guides","posts_count":3,"reply_count":1,"highest_post_number":3,"image_url":null,"created_at":"2022-07-12T15:01:07.909Z","last_posted_at":"2023-05-15T14:55:39.980Z","bumped":true,"bumped_at":"2023-05-15T14:55:39.980Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags":[],"like_count":0,"views":1373,"category_id":15,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":2772,"username":"degville","name":"Graham Morrison","avatar_template":"/user_avatar/forum.snapcraft.io/degville/{size}/2021_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":11710,"username":"rpjday","name":"Robert P. J. Day","avatar_template":"/user_avatar/forum.snapcraft.io/rpjday/{size}/8457_2.png"}}]}],"tags":[],"id":35421,"title":"Hardware IO interfaces","fancy_title":"Hardware IO interfaces","posts_count":3,"created_at":"2023-05-31T16:22:56.882Z","views":120,"reply_count":1,"like_count":0,"last_posted_at":"2023-06-09T11:51:37.609Z","visible":true,"closed":false,"archived":false,"has_summary":false,"archetype":"regular","slug":"hardware-io-interfaces","category_id":15,"word_count":766,"deleted_at":null,"user_id":2772,"featured_link":null,"pinned_globally":false,"pinned_at":null,"pinned_until":null,"image_url":null,"slow_mode_seconds":0,"draft":null,"draft_key":"topic_35421","draft_sequence":null,"unpinned":null,"pinned":false,"current_post_number":1,"highest_post_number":3,"deleted_by":null,"actions_summary":[{"id":4,"count":0,"hidden":false,"can_act":false},{"id":8,"count":0,"hidden":false,"can_act":false},{"id":7,"count":0,"hidden":false,"can_act":false}],"chunk_size":20,"bookmarked":false,"topic_timer":null,"message_bus_last_id":0,"participant_count":2,"show_read_indicator":false,"thumbnails":null,"details":{"notification_level":1,"participants":[{"id":2772,"username":"degville","name":"Graham Morrison","avatar_template":"/user_avatar/forum.snapcraft.io/degville/{size}/2021_2.png","post_count":2,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null},{"id":13,"username":"pedronis","name":"Samuele Pedroni","avatar_template":"/user_avatar/forum.snapcraft.io/pedronis/{size}/46_2.png","post_count":1,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null}],"created_by":{"id":2772,"username":"degville","name":"Graham Morrison","avatar_template":"/user_avatar/forum.snapcraft.io/degville/{size}/2021_2.png"},"last_poster":{"id":2772,"username":"degville","name":"Graham Morrison","avatar_template":"/user_avatar/forum.snapcraft.io/degville/{size}/2021_2.png"}}}