{"post_stream":{"posts":[{"id":96102,"name":"Graham Morrison","username":"degville","avatar_template":"/user_avatar/forum.snapcraft.io/degville/{size}/2021_2.png","created_at":"2021-07-19T11:15:46.466Z","cooked":"\u003cp\u003eA quota group sets resource limits on \u003ca href=\"/t/service-management/3965\"\u003eservices\u003c/a\u003e running inside snaps.\u003c/p\u003e\n\u003cp\u003eResource limits can be set for the following attributes:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cstrong\u003eJournal log messages\u003c/strong\u003e: as a maximum size for the log and as a rate limit\u003c/li\u003e\n\u003cli\u003e\n\u003cstrong\u003eMemory\u003c/strong\u003e: as a maximum amount of RAM\u003c/li\u003e\n\u003cli\u003e\n\u003cstrong\u003eCPU usage\u003c/strong\u003e: as a percentage across a number - or specific - CPU cores, and as a given number of threads\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eQuota groups are created, removed and queried with the following \u003cem\u003esnap\u003c/em\u003e commands:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cstrong\u003eset-quota\u003c/strong\u003e: create or update a quota group\u003c/li\u003e\n\u003cli\u003e\n\u003cstrong\u003equota\u003c/strong\u003e: show quota group for a set of snaps\u003c/li\u003e\n\u003cli\u003e\n\u003cstrong\u003equotas\u003c/strong\u003e: show all quota groups\u003c/li\u003e\n\u003cli\u003e\n\u003cstrong\u003eremove-quota\u003c/strong\u003e: remove a quota group\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eQuota groups require snap version \u003cem\u003e2.59+\u003c/em\u003e. Setting quotas for journal log messages is currently considered experimental and requires that an \u003cem\u003eexperimental feature-flag\u003c/em\u003e is first be enabled:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003esudo snap set system experimental.quota-groups=true\n\u003c/code\u003e\u003c/pre\u003e\n\u003chr\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#heading--creating\"\u003eCreate a quota group\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#heading--add\"\u003eAdd snaps to a quota group\u003c/a\u003e\u003cbr\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#heading--attributes\"\u003eSet quota group limits\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"#heading--journal\"\u003eJournal log\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#heading--memory\"\u003eMemory\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#heading--cpu\"\u003eCPU\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#heading--view\"\u003eView quota groups\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#heading--nested\"\u003eNested quota groups\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#heading--updating\"\u003eUpdate quota groups\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#heading--usage\"\u003eView group members and resource usage\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#heading--removing\"\u003eRemove snaps and quota groups\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"heading--creating\"\u003eCreate a quota group\u003c/h2\u003e\n\u003cp\u003eTo create a quota group, use the \u003ccode\u003esnap set-quota\u003c/code\u003e command with a group name and a limiting attribute, such as \u003ccode\u003e--memory=\u0026lt;amount\u0026gt;\u003c/code\u003e:\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003esnap set-quota mygroup --memory=64M\u003c/code\u003e\u003c/p\u003e\n\u003ch3 id=\"heading--add\"\u003eAdd snaps to a quota group\u003c/h3\u003e\n\u003cp\u003eSnaps that contain services can be optionally added to a quota group when a group is created:\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003esnap set-quota mygroup --memory=64M snap1 snap2\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003eAfter a group has been created, a snap can be added to a group when it’s installed:\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003esnap install snap1 --quota-group=mygroup\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003eA pre-installed snap can be added to a pre-existing quota group by running the \u003ccode\u003eset-quota\u003c/code\u003e command again:\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003esnap set-quota highmem hello-world\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003eSee below for details on which limiting attributes are supported by quota groups.\u003c/p\u003e\n\u003ch2 id=\"heading--attributes\"\u003eLimiting attributes\u003c/h2\u003e\n\u003ch3 id=\"heading--journal\"\u003eJournal log limits\u003c/h3\u003e\n\u003cp\u003eWhile the \u003ccode\u003esnap logs\u003c/code\u003e command is used to retrieve the \u003cem\u003esystemd journal\u003c/em\u003e logs for a specific service, or for all services within a snap (see \u003ca href=\"/t/service-management/3965#heading--logs\"\u003eInspecting logs\u003c/a\u003e for further details), a quota can be used to limit the output.\u003c/p\u003e\n\u003cp\u003eLog output can be limited by both size and rate within a quota group:\u003c/p\u003e\n\u003ch4\u003e1. \u003cstrong\u003eJournal size\u003c/strong\u003e\u003cbr\u003e\n\u003c/h4\u003e\n\u003cp\u003e\u003ccode\u003ejournal-size=\u0026lt;value\u0026gt;[KB|MB|GB]\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003eLimit the size of the aggregated journal log for all the snaps in the quota group. This is useful when service log output is verbose on devices with limited storage capacity.\u003c/p\u003e\n\u003cp\u003eAccepts a value in either kilobytes(KB), megabytes(MB) or gigabytes(GB), including aggregated values:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-bash\"\u003esudo snap set-quota loggroup --journal-size=64MB\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch4\u003e2. \u003cstrong\u003eJournal rate limit\u003c/strong\u003e\n\u003c/h4\u003e\n\u003cp\u003e\u003ccode\u003ejournal-rate-limit=\u0026lt;number-of-messages\u0026gt;/\u0026lt;time-period\u0026gt;\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003eLimit the number of messages logged to a maximum per time period. This is a useful way of limiting the number of messages for snaps.\u003c/p\u003e\n\u003cp\u003eThe time period is can be nanoseconds(us), milliseconds (ms), seconds(s), minutes (m), and hours(h), including aggregated periods:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-bash\"\u003esudo snap set-quota loggroup --journal-rate-limit=10/1h2m3s4ms5us\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3 id=\"heading--memory\"\u003eMemory limits\u003c/h3\u003e\n\u003cp\u003e\u003ccode\u003ememory=value[KB|MB|GB]\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003eMemory units can be ‘B’, ‘KB’, 'MB or ‘GB’ with a size greater than 4KB:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-bash\"\u003esudo snap set-quota highmem --memory=2GB\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThe memory limit for a quota group can only be increased.  Increasing the memory limit for a quota group \u003cem\u003edoes not\u003c/em\u003e restart any services associated with snaps in the quota group.\u003c/p\u003e\n\u003cp\u003eTo decrease the memory limit for a quota group, the entire group must be removed with the \u003cem\u003eremove-quota\u003c/em\u003e command and recreated with a lower limit.\u003c/p\u003e\n\u003ch3 id=\"heading--cpu\"\u003eCPU limits\u003c/h3\u003e\n\u003cp\u003eCPU limits can be set in 4 different ways, some of which can be combined depending on requirements:\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e\u003cstrong\u003ePercentage of total CPU resources\u003c/strong\u003e\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003ePercentage of a given number of CPU cores\u003c/strong\u003e\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003ePercentage for specific cores\u003c/strong\u003e\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eLimit the number of threads\u003c/strong\u003e\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eWithout a specified CPU limit, all quota groups can use the full system capacity.\u003c/p\u003e\n\u003ch4\u003e1. Percentage of total CPU resources\u003c/h4\u003e\n\u003cp\u003e\u003ccode\u003ecpu=\u0026lt;percentage\u0026gt;%\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003eSets a relative percentage limit on how much execution time a process receives, regardless of the number of cores available, up to 100%.\u003c/p\u003e\n\u003ch4\u003e2. Percentage of a given number of CPU cores\u003c/h4\u003e\n\u003cp\u003e\u003ccode\u003e--cpu=\u0026lt;number of cores\u0026gt;x\u0026lt;percentage\u0026gt;%\u003c/code\u003e\u003c/p\u003e\n\n\u003cp\u003eOne or more cores can be specified alongside a CPU percentage to allocate relative CPU resources across only that number of cores.\u003c/p\u003e\n\u003cp\u003eFor example, \u003ccode\u003e--cpu=2x100%\u003c/code\u003e on a 4 core system would permit a process to run at full capacity on only two cores, which is equivalent to 50% of full system capacity.\u003c/p\u003e\n\u003ch4\u003e3. Percentage for specific cores\u003c/h4\u003e\n\u003cp\u003e\u003ccode\u003ecpu-set=\u0026lt;core number 1\u0026gt;,\u0026lt;core number 2\u0026gt; --cpu=\u0026lt;percentage\u0026gt;%\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003eUsing an additional \u003ccode\u003e--cpu-set\u003c/code\u003e argument with \u003ccode\u003e--cpu\u003c/code\u003e , it’s possible to specify exactly which cores to be used as the CPU resources for that quota group.\u003c/p\u003e\n\u003cp\u003eFor example, \u003ccode\u003e--cpu-set=0,1 --cpu=100%\u003c/code\u003e will permit up to 100% CPU resource usage on 2 specific cores (0 and 1).\u003c/p\u003e\n\u003cp\u003eThe following example will allow up to a maximum of half usage combined on four specific cores which means the sum of usage across all 4 specific cores cannot exceed 200%:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-bash\"\u003esnap set-quota max-two-specific-cores --cpu-set=0,1,2,3 --cpu=50%\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eIn the above example, services in the \u003cem\u003emax-two-specific-cores\u003c/em\u003e quota group could run using 100% of two cores and 0% of the other two cores, or 25% of each core, 33% of 3 of the cores and 0% of the last core, or any other combination that does not exceed 200%. The number 200% comes from the size of the \u003ccode\u003e--cpu-set\u003c/code\u003e set multiplied by the \u003ccode\u003e--cpu\u003c/code\u003e setting.\u003c/p\u003e\n\u003ch4\u003e4. Limit the number of threads\u003c/h4\u003e\n\u003cp\u003e\u003ccode\u003ethreads=\u0026lt;thread limit\u0026gt;\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003eThe \u003ccode\u003e--threads\u003c/code\u003e option is used to limit the number of threads or processes that can be created by the snaps within the quota group.\u003c/p\u003e\n\u003cp\u003eFor example, \u003ccode\u003e--threads=4096\u003c/code\u003e will limit a quota group to no more than 4096 threads or processes.\u003c/p\u003e\n\u003cp\u003eThe \u003cem\u003ethreads\u003c/em\u003e option can also be used with both \u003ccode\u003e--cpu\u003c/code\u003e and \u003ccode\u003e--cpu-set\u003c/code\u003e options to target specific requirements:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-bash\"\u003esnap set-quota max-two-specific-cores --cpu-set=0,1,2,3 --cpu=50% --threads=8092\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eBy default, quota groups are not limited in the number of threads they can create.\u003c/p\u003e\n\u003ch2 id=\"heading--view\"\u003eView quotas\u003c/h2\u003e\n\u003cp\u003eIf the group already exists, \u003cem\u003eset-quota\u003c/em\u003e will update its resource limits.\u003c/p\u003e\n\u003cp\u003eUse the \u003cem\u003equotas\u003c/em\u003e command to view created quota groups:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e$ snap quotas\nQuota      Parent  Constraints                        Current\nhighmem            memory=2.00GB cpu=50%,cpu-set=0,1\ncpuhalf            cpu=50%,cpu-set=0,1\nmanycores          cpu=2x,cpu=100%,threads=4096\nmaxcores           cpu=100%\nmemcpu             memory=2.00GB,cpu=50%\nthreads            threads=4096\nloggroup           journal-size=64.0MB,journal-rate=10/1h2m3.004005s\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eSnaps can belong to only one quota group, but quota groups can be nested.\u003c/p\u003e\n\u003ch2 id=\"heading--nested\"\u003eNested quota groups\u003c/h2\u003e\n\u003cp\u003eTo create a nested quota group, add the \u003ccode\u003e--parent=\u0026lt;parent group\u0026gt;\u003c/code\u003e argument to the \u003cem\u003eset-quota\u003c/em\u003e command when creating a new quota group:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-bash\"\u003esudo snap set-quota lowmem --memory=1GB --parent=highmem\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThe \u003cem\u003equotas\u003c/em\u003e command will also show nested quota groups:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-bash\"\u003e$ snap quotas\nQuota    Parent   Constraints    Current\nhighmem           memory=2.00GB  \nlowmem   highmem  memory=1.00GB  \n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThe total resource use of nested quota groups cannot exceed that of the parent group.\u003c/p\u003e\n\u003ch2 id=\"heading--updating\"\u003eUpdate a quota group\u003c/h2\u003e\n\u003cp\u003eAdd the names of one or more snaps to the \u003cem\u003eset-quota\u003c/em\u003e command to include those snaps in the quota group when its created:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-bash\"\u003esudo snap set-quota lowmem go-example-webserver --parent=highmem\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eIf the quota group already exists, snaps can be added by using \u003cem\u003eset-quota\u003c/em\u003e without the resource limit:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-bash\"\u003esudo snap set-quota lowmem go-example-webserver\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eAdding new a snap to a quota group will result in all non-disabled services in\nthat snap being restarted.\u003c/p\u003e\n\u003cp\u003eNew quotas can be set on existing quota groups, but existing quotas cannot be removed from a quota group, without removing and recreating the entire group.\u003c/p\u003e\n\u003cp\u003eThe CPU set limit for a quota group can be modified to include new cores, or to remove existing cores from the quota already set.\u003c/p\u003e\n\u003cp\u003eThe threads limit for a quota group can be increased but not decreased. To\ndecrease the \u003cem\u003ethreads\u003c/em\u003e limit for a quota group, the entire group must be removed\nwith the remove-quota command and recreated with a lower limit.\u003c/p\u003e\n\u003ch2 id=\"heading--usage\"\u003eView group members and resource usage\u003c/h2\u003e\n\u003cp\u003eThe \u003cem\u003equota\u003c/em\u003e command shows information about a quota group, including the set of\nsnaps it includes and any subgroups it contains, as well as its resource constraints and\nthe current usage of those constrained resources by snap services in those snaps:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-bash\"\u003e$ snap quota lowmem\nname:    lowmem\nparent:  highmem\nconstraints:\n  memory:  1.00GB\ncurrent:\n  memory:  5.32MB\nsnaps:\n  - go-example-webserver\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eUse the \u003cem\u003equota\u003c/em\u003e command on the parent of any nested groups to view total resource usage and subgroups:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-bash\"\u003e$ snap quota highmem\nname:  highmem\nconstraints:\n  memory:  2.00GB\ncurrent:\n  memory:  5.35MB\nsubgroups:\n  - lowmem\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2 id=\"heading--removing\"\u003eRemove snaps and quota groups\u003c/h2\u003e\n\u003cp\u003eTo remove a snap from a quota group, the entire group must be removed with the \u003cem\u003eremove-quota\u003c/em\u003e command and the quota group recreated without the snaps:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-bash\"\u003e$ sudo snap remove-quota lowmem\n$ sudo snap set-quota lowmem --memory=1GB\n$ snap quota lowmem\nname:  lowmem\nconstraints:\n  memory:  1.00GB\ncurrent:\n  memory:  0B\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eCurrently, only quota groups with no subgroups can be removed. In order to remove a quota group with subgroups, the subgroups must be first removed until there are no further subgroups in the group, then the group itself can be removed.\u003c/p\u003e\n\u003cp\u003eAn existing subgroup cannot be moved from one parent to another.\u003c/p\u003e\n\u003cp\u003eTo remove a subgroup from a quota group, the subgroup must be first removed directly with the remove-quota command.\u003c/p\u003e","post_number":1,"post_type":1,"updated_at":"2023-06-01T11:24:49.743Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":171,"reads":25,"readers_count":24,"score":850.0,"yours":false,"topic_id":25553,"topic_slug":"quota-groups","display_username":"Graham Morrison","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":26,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://forum.snapcraft.io/t/service-management/3965","internal":true,"reflection":false,"title":"Service management","clicks":0},{"url":"https://forum.snapcraft.io/t/snap-how-to-guides/30851","internal":true,"reflection":true,"title":"Snap How-to guides","clicks":0},{"url":"https://forum.snapcraft.io/t/whats-new/20117","internal":true,"reflection":true,"title":"What's new","clicks":0},{"url":"https://forum.snapcraft.io/t/snap-documentation/11127","internal":true,"reflection":true,"title":"Snap documentation","clicks":0}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":true,"admin":true,"staff":true,"user_id":2772,"hidden":false,"trust_level":4,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":true,"last_wiki_edit":"2023-06-01T11:24:49.776Z","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":108561,"name":"Graham Morrison","username":"degville","avatar_template":"/user_avatar/forum.snapcraft.io/degville/{size}/2021_2.png","created_at":"2022-04-26T09:34:58.094Z","cooked":"","post_number":2,"post_type":3,"updated_at":"2022-04-26T09:34:58.094Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":10,"readers_count":9,"score":2.0,"yours":false,"topic_id":25553,"topic_slug":"quota-groups","display_username":"Graham Morrison","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":true,"admin":true,"staff":true,"user_id":2772,"hidden":false,"trust_level":4,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"action_code":"visible.disabled","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":108562,"name":"Graham Morrison","username":"degville","avatar_template":"/user_avatar/forum.snapcraft.io/degville/{size}/2021_2.png","created_at":"2022-04-26T09:35:27.932Z","cooked":"","post_number":3,"post_type":3,"updated_at":"2022-04-26T09:35:27.932Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":1,"reads":10,"readers_count":9,"score":7.0,"yours":false,"topic_id":25553,"topic_slug":"quota-groups","display_username":"Graham Morrison","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://forum.snapcraft.io/t/services-and-daemons/12601","internal":true,"reflection":true,"title":"Services and daemons","clicks":0}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":true,"admin":true,"staff":true,"user_id":2772,"hidden":false,"trust_level":4,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"action_code":"visible.enabled","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":116880,"name":"Robert P. J. Day","username":"rpjday","avatar_template":"/user_avatar/forum.snapcraft.io/rpjday/{size}/8457_2.png","created_at":"2022-11-22T14:41:29.445Z","cooked":"\u003cp\u003eI note that “snap help --all” does not mention “snap set-quota”. Is that deliberate?\u003c/p\u003e","post_number":4,"post_type":1,"updated_at":"2022-11-22T14:41:29.445Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":1,"reads":6,"readers_count":5,"score":11.2,"yours":false,"topic_id":25553,"topic_slug":"quota-groups","display_username":"Robert P. J. Day","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"","bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":11710,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":118328,"name":"Philip Meulengracht","username":"pmeulengracht","avatar_template":"/user_avatar/forum.snapcraft.io/pmeulengracht/{size}/9087_2.png","created_at":"2023-01-09T11:57:56.925Z","cooked":"\u003cp\u003e\u003ca class=\"mention\" href=\"/u/degville\"\u003e@degville\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eStarting with snapd 2.59, support for per-service quota groups will be introduced. This means that it will be possible to create sub quota-groups that contain on or multiple services of a snap, as long as that snap is in the parent group. That allows individual limits for a service, instead of sharing the limit set for the parent snap.\u003c/p\u003e\n\u003cp\u003eAn example would be a snap containing a backend system, with multiple services, for instance:\nbackend.api-service\nbackend.logic-service\u003c/p\u003e\n\u003cp\u003ewe can then put the \u003ccode\u003ebackend\u003c/code\u003e snap into a quota group like this and give it a memory limit we don’t want the snap to exceed (this is shared limit for all services)\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003esnap set-quota test-top --memory=512MB snap-backend\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003eWe then want to isolate the logic-service to not consume all of the memory, by seperating that service into it’s own, specific quota group with a memory limit of 128MB\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003esnap set-quota test-sub --parent=test-top --memory=128MB snap-backend.logic-service\u003c/code\u003e\u003c/p\u003e","post_number":5,"post_type":1,"updated_at":"2023-01-09T11:58:11.665Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":6,"readers_count":5,"score":51.2,"yours":false,"topic_id":25553,"topic_slug":"quota-groups","display_username":"Philip Meulengracht","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://forum.snapcraft.io/t/whats-new/20117","internal":true,"reflection":true,"title":"What's new","clicks":0}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":11150,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":118329,"name":"Philip Meulengracht","username":"pmeulengracht","avatar_template":"/user_avatar/forum.snapcraft.io/pmeulengracht/{size}/9087_2.png","created_at":"2023-01-09T11:59:09.497Z","cooked":"\u003cp\u003eTechnically, \u003ccode\u003esnap set-quota\u003c/code\u003e is still experimental, and therefor does not show up in \u003ccode\u003esnap help --all\u003c/code\u003e. However we expect some of this functionality to go out of experimental soon.\u003c/p\u003e","post_number":6,"post_type":1,"updated_at":"2023-01-09T11:59:09.497Z","reply_count":0,"reply_to_post_number":4,"quote_count":0,"incoming_link_count":0,"reads":6,"readers_count":5,"score":1.2,"yours":false,"topic_id":25553,"topic_slug":"quota-groups","display_username":"Philip Meulengracht","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"rpjday","avatar_template":"/user_avatar/forum.snapcraft.io/rpjday/{size}/8457_2.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":11150,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":118374,"name":"Graham Morrison","username":"degville","avatar_template":"/user_avatar/forum.snapcraft.io/degville/{size}/2021_2.png","created_at":"2023-01-10T09:33:29.822Z","cooked":"\u003cp\u003eThanks for letting me know, and for the excellent description. I’ll make sure this is added to the doc.\u003c/p\u003e","post_number":7,"post_type":1,"updated_at":"2023-01-10T09:33:29.822Z","reply_count":0,"reply_to_post_number":5,"quote_count":0,"incoming_link_count":0,"reads":5,"readers_count":4,"score":1.0,"yours":false,"topic_id":25553,"topic_slug":"quota-groups","display_username":"Graham Morrison","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"pmeulengracht","avatar_template":"/user_avatar/forum.snapcraft.io/pmeulengracht/{size}/9087_2.png"},"bookmarked":false,"actions_summary":[],"moderator":true,"admin":true,"staff":true,"user_id":2772,"hidden":false,"trust_level":4,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":122665,"name":"Robert P. J. Day","username":"rpjday","avatar_template":"/user_avatar/forum.snapcraft.io/rpjday/{size}/8457_2.png","created_at":"2023-04-21T19:18:46.899Z","cooked":"\u003cp\u003eI know next to nothing about quota groups, but I note that “snap install” has a “–quota-group” option:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e   $ snap install --help\n    ...\n    --quota-group=       Add the snap to a quota group on install\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThat should probably be mentioned here somewhere.\u003c/p\u003e","post_number":8,"post_type":1,"updated_at":"2023-04-21T19:20:29.632Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":4,"readers_count":3,"score":0.8,"yours":false,"topic_id":25553,"topic_slug":"quota-groups","display_username":"Robert P. J. Day","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"","bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":11710,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":123599,"name":"Neil Campbell","username":"neilcam","avatar_template":"/letter_avatar/neilcam/{size}/5_6d6f4cde2641c35611d5cac2fb97c77e.png","created_at":"2023-05-16T07:23:38.544Z","cooked":"\u003cp\u003eSome minor typos spotted:\u003c/p\u003e\n\u003cp\u003eLine 4\n\"Memory: as a maximum amount or RAM \"  =\u0026gt; Should that be “a maximum amount of RAM”?\u003c/p\u003e\n\u003cp\u003eCPU Limits: Section: 3.Percentage for Specific Cores\n“for that quote group.”  =\u0026gt; “for that quota group.”\u003c/p\u003e\n\u003cp\u003eCPU Limits: Section 4\n“threads = \u0026lt; thread limit”   - Missing closing brace?\u003c/p\u003e","post_number":9,"post_type":1,"updated_at":"2023-05-16T07:23:38.544Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":3,"readers_count":2,"score":5.6,"yours":false,"topic_id":25553,"topic_slug":"quota-groups","display_username":"Neil Campbell","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":14562,"hidden":false,"trust_level":0,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":123604,"name":"Graham Morrison","username":"degville","avatar_template":"/user_avatar/forum.snapcraft.io/degville/{size}/2021_2.png","created_at":"2023-05-16T09:16:05.401Z","cooked":"\u003cp\u003eThank you so much! And sorry these slipped through.\u003c/p\u003e","post_number":10,"post_type":1,"updated_at":"2023-05-16T09:16:05.401Z","reply_count":0,"reply_to_post_number":9,"quote_count":0,"incoming_link_count":0,"reads":3,"readers_count":2,"score":0.6,"yours":false,"topic_id":25553,"topic_slug":"quota-groups","display_username":"Graham Morrison","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"neilcam","avatar_template":"/letter_avatar/neilcam/{size}/5_6d6f4cde2641c35611d5cac2fb97c77e.png"},"bookmarked":false,"actions_summary":[],"moderator":true,"admin":true,"staff":true,"user_id":2772,"hidden":false,"trust_level":4,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false}],"stream":[96102,108561,108562,116880,118328,118329,118374,122665,123599,123604]},"timeline_lookup":[[1,697],[2,416],[4,205],[5,158],[7,157],[8,55],[9,31]],"suggested_topics":[{"id":31449,"title":"The gnome extension","fancy_title":"The gnome extension","slug":"the-gnome-extension","posts_count":4,"reply_count":1,"highest_post_number":5,"image_url":null,"created_at":"2022-08-24T15:47:37.290Z","last_posted_at":"2023-03-03T09:02:51.627Z","bumped":true,"bumped_at":"2023-03-03T09:02:51.627Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags":[],"like_count":0,"views":1501,"category_id":15,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":2772,"username":"degville","name":"Graham Morrison","avatar_template":"/user_avatar/forum.snapcraft.io/degville/{size}/2021_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":286,"username":"lucyllewy","name":"Lucy Llewellyn","avatar_template":"/user_avatar/forum.snapcraft.io/lucyllewy/{size}/9782_2.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":14159,"username":"manuvarkey","name":"Manu Varkey","avatar_template":"/user_avatar/forum.snapcraft.io/manuvarkey/{size}/9635_2.png"}}]},{"id":30809,"title":"The ROS 2 Humble extension","fancy_title":"The ROS 2 Humble extension","slug":"the-ros-2-humble-extension","posts_count":1,"reply_count":0,"highest_post_number":1,"image_url":null,"created_at":"2022-07-08T20:12:10.035Z","last_posted_at":"2022-07-08T20:12:10.192Z","bumped":true,"bumped_at":"2023-03-13T13:44:02.640Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags":[],"like_count":0,"views":1245,"category_id":15,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest single","description":"Original Poster, Most Recent Poster","user":{"id":6739,"username":"artivis","name":"Jeremie Deray","avatar_template":"/user_avatar/forum.snapcraft.io/artivis/{size}/5695_2.png"}}]},{"id":32197,"title":"Core 22 QT 5 enabled snaps","fancy_title":"Core 22 QT 5 enabled snaps","slug":"core-22-qt-5-enabled-snaps","posts_count":1,"reply_count":0,"highest_post_number":1,"image_url":null,"created_at":"2022-10-16T21:41:22.367Z","last_posted_at":"2022-10-16T21:41:22.512Z","bumped":true,"bumped_at":"2022-10-16T21:41:22.512Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags":[],"like_count":0,"views":235,"category_id":15,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest single","description":"Original Poster, Most Recent Poster","user":{"id":13367,"username":"coalman321","name":"","avatar_template":"/letter_avatar/coalman321/{size}/5_6d6f4cde2641c35611d5cac2fb97c77e.png"}}]},{"id":30905,"title":"Snapcraft documentation","fancy_title":"Snapcraft documentation","slug":"snapcraft-documentation","posts_count":1,"reply_count":0,"highest_post_number":1,"image_url":null,"created_at":"2022-07-15T11:05:45.374Z","last_posted_at":"2022-07-15T11:05:45.528Z","bumped":true,"bumped_at":"2023-02-17T19:55:21.024Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags":[],"like_count":0,"views":1532,"category_id":15,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest single","description":"Original Poster, Most Recent Poster","user":{"id":2772,"username":"degville","name":"Graham Morrison","avatar_template":"/user_avatar/forum.snapcraft.io/degville/{size}/2021_2.png"}}]},{"id":33074,"title":"Basic snapcraft.yaml example","fancy_title":"Basic snapcraft.yaml example","slug":"basic-snapcraft-yaml-example","posts_count":2,"reply_count":0,"highest_post_number":2,"image_url":null,"created_at":"2022-12-13T10:53:46.449Z","last_posted_at":"2022-12-15T10:45:49.975Z","bumped":true,"bumped_at":"2022-12-13T10:53:46.598Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags":[],"like_count":0,"views":887,"category_id":15,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest single","description":"Original Poster, Most Recent Poster","user":{"id":2772,"username":"degville","name":"Graham Morrison","avatar_template":"/user_avatar/forum.snapcraft.io/degville/{size}/2021_2.png"}}]}],"tags":[],"id":25553,"title":"Quota groups","fancy_title":"Quota groups","posts_count":10,"created_at":"2021-07-19T11:15:46.325Z","views":4574,"reply_count":3,"like_count":1,"last_posted_at":"2023-05-16T09:16:05.401Z","visible":true,"closed":false,"archived":false,"has_summary":false,"archetype":"regular","slug":"quota-groups","category_id":15,"word_count":2045,"deleted_at":null,"user_id":2772,"featured_link":null,"pinned_globally":false,"pinned_at":null,"pinned_until":null,"image_url":null,"slow_mode_seconds":0,"draft":null,"draft_key":"topic_25553","draft_sequence":null,"unpinned":null,"pinned":false,"current_post_number":1,"highest_post_number":10,"deleted_by":null,"actions_summary":[{"id":4,"count":0,"hidden":false,"can_act":false},{"id":8,"count":0,"hidden":false,"can_act":false},{"id":7,"count":0,"hidden":false,"can_act":false}],"chunk_size":20,"bookmarked":false,"topic_timer":null,"message_bus_last_id":0,"participant_count":4,"show_read_indicator":false,"thumbnails":null,"details":{"notification_level":1,"participants":[{"id":2772,"username":"degville","name":"Graham Morrison","avatar_template":"/user_avatar/forum.snapcraft.io/degville/{size}/2021_2.png","post_count":3,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null},{"id":11150,"username":"pmeulengracht","name":"Philip Meulengracht","avatar_template":"/user_avatar/forum.snapcraft.io/pmeulengracht/{size}/9087_2.png","post_count":2,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null},{"id":11710,"username":"rpjday","name":"Robert P. J. Day","avatar_template":"/user_avatar/forum.snapcraft.io/rpjday/{size}/8457_2.png","post_count":2,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null},{"id":14562,"username":"neilcam","name":"Neil Campbell","avatar_template":"/letter_avatar/neilcam/{size}/5_6d6f4cde2641c35611d5cac2fb97c77e.png","post_count":1,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null}],"created_by":{"id":2772,"username":"degville","name":"Graham Morrison","avatar_template":"/user_avatar/forum.snapcraft.io/degville/{size}/2021_2.png"},"last_poster":{"id":2772,"username":"degville","name":"Graham Morrison","avatar_template":"/user_avatar/forum.snapcraft.io/degville/{size}/2021_2.png"}}}