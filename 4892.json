{"post_stream":{"posts":[{"id":23716,"name":"Kyle Fazzari","username":"kyrofa","avatar_template":"/user_avatar/forum.snapcraft.io/kyrofa/{size}/4384_2.png","created_at":"2018-04-06T17:08:44.082Z","cooked":"\u003cp\u003eYou can override and customise steps of a \u003ca href=\"/t/parts-lifecycle/12231\"\u003epart’s lifecycle\u003c/a\u003e (pull, build, stage, and prime) using \u003cem\u003eoverrides\u003c/em\u003e; shell scripts directly sourced from \u003ccode\u003esnapcraft.yaml\u003c/code\u003e. These scripts are run with \u003ccode\u003e/bin/sh\u003c/code\u003e, which by default on Ubuntu is \u003ca href=\"https://en.wikipedia.org/wiki/Almquist_shell\"\u003e\u003ccode\u003edash\u003c/code\u003e\u003c/a\u003e.\u003c/p\u003e\n\u003cp\u003eAn override is declared with the following syntax:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-yaml\"\u003eparts:\n  \u0026lt;part name\u0026gt;:\n    override-\u0026lt;step name\u0026gt;: \u0026lt;shell script\u0026gt;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eYou can use a pipe on the first line to declare a multi-line script:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-yaml\"\u003eparts:\n  \u0026lt;part name\u0026gt;:\n    override-\u0026lt;step name\u0026gt;: |\n      \u0026lt;multi-line\u0026gt;\n      \u0026lt;shell script\u0026gt;\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2 id=\"heading--overriding-the-pull-step\"\u003eOverriding the pull step\u003c/h2\u003e\n\u003cp\u003eThis can be done by utilising the \u003ccode\u003eoverride-pull\u003c/code\u003e override. Its working directory is the part’s source directory in \u003ccode\u003eparts/\u0026lt;part name\u0026gt;/src/\u003c/code\u003e. In order to run the default \u003ccode\u003epull\u003c/code\u003e step, call \u003ccode\u003esnapcraftctl pull\u003c/code\u003e from within the override itself.\u003c/p\u003e\n\u003ch3\u003eExample\u003c/h3\u003e\n\u003cp\u003eLet’s say you want to patch the source code of the part you’re pulling:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-yaml\"\u003eparts:\n  foo:\n    plugin: dump\n    # ...\n    override-pull: |\n      snapcraftctl pull\n      patch -p1 \u0026lt; $SNAPCRAFT_STAGE/my.patch\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2 id=\"heading--overriding-the-build-step\"\u003eOverriding the build step\u003c/h2\u003e\n\u003cp\u003eThis can be done by utilising the \u003ccode\u003eoverride-build\u003c/code\u003e override. Its working directory is the part’s base build directory in \u003ccode\u003eparts/\u0026lt;part name\u0026gt;/build/\u003c/code\u003e. In order to run the default \u003ccode\u003ebuild\u003c/code\u003e step, call \u003ccode\u003esnapcraftctl build\u003c/code\u003e from within the override itself.\u003c/p\u003e\n\u003ch3\u003eExample\u003c/h3\u003e\n\u003cp\u003eLet’s say the default build/install process ends up installing files with absolute paths in them, which need to be fixed up to look inside the snap:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-yaml\"\u003eparts:\n  foo:\n    plugin: dump\n    # ...\n    override-build: |\n      snapcraftctl build\n      sed -i 's|/usr/bin|$SNAP/usr/bin|g' $SNAPCRAFT_PART_INSTALL/my-bin-artifact.sh\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2 id=\"heading--overriding-the-stage-step\"\u003eOverriding the stage step\u003c/h2\u003e\n\u003cp\u003eThis can be done by utilising the \u003ccode\u003eoverride-stage\u003c/code\u003e override. Its working directory is the staging area in \u003ccode\u003estage/\u003c/code\u003e. In order to run the default \u003ccode\u003estage\u003c/code\u003e step, call \u003ccode\u003esnapcraftctl stage\u003c/code\u003e from within the override itself.\u003c/p\u003e\n\u003ch3\u003eExample\u003c/h3\u003e\n\u003cp\u003eLet’s say you wanted to tweak a file installed by another part:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-yaml\"\u003eparts:\n  foo:\n    plugin: dump\n    # ...\n    after: [other-part]\n    override-stage: |\n      snapcraftctl stage\n      sed -i 's|/usr/bin|$SNAP/usr/bin|g' other/parts/file\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2 id=\"heading--overriding-the-prime-step\"\u003eOverriding the prime step\u003c/h2\u003e\n\u003cp\u003eThis can be done by utilising the \u003ccode\u003eoverride-prime\u003c/code\u003e override. Its working directory is the primeing area in \u003ccode\u003eprime/\u003c/code\u003e. In order to run the default \u003ccode\u003eprime\u003c/code\u003e step, call \u003ccode\u003esnapcraftctl prime\u003c/code\u003e from within the override itself.\u003c/p\u003e\n\u003ch3\u003eExample\u003c/h3\u003e\n\u003cp\u003eLet’s say you wanted to compile gsetting schemas for the entire priming area\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-yaml\"\u003eparts:\n  foo:\n    plugin: nil\n    after: [all, other, parts]\n    override-prime: |\n      snapcraftctl prime\n      glib-compile-schemas usr/share/glib-2.0/schemas\n\u003c/code\u003e\u003c/pre\u003e","post_number":1,"post_type":1,"updated_at":"2023-04-25T18:09:30.391Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":1493,"reads":249,"readers_count":248,"score":7509.4,"yours":false,"topic_id":4892,"topic_slug":"override-build-steps","display_username":"Kyle Fazzari","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":16,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://en.wikipedia.org/wiki/Almquist_shell","internal":false,"reflection":false,"clicks":5},{"url":"https://forum.snapcraft.io/t/parts-lifecycle/12231","internal":true,"reflection":true,"title":"Parts lifecycle","clicks":25},{"url":"https://forum.snapcraft.io/t/please-help-me-with-my-snap/7937/4","internal":true,"reflection":true,"title":"Please help me with my snap","clicks":4},{"url":"https://forum.snapcraft.io/t/deprecation-notice-7/8407","internal":true,"reflection":true,"title":"Deprecation notice: 7","clicks":2},{"url":"https://forum.snapcraft.io/t/parts-environment-variables/12271","internal":true,"reflection":true,"title":"Parts environment variables","clicks":1},{"url":"https://forum.snapcraft.io/t/excluding-data-from-snapshots/33643","internal":true,"reflection":true,"title":"Excluding data from snapshots","clicks":0},{"url":"https://forum.snapcraft.io/t/using-external-metadata/4642","internal":true,"reflection":true,"title":"Using external metadata","clicks":0},{"url":"https://forum.snapcraft.io/t/set-version-from-command-line/10398/2","internal":true,"reflection":true,"title":"Set version from command line?","clicks":0},{"url":"https://forum.snapcraft.io/t/using-parts/11324","internal":true,"reflection":true,"title":"Using parts","clicks":0},{"url":"https://forum.snapcraft.io/t/java-applications/7819","internal":true,"reflection":true,"title":"Java applications","clicks":0},{"url":"https://forum.snapcraft.io/t/gnu-hello-again-for-snapcrafters/8450","internal":true,"reflection":true,"title":"GNU Hello (again, for snapcrafters)","clicks":0},{"url":"https://forum.snapcraft.io/t/intermediate-snapcraft-yaml-example/33076","internal":true,"reflection":true,"title":"Intermediate snapcraft.yaml example","clicks":0},{"url":"https://forum.snapcraft.io/t/using-the-craftctl-tool/32664","internal":true,"reflection":true,"title":"Using the craftctl tool","clicks":0},{"url":"https://forum.snapcraft.io/t/python-apps/6741/27","internal":true,"reflection":true,"title":"Python apps","clicks":0},{"url":"https://forum.snapcraft.io/t/adding-parts/11473","internal":true,"reflection":true,"title":"Adding parts","clicks":0},{"url":"https://forum.snapcraft.io/t/snap-documentation/11127","internal":true,"reflection":true,"title":"Snap documentation","clicks":0},{"url":"https://forum.snapcraft.io/t/snap-documentation-page-deprecated/3781/25","internal":true,"reflection":true,"title":"Snap Documentation (page deprecated)","clicks":0},{"url":"https://forum.snapcraft.io/t/snapcraft-implicit-source/7060/2","internal":true,"reflection":true,"title":"Snapcraft implicit source","clicks":0},{"url":"https://forum.snapcraft.io/t/struggling-to-build-a-snap-for-php-composer/7163/2","internal":true,"reflection":true,"title":"Struggling to build a snap for PHP composer","clicks":0},{"url":"https://forum.snapcraft.io/t/deprecation-notices/8396","internal":true,"reflection":true,"title":"Deprecation notices","clicks":0}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":17,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":true,"last_wiki_edit":"2023-04-25T18:09:30.416Z","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":23720,"name":"Kyle Nitzsche","username":"kyleN","avatar_template":"/user_avatar/forum.snapcraft.io/kylen/{size}/229_2.png","created_at":"2018-04-06T17:50:59.917Z","cooked":"\u003cp\u003eShould this mention that the scriptlet is dash (not bash)?\u003c/p\u003e","post_number":2,"post_type":1,"updated_at":"2018-04-06T17:50:59.917Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":164,"readers_count":163,"score":52.6,"yours":false,"topic_id":4892,"topic_slug":"override-build-steps","display_username":"Kyle Nitzsche","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"","bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":52,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":23724,"name":"Kyle Fazzari","username":"kyrofa","avatar_template":"/user_avatar/forum.snapcraft.io/kyrofa/{size}/4384_2.png","created_at":"2018-04-06T18:46:00.696Z","cooked":"\u003cp\u003eWhat, that matters? Aren’t these all the same? \u003cem\u003ecough\u003c/em\u003e fixed thanks \u003cimg src=\"https://forum.snapcraft.io/images/emoji/emoji_one/slight_smile.png?v=9\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\"\u003e .\u003c/p\u003e","post_number":3,"post_type":1,"updated_at":"2018-04-06T18:46:00.696Z","reply_count":1,"reply_to_post_number":2,"quote_count":0,"incoming_link_count":0,"reads":145,"readers_count":144,"score":33.8,"yours":false,"topic_id":4892,"topic_slug":"override-build-steps","display_username":"Kyle Fazzari","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"kyleN","avatar_template":"/user_avatar/forum.snapcraft.io/kylen/{size}/229_2.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":17,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":23805,"name":"Lucy Llewellyn","username":"lucyllewy","avatar_template":"/user_avatar/forum.snapcraft.io/lucyllewy/{size}/9782_2.png","created_at":"2018-04-09T14:20:45.524Z","cooked":"\u003cp\u003ePlease add a list of all the steps and what overriding each one will prevent from occurring unless you add the \u003ccode\u003esnapcraftctl $step\u003c/code\u003e to reinstate the default behaviour of the plugin.\u003c/p\u003e","post_number":4,"post_type":1,"updated_at":"2018-04-09T14:20:45.524Z","reply_count":0,"reply_to_post_number":3,"quote_count":0,"incoming_link_count":2,"reads":128,"readers_count":127,"score":35.6,"yours":false,"topic_id":4892,"topic_slug":"override-build-steps","display_username":"Lucy Llewellyn","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"","reply_to_user":{"username":"kyrofa","avatar_template":"/user_avatar/forum.snapcraft.io/kyrofa/{size}/4384_2.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":286,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":23817,"name":"Gustavo Niemeyer","username":"niemeyer","avatar_template":"/user_avatar/forum.snapcraft.io/niemeyer/{size}/4620_2.png","created_at":"2018-04-09T16:45:39.074Z","cooked":"\u003cp\u003eThanks for the docs, Kyle!  We should link into this from somewhere in the publication docs.\u003c/p\u003e\n\u003cp\u003eAnother idea: can we rename “snapcraftctl” to “craftctl” perhaps? The former seems a bit over-verbose.\u003c/p\u003e","post_number":5,"post_type":1,"updated_at":"2018-04-09T16:45:39.074Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":124,"readers_count":123,"score":24.8,"yours":false,"topic_id":4892,"topic_slug":"override-build-steps","display_username":"Gustavo Niemeyer","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":true,"staff":true,"user_id":1,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":23826,"name":"Kyle Fazzari","username":"kyrofa","avatar_template":"/user_avatar/forum.snapcraft.io/kyrofa/{size}/4384_2.png","created_at":"2018-04-09T18:13:47.604Z","cooked":"\u003cp\u003e\u003ca class=\"mention\" href=\"/u/niemeyer\"\u003e@niemeyer\u003c/a\u003e you mean from the outline topic? Yeah, we should chat about how to best organize that, I figured I’d start with just adding the info for now.\u003c/p\u003e\n\u003cp\u003eRegarding the name, we wanted to mirror the snap -\u0026gt; snapctl relationship with snapcraft -\u0026gt; snapcraftctl. It’s a bit long, perhaps, but it’s intuitive: in snap, use snapctl to communicate with the orchestrator of the snap (snapd), in snapcraft, use snapcraftctl to communicate with the orchestrator of the build (snapcraft).\u003c/p\u003e\n\u003cp\u003eWhen I see *ctl, I think “it controls something.” What does it control? Intuitively, the *. So for \u003ccode\u003esnapctl\u003c/code\u003e, it controls the snap (its services, its config, etc.). For \u003ccode\u003esnapcraftctl\u003c/code\u003e, it controls snapcraft. For \u003ccode\u003ecraftctl\u003c/code\u003e, I ask “what is craft?”\u003c/p\u003e","post_number":6,"post_type":1,"updated_at":"2018-04-09T18:43:11.051Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":123,"readers_count":122,"score":29.6,"yours":false,"topic_id":4892,"topic_slug":"override-build-steps","display_username":"Kyle Fazzari","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":2,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":17,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":23827,"name":"Gustavo Niemeyer","username":"niemeyer","avatar_template":"/user_avatar/forum.snapcraft.io/niemeyer/{size}/4620_2.png","created_at":"2018-04-09T18:16:35.192Z","cooked":"\u003cp\u003eI can see the relationship, but these tools are different, and unless you know how to use it and where you can use it, there’s no way to just guess. Having something nice to read and write sounds more important than just mimicking the etymology.\u003c/p\u003e","post_number":7,"post_type":1,"updated_at":"2018-04-09T18:16:35.192Z","reply_count":0,"reply_to_post_number":6,"quote_count":0,"incoming_link_count":2,"reads":116,"readers_count":115,"score":33.2,"yours":false,"topic_id":4892,"topic_slug":"override-build-steps","display_username":"Gustavo Niemeyer","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"kyrofa","avatar_template":"/user_avatar/forum.snapcraft.io/kyrofa/{size}/4384_2.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":true,"staff":true,"user_id":1,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":42830,"name":"Anatoli Babenia","username":"abitrolly","avatar_template":"/user_avatar/forum.snapcraft.io/abitrolly/{size}/4528_2.png","created_at":"2019-02-09T16:08:06.660Z","cooked":"\u003cp\u003eHow to find out project root or location of \u003ccode\u003esnapcraft.yml\u003c/code\u003e? I don’t see any environment variables pointing to it. Why? There is a custom version file in project root, maintained by other people, and all parts should be built for version specified there.\u003c/p\u003e\n\u003cp\u003eI am doing out of tree builds, and usual “parent of stage” doesn’t work here.\u003c/p\u003e","post_number":8,"post_type":1,"updated_at":"2019-02-09T16:08:06.660Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":2,"reads":93,"readers_count":92,"score":48.6,"yours":false,"topic_id":4892,"topic_slug":"override-build-steps","display_username":"Anatoli Babenia","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":2185,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":42831,"name":"Anatoli Babenia","username":"abitrolly","avatar_template":"/user_avatar/forum.snapcraft.io/abitrolly/{size}/4528_2.png","created_at":"2019-02-09T17:19:49.297Z","cooked":"\u003cp\u003eAdded SNAPCRAFT_PROJECT_DIR is a part of “out of tree build” PR.\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://github.com/snapcore/snapcraft/pull/2463/commits/85f9815483cdda206b5acd0a7b1cb94744f95c39\" class=\"onebox\" target=\"_blank\" rel=\"noopener nofollow ugc\"\u003ehttps://github.com/snapcore/snapcraft/pull/2463/commits/85f9815483cdda206b5acd0a7b1cb94744f95c39\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eTests are not easy.\u003c/p\u003e","post_number":9,"post_type":1,"updated_at":"2019-02-09T17:19:49.297Z","reply_count":0,"reply_to_post_number":8,"quote_count":0,"incoming_link_count":2,"reads":94,"readers_count":93,"score":28.8,"yours":false,"topic_id":4892,"topic_slug":"override-build-steps","display_username":"Anatoli Babenia","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://github.com/snapcore/snapcraft/pull/2463/commits/85f9815483cdda206b5acd0a7b1cb94744f95c39","internal":false,"reflection":false,"title":"Pass --work-dir param for out-of-tree builds by abitrolly · Pull Request #2463 · snapcore/snapcraft · GitHub","clicks":1}],"read":true,"user_title":null,"reply_to_user":{"username":"abitrolly","avatar_template":"/user_avatar/forum.snapcraft.io/abitrolly/{size}/4528_2.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":2185,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":44703,"name":"林博仁(Buo-ren, Lin)","username":"Lin-Buo-Ren","avatar_template":"/user_avatar/forum.snapcraft.io/lin-buo-ren/{size}/4612_2.png","created_at":"2019-03-12T06:52:26.924Z","cooked":"\u003cp\u003eI would like to ask if the shell environment of the scriptlet has defined any shell options like \u003ccode\u003eerrexit\u003c/code\u003e and \u003ccode\u003enounset\u003c/code\u003e?\u003c/p\u003e\n\u003cp\u003eUPDATE: It seems that only \u003ccode\u003eerrexit\u003c/code\u003e is enforced:\u003c/p\u003e\n\u003caside class=\"onebox githubblob\"\u003e\n  \u003cheader class=\"source\"\u003e\n      \u003ca href=\"https://github.com/snapcore/snapcraft/blob/c6542b5f7ea66f744f0c101d9dc6a682c90734cb/snapcraft/internal/pluginhandler/_runner.py#L104\" target=\"_blank\" rel=\"noopener\"\u003egithub.com\u003c/a\u003e\n  \u003c/header\u003e\n  \u003carticle class=\"onebox-body\"\u003e\n    \u003ch4\u003e\u003ca href=\"https://github.com/snapcore/snapcraft/blob/c6542b5f7ea66f744f0c101d9dc6a682c90734cb/snapcraft/internal/pluginhandler/_runner.py#L104\" target=\"_blank\" rel=\"noopener\"\u003esnapcore/snapcraft/blob/c6542b5f7ea66f744f0c101d9dc6a682c90734cb/snapcraft/internal/pluginhandler/_runner.py#L104\u003c/a\u003e\u003c/h4\u003e\n\u003cpre class=\"onebox\"\u003e\u003ccode class=\"lang-py\"\u003e\u003col class=\"start lines\" start=\"94\" style=\"counter-reset: li-counter 93 ;\"\u003e\n\u003cli\u003edef _run_scriptlet(self, scriptlet_name: str, scriptlet: str, workdir: str) -\u0026gt; None:\u003c/li\u003e\u003cli\u003e    with tempfile.TemporaryDirectory() as tempdir:\u003c/li\u003e\u003cli\u003e        call_fifo = _NonBlockingRWFifo(os.path.join(tempdir, \"function_call\"))\u003c/li\u003e\u003cli\u003e        feedback_fifo = _NonBlockingRWFifo(os.path.join(tempdir, \"call_feedback\"))\u003c/li\u003e\u003cli\u003e\u003c/li\u003e\u003cli\u003e        # snapcraftctl only works consistently if it's using the exact same\u003c/li\u003e\u003cli\u003e        # interpreter as that used by snapcraft itself, thus the definition\u003c/li\u003e\u003cli\u003e        # of SNAPCRAFT_INTERPRETER.\u003c/li\u003e\u003cli\u003e        script = textwrap.dedent(\u003c/li\u003e\u003cli\u003e            \"\"\"\\\u003c/li\u003e\u003cli class=\"selected\"\u003e            set -e\u003c/li\u003e\u003cli\u003e            export SNAPCRAFTCTL_CALL_FIFO={call_fifo}\u003c/li\u003e\u003cli\u003e            export SNAPCRAFTCTL_FEEDBACK_FIFO={feedback_fifo}\u003c/li\u003e\u003cli\u003e            export SNAPCRAFT_INTERPRETER={interpreter}\u003c/li\u003e\u003cli\u003e            {env}\u003c/li\u003e\u003cli\u003e            {scriptlet}\"\"\"\u003c/li\u003e\u003cli\u003e        ).format(\u003c/li\u003e\u003cli\u003e            interpreter=sys.executable,\u003c/li\u003e\u003cli\u003e            call_fifo=call_fifo.path,\u003c/li\u003e\u003cli\u003e            feedback_fifo=feedback_fifo.path,\u003c/li\u003e\u003cli\u003e            scriptlet=scriptlet,\u003c/li\u003e\n\u003c/ol\u003e\u003c/code\u003e\u003c/pre\u003e\n\n\n  \u003c/article\u003e\n  \u003cdiv class=\"onebox-metadata\"\u003e\n    \n    \n  \u003c/div\u003e\n  \u003cdiv style=\"clear: both\"\u003e\u003c/div\u003e\n\u003c/aside\u003e\n","post_number":10,"post_type":1,"updated_at":"2019-03-12T07:30:16.302Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":1,"reads":87,"readers_count":86,"score":27.4,"yours":false,"topic_id":4892,"topic_slug":"override-build-steps","display_username":"林博仁(Buo-ren, Lin)","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":2,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://github.com/snapcore/snapcraft/blob/c6542b5f7ea66f744f0c101d9dc6a682c90734cb/snapcraft/internal/pluginhandler/_runner.py#L104","internal":false,"reflection":false,"title":"snapcraft/_runner.py at c6542b5f7ea66f744f0c101d9dc6a682c90734cb · snapcore/snapcraft · GitHub","clicks":1}],"read":true,"user_title":"","bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1417,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":44722,"name":"Oliver Grawert","username":"ogra","avatar_template":"/user_avatar/forum.snapcraft.io/ogra/{size}/22_2.png","created_at":"2019-03-12T10:48:28.011Z","cooked":"\u003cp\u003ewhile we should stop execution on errors, \u003ccode\u003enounset\u003c/code\u003e should really be in the hands of the developer (i personally am for example not a fan of it since it makes scripts a lot bigger and harder to read if you have to zero-init variables everywhere)\u003c/p\u003e","post_number":11,"post_type":1,"updated_at":"2019-03-12T10:48:28.011Z","reply_count":0,"reply_to_post_number":10,"quote_count":0,"incoming_link_count":1,"reads":77,"readers_count":76,"score":35.4,"yours":false,"topic_id":4892,"topic_slug":"override-build-steps","display_username":"Oliver Grawert","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"Lin-Buo-Ren","avatar_template":"/user_avatar/forum.snapcraft.io/lin-buo-ren/{size}/4612_2.png"},"bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":9,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":44813,"name":"Sergio Schvezov","username":"sergiusens","avatar_template":"/user_avatar/forum.snapcraft.io/sergiusens/{size}/5621_2.png","created_at":"2019-03-13T12:09:52.333Z","cooked":"\u003cp\u003e\u003ca class=\"mention\" href=\"/u/degville\"\u003e@degville\u003c/a\u003e hey there! Just had a thought about making this less about \u003cem\u003escriptlets\u003c/em\u003e and more about overriding steps.\u003c/p\u003e","post_number":12,"post_type":1,"updated_at":"2019-03-13T12:09:52.333Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":76,"readers_count":75,"score":20.2,"yours":false,"topic_id":4892,"topic_slug":"override-build-steps","display_username":"Sergio Schvezov","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"policy-reviewers","title_is_group":false,"bookmarked":false,"actions_summary":[],"moderator":true,"admin":false,"staff":true,"user_id":25,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":44949,"name":"Graham Morrison","username":"degville","avatar_template":"/user_avatar/forum.snapcraft.io/degville/{size}/2021_2.png","created_at":"2019-03-14T22:29:51.921Z","cooked":"\u003caside class=\"quote no-group\" data-username=\"sergiusens\" data-post=\"12\" data-topic=\"4892\" data-full=\"true\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"20\" height=\"20\" src=\"https://forum.snapcraft.io/user_avatar/forum.snapcraft.io/sergiusens/40/5621_2.png\" class=\"avatar\"\u003e sergiusens:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003e\u003ca class=\"mention\" href=\"/u/degville\"\u003e@degville\u003c/a\u003e hey there! Just had a thought about making this less about \u003cem\u003escriptlets\u003c/em\u003e and more about overriding steps.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eGood idea! I’ve linked to this from the new \u003ca href=\"https://forum.snapcraft.io/t/snapcraft-build-debug-and-publishing-docs-roadmap/10273\" class=\"inline-onebox\"\u003eSnapcraft build, debug and publishing docs roadmap\u003c/a\u003e plan we have so we can update this page to reflect that ideal.\u003c/p\u003e","post_number":13,"post_type":1,"updated_at":"2019-03-14T22:29:51.921Z","reply_count":0,"reply_to_post_number":12,"quote_count":1,"incoming_link_count":1,"reads":76,"readers_count":75,"score":20.2,"yours":false,"topic_id":4892,"topic_slug":"override-build-steps","display_username":"Graham Morrison","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://forum.snapcraft.io/t/snapcraft-build-debug-and-publishing-docs-roadmap/10273","internal":true,"reflection":false,"title":"Snapcraft build, debug and publishing docs roadmap","clicks":5}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":true,"admin":true,"staff":true,"user_id":2772,"hidden":false,"trust_level":4,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":47044,"name":"Roger Light","username":"ralight","avatar_template":"/user_avatar/forum.snapcraft.io/ralight/{size}/4422_2.png","created_at":"2019-04-16T20:35:56.811Z","cooked":"\u003cp\u003eThis is helpful, but for me at least left me with more questions. The content by Dan at \u003ca href=\"https://forum.snapcraft.io/t/proposal-expose-snapcraft-snap-and-snapcraft-parts-environment-variables/5548/6\" class=\"inline-onebox\"\u003eProposal: Expose SNAPCRAFT_SNAP and SNAPCRAFT_PARTS environment variables\u003c/a\u003e completed the picture on how to apply a patch.\u003c/p\u003e","post_number":14,"post_type":1,"updated_at":"2019-04-16T20:35:56.811Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":72,"readers_count":71,"score":19.4,"yours":false,"topic_id":4892,"topic_slug":"override-build-steps","display_username":"Roger Light","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://forum.snapcraft.io/t/proposal-expose-snapcraft-snap-and-snapcraft-parts-environment-variables/5548/6","internal":true,"reflection":false,"title":"Proposal: Expose SNAPCRAFT_SNAP and SNAPCRAFT_PARTS environment variables","clicks":7}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1096,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":47391,"name":"Sergio Schvezov","username":"sergiusens","avatar_template":"/user_avatar/forum.snapcraft.io/sergiusens/{size}/5621_2.png","created_at":"2019-04-23T13:43:33.638Z","cooked":"\u003cp\u003e\u003ca class=\"mention\" href=\"/u/degville\"\u003e@degville\u003c/a\u003e hey, just a mention that the \u003cstrong\u003eprime\u003c/strong\u003e example is missing a call to \u003ccode\u003esnapcraftctl prime\u003c/code\u003e.\u003cbr\u003e\nI would fix it myself, but I have no edit button \u003cimg src=\"https://forum.snapcraft.io/images/emoji/emoji_one/slight_smile.png?v=9\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\"\u003e\u003c/p\u003e","post_number":15,"post_type":1,"updated_at":"2019-04-23T13:43:33.638Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":1,"reads":72,"readers_count":71,"score":39.4,"yours":false,"topic_id":4892,"topic_slug":"override-build-steps","display_username":"Sergio Schvezov","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"policy-reviewers","title_is_group":false,"bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":true,"admin":false,"staff":true,"user_id":25,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":47394,"name":"Graham Morrison","username":"degville","avatar_template":"/user_avatar/forum.snapcraft.io/degville/{size}/2021_2.png","created_at":"2019-04-23T13:50:06.215Z","cooked":"\u003caside class=\"quote no-group\" data-username=\"sergiusens\" data-post=\"15\" data-topic=\"4892\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"20\" height=\"20\" src=\"https://forum.snapcraft.io/user_avatar/forum.snapcraft.io/sergiusens/40/5621_2.png\" class=\"avatar\"\u003e sergiusens:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003ehey, just a mention that the \u003cstrong\u003eprime\u003c/strong\u003e example is missing a call to \u003ccode\u003esnapcraftctl prime\u003c/code\u003e .\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eThanks! I’ve made this a wiki and added the missing command.\u003c/p\u003e","post_number":16,"post_type":1,"updated_at":"2019-04-23T13:50:06.215Z","reply_count":0,"reply_to_post_number":15,"quote_count":1,"incoming_link_count":0,"reads":70,"readers_count":69,"score":29.0,"yours":false,"topic_id":4892,"topic_slug":"override-build-steps","display_username":"Graham Morrison","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":true,"admin":true,"staff":true,"user_id":2772,"hidden":false,"trust_level":4,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":47440,"name":"林博仁(Buo-ren, Lin)","username":"Lin-Buo-Ren","avatar_template":"/user_avatar/forum.snapcraft.io/lin-buo-ren/{size}/4612_2.png","created_at":"2019-04-23T19:10:46.172Z","cooked":"\u003caside class=\"quote no-group quote-modified\" data-username=\"ralight\" data-post=\"14\" data-topic=\"4892\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"20\" height=\"20\" src=\"https://forum.snapcraft.io/user_avatar/forum.snapcraft.io/ralight/40/4422_2.png\" class=\"avatar\"\u003e ralight:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eThe content by Dan at \u003ca href=\"https://forum.snapcraft.io/t/proposal-expose-snapcraft-snap-and-snapcraft-parts-environment-variables/5548/6\"\u003eProposal: Expose SNAPCRAFT_SNAP and SNAPCRAFT_PARTS environment variables\u003c/a\u003e completed the picture on how to apply a patch.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eThe proper way to apply a patch is to install them to the /stage tree by a different part and applying them in the consuming part’s override-{pull,build} scriptlets, refer the following one for an example:\u003c/p\u003e\n\u003caside class=\"onebox githubblob\"\u003e\n  \u003cheader class=\"source\"\u003e\n      \u003ca href=\"https://github.com/Lin-Buo-Ren/OpenSyobonAction-snap/blob/master/snap/snapcraft.yaml\" target=\"_blank\" rel=\"noopener\"\u003egithub.com\u003c/a\u003e\n  \u003c/header\u003e\n  \u003carticle class=\"onebox-body\"\u003e\n    \u003ch4\u003e\u003ca href=\"https://github.com/Lin-Buo-Ren/OpenSyobonAction-snap/blob/master/snap/snapcraft.yaml\" target=\"_blank\" rel=\"noopener\"\u003eLin-Buo-Ren/OpenSyobonAction-snap/blob/master/snap/snapcraft.yaml\u003c/a\u003e\u003c/h4\u003e\n\u003cpre\u003e\u003ccode class=\"lang-yaml\"\u003e%YAML 1.1\n---\n# Snapcraft Recipe for Open Syobon Action (オープンしょぼんのアクション)\n# ------------------------------\n# This file is in the YAML data serialization format:\n# http://yaml.org\n# For the spec. of writing this file refer the following documentation:\n# * The snapcraft format\n#   https://docs.snapcraft.io/the-snapcraft-format/8337\n# * Snap Documentation\n#   https://docs.snapcraft.io\n# * Topics under the doc category in the Snapcraft Forum\n#   https://forum.snapcraft.io/c/doc\n# For support refer to the snapcraft section in the Snapcraft Forum:\n# https://forum.snapcraft.io/c/snapcraft\nname: open-syobon-action\ntitle: Open Syobon Action (オープンしょぼんのアクション)\nsummary: An open-source cross-platform port of the unforgiving Japanese platformer\ndescription: |\n  Open Syobon Action (オープンしょぼんのアクション) is an open-source cross-platform port of the unforgiving Japanese platformer using SDL.\n\u003c/code\u003e\u003c/pre\u003e\n\n  This file has been truncated. \u003ca href=\"https://github.com/Lin-Buo-Ren/OpenSyobonAction-snap/blob/master/snap/snapcraft.yaml\" target=\"_blank\" rel=\"noopener\"\u003eshow original\u003c/a\u003e\n\n  \u003c/article\u003e\n  \u003cdiv class=\"onebox-metadata\"\u003e\n    \n    \n  \u003c/div\u003e\n  \u003cdiv style=\"clear: both\"\u003e\u003c/div\u003e\n\u003c/aside\u003e\n","post_number":17,"post_type":1,"updated_at":"2019-04-23T19:11:10.741Z","reply_count":0,"reply_to_post_number":14,"quote_count":1,"incoming_link_count":5,"reads":73,"readers_count":72,"score":39.6,"yours":false,"topic_id":4892,"topic_slug":"override-build-steps","display_username":"林博仁(Buo-ren, Lin)","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://github.com/Lin-Buo-Ren/OpenSyobonAction-snap/blob/master/snap/snapcraft.yaml","internal":false,"reflection":false,"title":"OpenSyobonAction-snap/snapcraft.yaml at master · Lin-Buo-Ren/OpenSyobonAction-snap · GitHub","clicks":5}],"read":true,"user_title":"","bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1417,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":104744,"name":"Robert P. J. Day","username":"rpjday","avatar_template":"/user_avatar/forum.snapcraft.io/rpjday/{size}/8457_2.png","created_at":"2022-01-24T18:25:09.876Z","cooked":"\u003cp\u003eWhat is the scope of a variable I define arbitrarily inside a scriptlet? I’m assuming it’s local to just that scriptlet but I don’t see that written down explicitly anywhere.\u003c/p\u003e","post_number":18,"post_type":1,"updated_at":"2022-01-24T18:25:09.876Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":33,"readers_count":32,"score":6.6,"yours":false,"topic_id":4892,"topic_slug":"override-build-steps","display_username":"Robert P. J. Day","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"","bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":11710,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":110940,"name":"Jason C. Nucciarone","username":"nuccitheboss","avatar_template":"/user_avatar/forum.snapcraft.io/nuccitheboss/{size}/9774_2.png","created_at":"2022-06-20T17:51:52.448Z","cooked":"\u003ch2\u003eIssue\u003c/h2\u003e\n\u003caside class=\"quote no-group\" data-username=\"kyrofa\" data-post=\"1\" data-topic=\"4892\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"20\" height=\"20\" src=\"https://forum.snapcraft.io/user_avatar/forum.snapcraft.io/kyrofa/40/4384_2.png\" class=\"avatar\"\u003e kyrofa:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003ch2\u003eOverriding the \u003ccode\u003ebuild\u003c/code\u003e step\u003ca href=\"#heading--overriding-the-build-step\"\u003e\u003cimg src=\"https://forum.snapcraft.io/images/emoji/emoji_one/anchor.png?v=9\" title=\":anchor:\" class=\"emoji only-emoji\" alt=\":anchor:\"\u003e\u003c/a\u003e\n\u003c/h2\u003e\n\u003cp\u003eThis can be done by utilising the \u003ccode\u003eoverride-build\u003c/code\u003e scriptlet. Its working directory is the part’s base build directory in \u003ccode\u003eparts/\u0026lt;part name\u0026gt;/build/\u003c/code\u003e. In order to run the default \u003ccode\u003ebuild\u003c/code\u003e step, call \u003ccode\u003esnapcraftctl build\u003c/code\u003e from within the scriptlet.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eNoticed this in another doc page, but it looks like the anchor is broken here too. Like the other doc page, the problem seems to be with how the anchor is rendered in the document. When you click on the anchor, nothing seems to happen on the page.\u003c/p\u003e\n\u003ch2\u003ePotential solution\u003c/h2\u003e\n\u003cp\u003eI found that adding an extra space between the anchor and the heading text fixes the issue:\u003c/p\u003e\n\u003cp\u003eInstead of:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003e## Overriding the **build** step[:anchor:](#heading--overriding-the-build-step)\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003edo:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003e## Overriding the **build** step [:anchor:](#heading--overriding-the-build-step)\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e","post_number":19,"post_type":1,"updated_at":"2022-06-20T17:51:52.448Z","reply_count":1,"reply_to_post_number":null,"quote_count":1,"incoming_link_count":0,"reads":30,"readers_count":29,"score":11.0,"yours":false,"topic_id":4892,"topic_slug":"override-build-steps","display_username":"Jason C. Nucciarone","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":12652,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":111115,"name":"Graham Morrison","username":"degville","avatar_template":"/user_avatar/forum.snapcraft.io/degville/{size}/2021_2.png","created_at":"2022-06-24T09:38:17.341Z","cooked":"\u003cp\u003eThanks for letting us know! I’ve updated all the headings in this doc to use the new anchor scheme.\u003c/p\u003e","post_number":20,"post_type":1,"updated_at":"2022-06-24T09:38:17.341Z","reply_count":0,"reply_to_post_number":19,"quote_count":0,"incoming_link_count":0,"reads":27,"readers_count":26,"score":20.4,"yours":false,"topic_id":4892,"topic_slug":"override-build-steps","display_username":"Graham Morrison","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"nuccitheboss","avatar_template":"/user_avatar/forum.snapcraft.io/nuccitheboss/{size}/9774_2.png"},"bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":true,"admin":true,"staff":true,"user_id":2772,"hidden":false,"trust_level":4,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false}],"stream":[23716,23720,23724,23805,23817,23826,23827,42830,42831,44703,44722,44813,44949,47044,47391,47394,47440,104744,110940,111115,113867,113871,113872,113873,121920,122844,122845,122847,124480]},"timeline_lookup":[[1,1896],[4,1893],[8,1587],[10,1557],[12,1556],[13,1554],[14,1521],[15,1515],[16,1514],[18,507],[19,360],[20,357],[21,280],[25,74],[26,51],[29,13]],"tags":[],"id":4892,"title":"Override build steps","fancy_title":"Override build steps","posts_count":29,"created_at":"2018-04-06T17:08:43.972Z","views":10675,"reply_count":14,"like_count":7,"last_posted_at":"2023-06-02T19:44:21.084Z","visible":true,"closed":false,"archived":false,"has_summary":false,"archetype":"regular","slug":"override-build-steps","category_id":15,"word_count":1615,"deleted_at":null,"user_id":17,"featured_link":null,"pinned_globally":false,"pinned_at":null,"pinned_until":null,"image_url":null,"slow_mode_seconds":0,"draft":null,"draft_key":"topic_4892","draft_sequence":null,"unpinned":null,"pinned":false,"current_post_number":1,"highest_post_number":29,"deleted_by":null,"actions_summary":[{"id":4,"count":0,"hidden":false,"can_act":false},{"id":8,"count":0,"hidden":false,"can_act":false},{"id":7,"count":0,"hidden":false,"can_act":false}],"chunk_size":20,"bookmarked":false,"topic_timer":null,"message_bus_last_id":0,"participant_count":13,"show_read_indicator":false,"thumbnails":null,"details":{"notification_level":1,"participants":[{"id":2772,"username":"degville","name":"Graham Morrison","avatar_template":"/user_avatar/forum.snapcraft.io/degville/{size}/2021_2.png","post_count":5,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null},{"id":2185,"username":"abitrolly","name":"Anatoli Babenia","avatar_template":"/user_avatar/forum.snapcraft.io/abitrolly/{size}/4528_2.png","post_count":4,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null},{"id":11710,"username":"rpjday","name":"Robert P. J. Day","avatar_template":"/user_avatar/forum.snapcraft.io/rpjday/{size}/8457_2.png","post_count":4,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null},{"id":17,"username":"kyrofa","name":"Kyle Fazzari","avatar_template":"/user_avatar/forum.snapcraft.io/kyrofa/{size}/4384_2.png","post_count":4,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null},{"id":25,"username":"sergiusens","name":"Sergio Schvezov","avatar_template":"/user_avatar/forum.snapcraft.io/sergiusens/{size}/5621_2.png","post_count":2,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null},{"id":1,"username":"niemeyer","name":"Gustavo Niemeyer","avatar_template":"/user_avatar/forum.snapcraft.io/niemeyer/{size}/4620_2.png","post_count":2,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null},{"id":1417,"username":"Lin-Buo-Ren","name":"林博仁(Buo-ren, Lin)","avatar_template":"/user_avatar/forum.snapcraft.io/lin-buo-ren/{size}/4612_2.png","post_count":2,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null},{"id":14229,"username":"dilyn","name":"Dilyn Corner","avatar_template":"/letter_avatar/dilyn/{size}/5_6d6f4cde2641c35611d5cac2fb97c77e.png","post_count":1,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null},{"id":9,"username":"ogra","name":"Oliver Grawert","avatar_template":"/user_avatar/forum.snapcraft.io/ogra/{size}/22_2.png","post_count":1,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null},{"id":52,"username":"kyleN","name":"Kyle Nitzsche","avatar_template":"/user_avatar/forum.snapcraft.io/kylen/{size}/229_2.png","post_count":1,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null},{"id":286,"username":"lucyllewy","name":"Lucy Llewellyn","avatar_template":"/user_avatar/forum.snapcraft.io/lucyllewy/{size}/9782_2.png","post_count":1,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null},{"id":1096,"username":"ralight","name":"Roger Light","avatar_template":"/user_avatar/forum.snapcraft.io/ralight/{size}/4422_2.png","post_count":1,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null},{"id":12652,"username":"nuccitheboss","name":"Jason C. Nucciarone","avatar_template":"/user_avatar/forum.snapcraft.io/nuccitheboss/{size}/9774_2.png","post_count":1,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null}],"created_by":{"id":17,"username":"kyrofa","name":"Kyle Fazzari","avatar_template":"/user_avatar/forum.snapcraft.io/kyrofa/{size}/4384_2.png"},"last_poster":{"id":14229,"username":"dilyn","name":"Dilyn Corner","avatar_template":"/letter_avatar/dilyn/{size}/5_6d6f4cde2641c35611d5cac2fb97c77e.png"},"links":[{"url":"https://forum.snapcraft.io/t/parts-lifecycle/12231","title":"Parts lifecycle","internal":true,"attachment":false,"reflection":true,"clicks":25,"user_id":2772,"domain":"forum.snapcraft.io","root_domain":"snapcraft.io"},{"url":"https://forum.snapcraft.io/t/proposal-expose-snapcraft-snap-and-snapcraft-parts-environment-variables/5548/6","title":"Proposal: Expose SNAPCRAFT_SNAP and SNAPCRAFT_PARTS environment variables","internal":true,"attachment":false,"reflection":false,"clicks":7,"user_id":1096,"domain":"forum.snapcraft.io","root_domain":"snapcraft.io"},{"url":"https://en.wikipedia.org/wiki/Almquist_shell","title":null,"internal":false,"attachment":false,"reflection":false,"clicks":5,"user_id":17,"domain":"en.wikipedia.org","root_domain":"wikipedia.org"},{"url":"https://forum.snapcraft.io/t/snapcraft-build-debug-and-publishing-docs-roadmap/10273","title":"Snapcraft build, debug and publishing docs roadmap","internal":true,"attachment":false,"reflection":false,"clicks":5,"user_id":2772,"domain":"forum.snapcraft.io","root_domain":"snapcraft.io"},{"url":"https://github.com/Lin-Buo-Ren/OpenSyobonAction-snap/blob/master/snap/snapcraft.yaml","title":"OpenSyobonAction-snap/snapcraft.yaml at master · Lin-Buo-Ren/OpenSyobonAction-snap · GitHub","internal":false,"attachment":false,"reflection":false,"clicks":5,"user_id":1417,"domain":"github.com","root_domain":"github.com"},{"url":"https://forum.snapcraft.io/t/please-help-me-with-my-snap/7937/4","title":"Please help me with my snap","internal":true,"attachment":false,"reflection":true,"clicks":4,"user_id":1417,"domain":"forum.snapcraft.io","root_domain":"snapcraft.io"},{"url":"https://forum.snapcraft.io/t/deprecation-notice-7/8407","title":"Deprecation notice: 7","internal":true,"attachment":false,"reflection":true,"clicks":2,"user_id":2772,"domain":"forum.snapcraft.io","root_domain":"snapcraft.io"},{"url":"https://github.com/snapcore/snapcraft/blob/c6542b5f7ea66f744f0c101d9dc6a682c90734cb/snapcraft/internal/pluginhandler/_runner.py#L104","title":"snapcraft/_runner.py at c6542b5f7ea66f744f0c101d9dc6a682c90734cb · snapcore/snapcraft · GitHub","internal":false,"attachment":false,"reflection":false,"clicks":1,"user_id":1417,"domain":"github.com","root_domain":"github.com"},{"url":"https://github.com/snapcore/snapcraft/pull/2463/commits/85f9815483cdda206b5acd0a7b1cb94744f95c39","title":"Pass --work-dir param for out-of-tree builds by abitrolly · Pull Request #2463 · snapcore/snapcraft · GitHub","internal":false,"attachment":false,"reflection":false,"clicks":1,"user_id":2185,"domain":"github.com","root_domain":"github.com"},{"url":"https://forum.snapcraft.io/t/parts-environment-variables/12271","title":"Parts environment variables","internal":true,"attachment":false,"reflection":true,"clicks":1,"user_id":2772,"domain":"forum.snapcraft.io","root_domain":"snapcraft.io"}]}}