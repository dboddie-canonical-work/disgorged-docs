{"post_stream":{"posts":[{"id":49001,"name":"Graham Morrison","username":"degville","avatar_template":"/user_avatar/forum.snapcraft.io/degville/{size}/2021_2.png","created_at":"2019-05-21T12:59:54.458Z","cooked":"\u003cp\u003eWhen building a snap and constructing a \u003ca href=\"/t/adding-parts/11473\"\u003epart\u003c/a\u003e, you commonly need to specify build and staging dependencies. Build dependencies are required for your part to successfully build or compile on the development host, while staging dependencies are required for your snap to run.\u003c/p\u003e\n\u003cp\u003eHow these dependencies are identified and added is covered below.\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"#heading--package\"\u003ePackage types\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#heading--package-names\"\u003ePackage and snap names\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#heading--missing\"\u003eIdentify missing packages\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"#heading--missing-building\"\u003eBuilding\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#heading--missing-staging\"\u003eStaging\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#heading--filtering\"\u003eRemoving stage package duplication\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eFor further help on solving build dependencies, see \u003ca href=\"/t/iterating-over-a-build/12143\"\u003eIterating over a build\u003c/a\u003e for build and testing best-practices and  \u003ca href=\"/t/troubleshoot-snap-building/11938\"\u003eTroubleshoot snap building\u003c/a\u003e for help  resolving build errors.\u003c/p\u003e\n\u003chr\u003e\n\u003ch2 id=\"heading--package\"\u003ePackage types\u003c/h2\u003e\n\u003cp\u003eBuild and staging dependencies are added to a snap’s \u003ca href=\"/t/the-snapcraft-format/8337\"\u003esnapcraft.yaml\u003c/a\u003e within a part definition. They can be added as standard\npackages for the chosen build environment, such as \u003cem\u003edeb\u003c/em\u003e packages for Ubuntu, or as a cross-platform snap using the following \u003cem\u003esnapcraft.yaml\u003c/em\u003e keywords:\u003c/p\u003e\n\u003cp\u003eFor packages:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ccode\u003ebuild-packages\u003c/code\u003e: packages required for the part to build\u003c/li\u003e\n\u003cli\u003e\n\u003ccode\u003estage-packages\u003c/code\u003e: packages required to run the part\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eFor snaps:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ccode\u003ebuild-snaps\u003c/code\u003e: snaps required for the part to build.\u003c/li\u003e\n\u003cli\u003e\n\u003ccode\u003estage-snaps\u003c/code\u003e: snaps required to run the part\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eThe following is a typical example of a part’s \u003cem\u003ebuild-\u003c/em\u003e and \u003cem\u003estage-\u003c/em\u003e sections for a command tool line that interacts with \u003cem\u003egit\u003c/em\u003e:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-yaml\"\u003ebuild-packages:\n  - pkg-config\n  - libreadline-dev\n  - libncurses5-dev\nbuild-snaps:\n  - go\nstage-snaps:\n  - ffmpeg/latest/edge\nstage-packages:\n  - git\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eSnaps are downloaded from the \u003ca href=\"https://snapcraft.io/store\"\u003eSnap Store\u003c/a\u003e and unpacked into the snap being built.\u003c/p\u003e\n\u003cp\u003eFor staged snaps, the \u003ccode\u003emeta\u003c/code\u003e and \u003ccode\u003esnap\u003c/code\u003e directories from the snap will be available as \u003ccode\u003emeta.\u0026lt;snap-name\u0026gt;\u003c/code\u003e and \u003ccode\u003esnap.\u0026lt;snap-name\u0026gt;\u003c/code\u003e for cases where assets from those locations are desired for reuse.\u003c/p\u003e\n\u003cdiv class=\"p-notification--positive\"\u003e\n\u003cp class=\"p-notification__response\"\u003e\n\u003cspan class=\"p-notification__status\"\u003e\nAdding additional repositories: \u003c/span\u003e\n\nSee \u003ca href=\"https://forum.snapcraft.io/t/snapcraft-package-repositories/15475\"\u003eSnapcraft package repositories\u003c/a\u003e for details on how  to add \u003cem\u003eapt\u003c/em\u003e repositories as sources for \u003ccode\u003ebuild-packages\u003c/code\u003e and \u003ccode\u003estage-packages\u003c/code\u003e, including those hosted on a PPA.\n\u003c/p\u003e\n\u003c/div\u003e\n\u003ch2 id=\"heading--package-names\"\u003ePackage and snap names\u003c/h2\u003e\n\u003cp\u003ePackage dependencies are listed as package names for the snap’s build environment.\u003c/p\u003e\n\u003cp\u003eFor a default \u003ca href=\"/t/snapcraft-overview/8940\"\u003eSnapcraft\u003c/a\u003e installation running \u003ca href=\"https://multipass.run/\"\u003eMultipass\u003c/a\u003e or \u003ca href=\"https://linuxcontainers.org/lxd/introduction/\"\u003eLXD\u003c/a\u003e, see \u003ca href=\"/t/build-options/14250\"\u003eBuild options\u003c/a\u003e for further details, the build environment is dependent on whatever \u003ca href=\"/t/base-snaps/11198\"\u003ebase snap\u003c/a\u003e is being used, usually either \u003ca href=\"http://releases.ubuntu.com/20.04/\"\u003eUbuntu 20.04 LTS\u003c/a\u003e (Focal Fossa) or \u003ca href=\"http://releases.ubuntu.com/18.04/\"\u003eUbuntu 18.04 LTS\u003c/a\u003e (Bionic Beaver). Consequently, dependencies are listed using their respective \u003cem\u003eapt\u003c/em\u003e package names.\u003c/p\u003e\n\u003cp\u003eIt’s also feasible to have a build environment built on Fedora for example, using Fedora packages, or those of your own host environment.\u003c/p\u003e\n\u003cp\u003eThe required packages are likely to be identical to those needed to either build the project (\u003ccode\u003ebuild-packages\u003c/code\u003e) or install your project (\u003ccode\u003estage-packages\u003c/code\u003e) natively. You’ll often find them listed in a project’s README.md, or alongside any build instructions.\u003c/p\u003e\n\u003cp\u003eSnap names are identical to the names used to install the snap outside of the build environment, and those listed by the \u003ca href=\"https://snapcraft.io/store\"\u003eSnap Store\u003c/a\u003e.  If a specific channel is required, the syntax is of the form \u003ccode\u003e\u0026lt;snap-name\u0026gt;/\u0026lt;channel\u0026gt;\u003c/code\u003e (see \u003ca href=\"/t/channels/551\"\u003eChannels\u003c/a\u003e for more details on the syntax).\u003c/p\u003e\n\u003ch2 id=\"heading--missing\"\u003eIdentifying missing packages\u003c/h2\u003e\n\u003cp\u003eWorking out your project’s dependencies can be an iterative process, much like compiling a third-party package, with the process split into identifying the dependencies a snap needs to be built, and those required for running the resultant application.\u003c/p\u003e\n\u003ch3 id=\"heading--missing-building\"\u003eBuilding\u003c/h3\u003e\n\u003col\u003e\n\u003cli\u003ewhen you have a workable framework \u003cem\u003esnapcraft.yaml\u003c/em\u003e for your snap, run \u003ccode\u003esnapcraft --debug\u003c/code\u003e until you hit an error\u003c/li\u003e\n\u003cli\u003eIf that error is a build dependency, use the \u003cem\u003edebug\u003c/em\u003e interactive shell to work out which package is required\u003c/li\u003e\n\u003cli\u003eadd the package to your \u003cem\u003esnapcraft.yaml\u003c/em\u003e and type \u003cem\u003esnapcraft\u003c/em\u003e within the build environment to see if you have the same error\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eA typical missing build dependency may generate an error similar to the following:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003econfigure: error: can't find the Boehm GC library.  Please install it.\nFailed to run 'override-build': Exit code was 1.\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eIn most cases, the error will provide some indication of what needs to be installed. To resolve the error in the above example output, for instance, the Boehm GC library ( libgc) will need to be installed, and because this is the building stage, so too will its header package (libgc-dev).\u003c/p\u003e\n\u003cp\u003eIf the package is unknown, it’s correct name can normally be found with a search from within the build environment, or via a search engine.\u003c/p\u003e\n\u003ch3 id=\"heading--missing-staging\"\u003eStaging\u003c/h3\u003e\n\u003cp\u003eAfter a snap has been successfully built, if snapcraft detects that the resultant executable will require further packages, it will attempt to guess these and output a list that can be copied and pasted into the snapcraft.yaml. The output will look similar to the following:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003eThe 'example' part is missing libraries that are not included in the snap or base. They can be satisfied by adding the following entries to the existing stage-packages for this part:\n- libxext6\n- libxft2\n- libxrender1\n- libxss1\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eTo resolve the issue, copy the output list into the staging section of the referenced part.\u003c/p\u003e\n\u003cp\u003eAnother common problem is that even after snapcraft has successfully built a snap, running its executable will result in an error. The reasons for these errors are varied, but the most common is a missing library, as shown in the following example output:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e/snap/mysnap/current/bin/mybin: error while loading shared libraries: libpaho-mqtt3a.so.1: cannot open shared object file: No such file or directory\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThe following are the most common solutions for these kind of errors:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eThe required library might not be installed by the snap.\n\u003cul\u003e\n\u003cli\u003eAdd the missing package to the part’s stage-packages.\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eThe snap app’s LD_LIBRARY_PATH var might not include the path to the missing library.\n\u003cul\u003e\n\u003cli\u003eUpdate/add LD_LIBRARY_PATH environment var in snapcraft.yaml. The following, for example, adds \u003ccode\u003e$SNAP/usr/lib\u003c/code\u003e:\u003cpre\u003e\u003ccode class=\"lang-yaml\"\u003eapps:\nexample-app:\n [...]\n environment:\n    LD_LIBRARY_PATH: $LD_LIBRARY_PATH:$SNAP/usr/lib\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eThe missing library might be installed by another snap and shared to this snap by a \u003ca href=\"/t/the-content-interface/1074\"\u003econtent interface\u003c/a\u003e, but the content interface is not connected.\n\u003cul\u003e\n\u003cli\u003eConnect the snapd interface (manually for testing, or automatically for production).\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"heading--filtering\"\u003eRemoving stage package duplication\u003c/h2\u003e\n\u003cp\u003eSnapcraft minimises the size of a target snap by filtering out stage-package dependencies, if they are available in the base, e.g. core18.\u003c/p\u003e\n\u003cp\u003eIn some cases, it may be desirable to stage a package’s dependencies inside the snap, avoiding the use of the package available in the base snap. It could be that you require a more recent package to be installed, for example. To do this, explicitly add each desired package to \u003ccode\u003estage-packages\u003c/code\u003e list - Snapcraft will \u003cem\u003ealways\u003c/em\u003e stage any package explicitly listed.\u003c/p\u003e\n\u003cp\u003eTo find the list of packages that are available in the base snap, you may find the manifest at:\n\u003ccode\u003e/snap/\u0026lt;base\u0026gt;/current/usr/share/snappy/dpkg.list\u003c/code\u003e\u003c/p\u003e","post_number":1,"post_type":1,"updated_at":"2022-01-18T18:03:38.618Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":689,"reads":95,"readers_count":94,"score":3419.0,"yours":false,"topic_id":11451,"topic_slug":"build-and-staging-dependencies","display_username":"Graham Morrison","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":12,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://forum.snapcraft.io/t/iterating-over-a-build/12143","internal":true,"reflection":false,"title":"Iterating over a build","clicks":7},{"url":"https://snapcraft.io/store","internal":false,"reflection":false,"title":"Install Linux apps using the Snap Store | Snapcraft","clicks":3},{"url":"https://forum.snapcraft.io/t/the-snapcraft-format/8337","internal":true,"reflection":false,"title":"The snapcraft.yaml schema","clicks":3},{"url":"https://forum.snapcraft.io/t/snapcraft-overview/8940","internal":true,"reflection":false,"title":"Snapcraft overview","clicks":2},{"url":"https://forum.snapcraft.io/t/build-options/14250","internal":true,"reflection":false,"title":"Build options","clicks":2},{"url":"https://multipass.run/","internal":false,"reflection":false,"title":"Multipass - Orchestrates virtual Ubuntu instances","clicks":2},{"url":"https://forum.snapcraft.io/t/channels/551","internal":true,"reflection":false,"title":"Channels","clicks":1},{"url":"http://releases.ubuntu.com/20.04/","internal":false,"reflection":false,"title":"Ubuntu 20.04.3 LTS (Focal Fossa)","clicks":0},{"url":"https://forum.snapcraft.io/t/base-snaps/11198","internal":true,"reflection":false,"title":"Base snaps","clicks":0},{"url":"http://releases.ubuntu.com/18.04/","internal":false,"reflection":false,"title":"Ubuntu 18.04.2 LTS (Bionic Beaver)","clicks":0},{"url":"https://linuxcontainers.org/lxd/introduction/","internal":false,"reflection":false,"clicks":0},{"url":"https://forum.snapcraft.io/t/the-content-interface/1074","internal":true,"reflection":false,"title":"The content interface","clicks":0},{"url":"https://forum.snapcraft.io/t/snapcraft-package-repositories/15475","internal":true,"reflection":true,"title":"Snapcraft package repositories","clicks":10},{"url":"https://forum.snapcraft.io/t/adding-parts/11473","internal":true,"reflection":true,"title":"Adding parts","clicks":6},{"url":"https://forum.snapcraft.io/t/troubleshoot-snap-building/11938","internal":true,"reflection":true,"title":"Troubleshoot snap building","clicks":5},{"url":"https://forum.snapcraft.io/t/debugging-building-snaps/6274","internal":true,"reflection":true,"title":"Debugging building snaps","clicks":0},{"url":"https://forum.snapcraft.io/t/snapcraft-build-debug-and-publishing-docs-roadmap-page-breakdown/10366","internal":true,"reflection":true,"title":"Snapcraft build, debug and publishing docs roadmap (page breakdown)","clicks":0},{"url":"https://forum.snapcraft.io/t/creating-snapcraft-yaml/11666","internal":true,"reflection":true,"title":"Creating snapcraft.yaml","clicks":0},{"url":"https://forum.snapcraft.io/t/migrating-between-bases/23455","internal":true,"reflection":true,"title":"Migrating between bases","clicks":0},{"url":"https://forum.snapcraft.io/t/the-go-plugin/8505","internal":true,"reflection":true,"title":"The go plugin","clicks":0},{"url":"https://forum.snapcraft.io/t/library-linter/32229","internal":true,"reflection":true,"title":"Library linter","clicks":0},{"url":"https://forum.snapcraft.io/t/release-notes-snapcraft-4-7/24252","internal":true,"reflection":true,"title":"Release notes: Snapcraft 4.7","clicks":0},{"url":"https://forum.snapcraft.io/t/snap-documentation/11127","internal":true,"reflection":true,"title":"Snap documentation","clicks":0}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":true,"admin":true,"staff":true,"user_id":2772,"hidden":false,"trust_level":4,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":true,"last_wiki_edit":"2022-01-18T18:03:38.647Z","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":66266,"name":"Michael Hudson-Doyle","username":"mwhudson","avatar_template":"/user_avatar/forum.snapcraft.io/mwhudson/{size}/4551_2.png","created_at":"2020-04-02T09:31:08.309Z","cooked":"\u003cp\u003eSo I hear on IRC that stage-packages supports a syntax like this:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003estage-packages:\n   - on amd64, arm64\n       - efibootmgr\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003ebut I can’t find any documentation for it. Am I missing anything?\u003c/p\u003e","post_number":2,"post_type":1,"updated_at":"2020-04-02T09:31:26.817Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":5,"reads":48,"readers_count":47,"score":39.6,"yours":false,"topic_id":11451,"topic_slug":"build-and-staging-dependencies","display_username":"Michael Hudson-Doyle","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":30,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":66268,"name":"Graham Morrison","username":"degville","avatar_template":"/user_avatar/forum.snapcraft.io/degville/{size}/2021_2.png","created_at":"2020-04-02T09:33:18.004Z","cooked":"\u003cp\u003eThanks for flagging this - I saw your discussion on IRC, and you’re right; we’ve not written about this. I’ll check with the snapcraft team and add the syntax to the docs.\u003c/p\u003e","post_number":3,"post_type":1,"updated_at":"2020-04-02T09:33:18.004Z","reply_count":1,"reply_to_post_number":2,"quote_count":0,"incoming_link_count":1,"reads":43,"readers_count":42,"score":18.6,"yours":false,"topic_id":11451,"topic_slug":"build-and-staging-dependencies","display_username":"Graham Morrison","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"mwhudson","avatar_template":"/user_avatar/forum.snapcraft.io/mwhudson/{size}/4551_2.png"},"bookmarked":false,"actions_summary":[],"moderator":true,"admin":true,"staff":true,"user_id":2772,"hidden":false,"trust_level":4,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":66269,"name":"Michael Hudson-Doyle","username":"mwhudson","avatar_template":"/user_avatar/forum.snapcraft.io/mwhudson/{size}/4551_2.png","created_at":"2020-04-02T09:47:16.001Z","cooked":"\u003cp\u003eI found some docs at \u003ca href=\"https://snapcraft.io/docs/snapcraft-advanced-grammar\" rel=\"noopener nofollow ugc\"\u003ehttps://snapcraft.io/docs/snapcraft-advanced-grammar\u003c/a\u003e\u003c/p\u003e","post_number":4,"post_type":1,"updated_at":"2020-04-02T09:47:16.001Z","reply_count":0,"reply_to_post_number":3,"quote_count":0,"incoming_link_count":4,"reads":40,"readers_count":39,"score":28.0,"yours":false,"topic_id":11451,"topic_slug":"build-and-staging-dependencies","display_username":"Michael Hudson-Doyle","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://snapcraft.io/docs/snapcraft-advanced-grammar","internal":false,"reflection":false,"clicks":32}],"read":true,"user_title":null,"reply_to_user":{"username":"degville","avatar_template":"/user_avatar/forum.snapcraft.io/degville/{size}/2021_2.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":30,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":104519,"name":"Robert P. J. Day","username":"rpjday","avatar_template":"/user_avatar/forum.snapcraft.io/rpjday/{size}/8457_2.png","created_at":"2022-01-17T11:36:51.724Z","cooked":"\u003cp\u003eGrammar: “… or as as cross-platform snap …”\u003c/p\u003e\n\u003cp\u003eI would also be slightly more verbose: “Build dependencies are required for your part to successfully build or compile [on your development host], while staging dependencies are required for your snap to run [on the target].”  I realize the additions might seem trivially redundant, but I wouldn’t take these things for granted. But that’s your call.\u003c/p\u003e\n\u003cp\u003eAs for this metadata:\u003c/p\u003e\n\u003cp\u003e\"stage-packages:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003egit\"\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eI just want to clarify that that means that “git” will be installed via a .deb package in the snap, correct?\u003c/p\u003e\n\u003cp\u003eFinally, this:\u003c/p\u003e\n\u003cp\u003e“In some cases, it may be desirable to stage a package’s dependencies inside the snap, avoiding the use of the package available in the base snap.”\u003c/p\u003e\n\u003cp\u003eBut why? If a given package is already part of the base snap, what are the reasons that one would want to override that? I’m not disagreeing, just wondering if it’s worth describing some of those reasons for the reader.\u003c/p\u003e","post_number":5,"post_type":1,"updated_at":"2022-01-17T11:36:51.724Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":1,"reads":19,"readers_count":18,"score":53.8,"yours":false,"topic_id":11451,"topic_slug":"build-and-staging-dependencies","display_username":"Robert P. J. Day","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"","bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":11710,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":104559,"name":"Robert P. J. Day","username":"rpjday","avatar_template":"/user_avatar/forum.snapcraft.io/rpjday/{size}/8457_2.png","created_at":"2022-01-18T11:58:54.282Z","cooked":"\u003cp\u003eIn the “Staging” section, this is listed as a common error – the lack of a shared library:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e/snap/mysnap/current/bin/mybin: error while loading shared libraries: libpaho-mqtt3a.so.1: cannot open shared object file: No such file or directory\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eBut if you’re running the executable via its /snap/mysnap/… location, doesn’t this mean you’re running it from the build host? Why should that shared lib be necessary on the build host; you really want it to be installed in the snap, no? I’m just not sure what error is being explained here.\u003c/p\u003e","post_number":6,"post_type":1,"updated_at":"2022-01-18T11:58:54.282Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":16,"readers_count":15,"score":3.2,"yours":false,"topic_id":11451,"topic_slug":"build-and-staging-dependencies","display_username":"Robert P. J. Day","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"","bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":11710,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":104561,"name":"Robert P. J. Day","username":"rpjday","avatar_template":"/user_avatar/forum.snapcraft.io/rpjday/{size}/8457_2.png","created_at":"2022-01-18T12:06:38.771Z","cooked":"\u003cp\u003eFrom “Package types”:\u003c/p\u003e\n\u003cp\u003e“They can be added as standard packages for the chosen build environment, such as \u003cem\u003edeb\u003c/em\u003e packages for Ubuntu, …”\u003c/p\u003e\n\u003cp\u003eBut can you set up a build environment on, say, Fedora? If so, what happens when the same package has a different .rpm name from its corresponding .deb name? How do you list its package name dependency?\u003c/p\u003e","post_number":7,"post_type":1,"updated_at":"2022-01-18T12:06:38.771Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":1,"reads":16,"readers_count":15,"score":8.2,"yours":false,"topic_id":11451,"topic_slug":"build-and-staging-dependencies","display_username":"Robert P. J. Day","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"","bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":11710,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":110749,"name":"Robert P. J. Day","username":"rpjday","avatar_template":"/user_avatar/forum.snapcraft.io/rpjday/{size}/8457_2.png","created_at":"2022-06-16T11:51:23.248Z","cooked":"\u003cp\u003eIt seems that this page doesn’t clarify a basic issue – does “stage-packages” automatically stage a package’s run-time dependencies? Or do you need to do that explicitly? I see that one can explicitly list a package in “stage-packages” even if it’s already in the base snap if you want to pull in a newer version for some reason, but that doesn’t answer the first question.\u003c/p\u003e","post_number":8,"post_type":1,"updated_at":"2022-06-16T11:51:23.248Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":13,"readers_count":12,"score":2.6,"yours":false,"topic_id":11451,"topic_slug":"build-and-staging-dependencies","display_username":"Robert P. J. Day","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"","bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":11710,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false}],"stream":[49001,66266,66268,66269,104519,104559,104561,110749]},"timeline_lookup":[[1,1487],[2,1170],[5,515],[6,514],[8,365]],"suggested_topics":[{"id":30848,"title":"Snap Tutorials","fancy_title":"Snap Tutorials","slug":"snap-tutorials","posts_count":1,"reply_count":0,"highest_post_number":1,"image_url":null,"created_at":"2022-07-12T10:04:41.667Z","last_posted_at":"2022-07-12T10:04:41.817Z","bumped":true,"bumped_at":"2023-03-31T17:48:24.106Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags":[],"like_count":0,"views":1682,"category_id":15,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest single","description":"Original Poster, Most Recent Poster","user":{"id":2772,"username":"degville","name":"Graham Morrison","avatar_template":"/user_avatar/forum.snapcraft.io/degville/{size}/2021_2.png"}}]},{"id":33017,"title":"How Snapcraft builds snaps","fancy_title":"How Snapcraft builds snaps","slug":"how-snapcraft-builds-snaps","posts_count":6,"reply_count":2,"highest_post_number":6,"image_url":null,"created_at":"2022-12-09T16:57:58.963Z","last_posted_at":"2023-06-08T09:25:04.178Z","bumped":true,"bumped_at":"2023-06-08T09:25:04.178Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags":[],"like_count":3,"views":852,"category_id":15,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":2772,"username":"degville","name":"Graham Morrison","avatar_template":"/user_avatar/forum.snapcraft.io/degville/{size}/2021_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":11710,"username":"rpjday","name":"Robert P. J. Day","avatar_template":"/user_avatar/forum.snapcraft.io/rpjday/{size}/8457_2.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":1755,"username":"lonroth","name":"Erik Lönroth","avatar_template":"/user_avatar/forum.snapcraft.io/lonroth/{size}/4894_2.png"}}]},{"id":33076,"title":"Intermediate snapcraft.yaml example","fancy_title":"Intermediate snapcraft.yaml example","slug":"intermediate-snapcraft-yaml-example","posts_count":2,"reply_count":0,"highest_post_number":2,"image_url":null,"created_at":"2022-12-13T12:33:36.674Z","last_posted_at":"2022-12-15T10:46:41.984Z","bumped":true,"bumped_at":"2022-12-13T12:33:36.830Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags":[],"like_count":0,"views":813,"category_id":15,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest single","description":"Original Poster, Most Recent Poster","user":{"id":2772,"username":"degville","name":"Graham Morrison","avatar_template":"/user_avatar/forum.snapcraft.io/degville/{size}/2021_2.png"}}]},{"id":30851,"title":"Snap How-to guides","fancy_title":"Snap How-to guides","slug":"snap-how-to-guides","posts_count":1,"reply_count":0,"highest_post_number":1,"image_url":null,"created_at":"2022-07-12T10:45:54.942Z","last_posted_at":"2022-07-12T10:45:55.061Z","bumped":true,"bumped_at":"2022-07-12T10:45:55.061Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags":[],"like_count":0,"views":1546,"category_id":15,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest single","description":"Original Poster, Most Recent Poster","user":{"id":2772,"username":"degville","name":"Graham Morrison","avatar_template":"/user_avatar/forum.snapcraft.io/degville/{size}/2021_2.png"}}]},{"id":34416,"title":"How to guides for classic confinement","fancy_title":"How to guides for classic confinement","slug":"how-to-guides-for-classic-confinement","posts_count":3,"reply_count":1,"highest_post_number":3,"image_url":null,"created_at":"2023-03-21T09:34:37.128Z","last_posted_at":"2023-03-21T09:50:37.844Z","bumped":true,"bumped_at":"2023-03-21T09:50:37.844Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags":["how-to"],"like_count":0,"views":461,"category_id":15,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":14015,"username":"dboddie","name":"David Boddie","avatar_template":"/user_avatar/forum.snapcraft.io/dboddie/{size}/9564_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":2772,"username":"degville","name":"Graham Morrison","avatar_template":"/user_avatar/forum.snapcraft.io/degville/{size}/2021_2.png"}}]}],"tags":[],"id":11451,"title":"Build and staging dependencies","fancy_title":"Build and staging dependencies","posts_count":8,"created_at":"2019-05-21T12:59:54.279Z","views":8582,"reply_count":2,"like_count":2,"last_posted_at":"2022-06-16T11:51:23.248Z","visible":true,"closed":false,"archived":false,"has_summary":false,"archetype":"regular","slug":"build-and-staging-dependencies","category_id":15,"word_count":1691,"deleted_at":null,"user_id":2772,"featured_link":null,"pinned_globally":false,"pinned_at":null,"pinned_until":null,"image_url":null,"slow_mode_seconds":0,"draft":null,"draft_key":"topic_11451","draft_sequence":null,"unpinned":null,"pinned":false,"current_post_number":1,"highest_post_number":8,"deleted_by":null,"actions_summary":[{"id":4,"count":0,"hidden":false,"can_act":false},{"id":8,"count":0,"hidden":false,"can_act":false},{"id":7,"count":0,"hidden":false,"can_act":false}],"chunk_size":20,"bookmarked":false,"topic_timer":null,"message_bus_last_id":0,"participant_count":3,"show_read_indicator":false,"thumbnails":null,"details":{"notification_level":1,"participants":[{"id":11710,"username":"rpjday","name":"Robert P. J. Day","avatar_template":"/user_avatar/forum.snapcraft.io/rpjday/{size}/8457_2.png","post_count":4,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null},{"id":30,"username":"mwhudson","name":"Michael Hudson-Doyle","avatar_template":"/user_avatar/forum.snapcraft.io/mwhudson/{size}/4551_2.png","post_count":2,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null},{"id":2772,"username":"degville","name":"Graham Morrison","avatar_template":"/user_avatar/forum.snapcraft.io/degville/{size}/2021_2.png","post_count":2,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null}],"created_by":{"id":2772,"username":"degville","name":"Graham Morrison","avatar_template":"/user_avatar/forum.snapcraft.io/degville/{size}/2021_2.png"},"last_poster":{"id":11710,"username":"rpjday","name":"Robert P. J. Day","avatar_template":"/user_avatar/forum.snapcraft.io/rpjday/{size}/8457_2.png"},"links":[{"url":"https://snapcraft.io/docs/snapcraft-advanced-grammar","title":null,"internal":false,"attachment":false,"reflection":false,"clicks":32,"user_id":30,"domain":"snapcraft.io","root_domain":"snapcraft.io"},{"url":"https://forum.snapcraft.io/t/snapcraft-package-repositories/15475","title":"Snapcraft package repositories","internal":true,"attachment":false,"reflection":true,"clicks":10,"user_id":2772,"domain":"forum.snapcraft.io","root_domain":"snapcraft.io"},{"url":"https://forum.snapcraft.io/t/iterating-over-a-build/12143","title":"Iterating over a build","internal":true,"attachment":false,"reflection":false,"clicks":7,"user_id":2772,"domain":"forum.snapcraft.io","root_domain":"snapcraft.io"},{"url":"https://forum.snapcraft.io/t/adding-parts/11473","title":"Adding parts","internal":true,"attachment":false,"reflection":true,"clicks":6,"user_id":2772,"domain":"forum.snapcraft.io","root_domain":"snapcraft.io"},{"url":"https://forum.snapcraft.io/t/troubleshoot-snap-building/11938","title":"Troubleshoot snap building","internal":true,"attachment":false,"reflection":true,"clicks":5,"user_id":2772,"domain":"forum.snapcraft.io","root_domain":"snapcraft.io"},{"url":"https://forum.snapcraft.io/t/the-snapcraft-format/8337","title":"The snapcraft.yaml schema","internal":true,"attachment":false,"reflection":false,"clicks":3,"user_id":2772,"domain":"forum.snapcraft.io","root_domain":"snapcraft.io"},{"url":"https://snapcraft.io/store","title":"Install Linux apps using the Snap Store | Snapcraft","internal":false,"attachment":false,"reflection":false,"clicks":3,"user_id":2772,"domain":"snapcraft.io","root_domain":"snapcraft.io"},{"url":"https://forum.snapcraft.io/t/snapcraft-overview/8940","title":"Snapcraft overview","internal":true,"attachment":false,"reflection":false,"clicks":2,"user_id":2772,"domain":"forum.snapcraft.io","root_domain":"snapcraft.io"},{"url":"https://multipass.run/","title":"Multipass - Orchestrates virtual Ubuntu instances","internal":false,"attachment":false,"reflection":false,"clicks":2,"user_id":2772,"domain":"multipass.run","root_domain":"multipass.run"},{"url":"https://forum.snapcraft.io/t/build-options/14250","title":"Build options","internal":true,"attachment":false,"reflection":false,"clicks":2,"user_id":2772,"domain":"forum.snapcraft.io","root_domain":"snapcraft.io"},{"url":"https://forum.snapcraft.io/t/channels/551","title":"Channels","internal":true,"attachment":false,"reflection":false,"clicks":1,"user_id":2772,"domain":"forum.snapcraft.io","root_domain":"snapcraft.io"}]}}