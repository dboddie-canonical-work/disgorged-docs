{"post_stream":{"posts":[{"id":35496,"name":"Graham Morrison","username":"degville","avatar_template":"/user_avatar/forum.snapcraft.io/degville/{size}/2021_2.png","created_at":"2018-10-11T11:15:37.960Z","cooked":"\u003cp\u003e\u003ccode\u003egpio\u003c/code\u003e allows access to a specific GPIO pin. The interface is restricted because it provides privileged access to GPIO hardware.\u003c/p\u003e\n\u003cp\u003eUse  \u003ccode\u003esnap interface gpio\u003c/code\u003e to see which gpio devices are available on the system:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-bash\"\u003e$ snap interface gpio\nname:    gpio\nsummary: allows access to specifc GPIO pin\nslots:\n  - pi:bcm-gpio-0\n  - pi:bcm-gpio-1\n  - pi:bcm-gpio-10\n[...]\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2 id=\"heading--example\"\u003eExample\u003c/h2\u003e\n\u003cp\u003eThe \u003ca href=\"https://snapcraft.io/pi-fancontrol\"\u003epi-fancontrol\u003c/a\u003e snap provides simple fan control on a Raspberry Pi with a fan connected to GPIO 14 (pin 8). With the snap installed, the following command will connect the interface to the pin:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-bash\"\u003esnap connect pi-fancontrol:gpio pi:bcm-gpio-14\n\u003c/code\u003e\u003c/pre\u003e\n\u003cdiv class=\"p-notification--positive\"\u003e\n\u003cdiv class=\"p-notification__response\"\u003e\n\u003cspan class=\"p-notification__status\"\u003e\nInterface documentation: \u003c/span\u003e\n\u003cp\u003eSee \u003ca href=\"/t/interface-management/6154\"\u003eInterface management\u003c/a\u003e and \u003ca href=\"/t/supported-interfaces/7744\"\u003eSupported interfaces\u003c/a\u003e for further details on how interfaces are used.\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003chr\u003e\n\u003ch2 id=\"heading--dev-details\"\u003eDeveloper details \u003c/h2\u003e\n\u003cp\u003e\u003cstrong\u003eAuto-connect\u003c/strong\u003e: no\u003cbr\u003e\n\u003cstrong\u003eAttributes\u003c/strong\u003e:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ccode\u003enumber\u003c/code\u003e (slot): GPIO pin number to export and expose to consuming snaps\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003ca href=\"/t/hardware-io-interfaces/35421\"\u003eHardware IO interfaces\u003c/a\u003e covers some general considerations common to these kinds of devices.\u003c/p\u003e\n\u003cp\u003eTo use a gpio device, the snap developer must add \u003ccode\u003eplugs: [ gpio ]\u003c/code\u003e to a snap’s \u003ca href=\"/t/the-snapcraft-format/8337\"\u003esnapcraft.yaml\u003c/a\u003e. The snap user can then access a specific gpio device with an \u003ca href=\"/t/interface-management/6154#heading--manual-connections\"\u003einterface connection\u003c/a\u003e.\u003c/p\u003e\n\u003cp\u003eUnless the snap is expected to actually use a set of gpio pins that is not predefined,  it is recommended to define distinct plugs for each used gpio pin, like:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-yaml\"\u003eplugs:\n  activity-led:\n    interface: gpio\n  warning-led:\n    interface: gpio\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThis has the advantage of being self-documenting and 1-1  connections like these are easier to track and setup with \u003ca href=\"/t/the-interface-auto-connection-mechanism/20179\"\u003eauto-connections\u003c/a\u003e, if the latter is needed.\u003c/p\u003e\n\u003cp\u003eWhen the interface is connected, \u003ccode\u003e\"echo (pin number) \u0026gt; /sys/class/gpio/export\"\u003c/code\u003e  is run internally to enable access to the GPIO pin.\u003c/p\u003e\n\u003cp\u003eOnce connected, the consuming snap can use the device via \u003ccode\u003e/sys/class/gpio/gpioN\u003c/code\u003e where \u003ccode\u003eN\u003c/code\u003e is the pin number specified by the connected slot.\u003c/p\u003e\n\u003cp\u003eFinally, when the interface is disconnected,  \u003ccode\u003e\"echo (pin number) \u0026gt; /sys/class/gpio/unexport\"\u003c/code\u003e  is run internally to disable access to the GPIO pin.\u003c/p\u003e\n\u003ch3\u003eCode examples\u003c/h3\u003e\n\u003cp\u003eThe hook and control scripts for \u003cem\u003epi-fancontrol\u003c/em\u003e can be found in the project’s GitHub repository: \u003ca href=\"https://github.com/ogra1/pi-fancontrol-snap\"\u003ehttps://github.com/ogra1/pi-fancontrol-snap\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eThe source code for the GPIO interface is in the \u003cem\u003esnapd\u003c/em\u003e repository: \u003ca href=\"https://github.com/snapcore/snapd/blob/master/interfaces/builtin/gpio.go\"\u003ehttps://github.com/snapcore/snapd/blob/master/interfaces/builtin/gpio.go\u003c/a\u003e.\u003c/p\u003e","post_number":1,"post_type":1,"updated_at":"2023-05-31T16:30:42.971Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":931,"reads":60,"readers_count":59,"score":4682.0,"yours":false,"topic_id":7829,"topic_slug":"the-gpio-interface","display_username":"Graham Morrison","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":17,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://github.com/ogra1/pi-fancontrol-snap","internal":false,"reflection":false,"title":"GitHub - ogra1/pi-fancontrol-snap","clicks":20},{"url":"https://forum.snapcraft.io/t/interface-management/6154","internal":true,"reflection":false,"title":"Interface management","clicks":13},{"url":"https://github.com/snapcore/snapd/blob/master/interfaces/builtin/gpio.go","internal":false,"reflection":false,"title":"snapd/gpio.go at master · snapcore/snapd · GitHub","clicks":11},{"url":"https://snapcraft.io/pi-fancontrol","internal":false,"reflection":false,"title":"Install pi-fancontrol on Linux | Snap Store","clicks":8},{"url":"https://forum.snapcraft.io/t/supported-interfaces/7744","internal":true,"reflection":false,"title":"Supported interfaces","clicks":5},{"url":"https://forum.snapcraft.io/t/the-interface-auto-connection-mechanism/20179","internal":true,"reflection":false,"title":"The interface auto-connection mechanism","clicks":0},{"url":"https://forum.snapcraft.io/t/the-snapcraft-yaml-schema/8337","internal":true,"reflection":false,"title":"The snapcraft.yaml schema","clicks":0},{"url":"https://forum.snapcraft.io/t/the-gpio-control-interface/13037","internal":true,"reflection":true,"title":"The gpio-control interface","clicks":1},{"url":"https://forum.snapcraft.io/t/example-snippets-in-documentation/17937","internal":true,"reflection":true,"title":"Example snippets in documentation","clicks":0},{"url":"https://forum.snapcraft.io/t/snap-documentation/11127","internal":true,"reflection":true,"title":"Snap documentation","clicks":0},{"url":"https://forum.snapcraft.io/t/the-bool-file-interface/7803","internal":true,"reflection":true,"title":"The bool-file interface","clicks":0},{"url":"https://forum.snapcraft.io/t/hardware-io-interfaces/35421","internal":true,"reflection":true,"title":"Hardware IO interfaces","clicks":0}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":true,"admin":true,"staff":true,"user_id":2772,"hidden":false,"trust_level":4,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":true,"last_wiki_edit":"2023-05-31T16:30:42.991Z","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":42768,"name":"Tavish","username":"tavish","avatar_template":"/letter_avatar/tavish/{size}/5_6d6f4cde2641c35611d5cac2fb97c77e.png","created_at":"2019-02-08T11:13:40.742Z","cooked":"\u003cp\u003eHi, I’m having some issues using the gpio interface, not sure if I’m using it correctly.\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eSnaps that want to consume a gpio device simply plugs: [ gpio ] and the gpio device to connect is specified during interface connection\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eWhat does [ gpio] mean here? I have a sample snapcraft.yaml which used to work for me which had:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003eapps:\n  scan:\n    command: node $SNAP/lib/node_modules/something/something.js\n    daemon: simple\n    plugs:\n      - network\n      - gpio-30\n      - gpio-31\n      - gpio-117\n      - gpio-118\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eHowever this doesn’t seem to work. The code is unable to access the gpio pins:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e2019-02-08T10:09:19Z br-forklift.scan[31421]: /bin/sh: 1: cannot create /sys/class/gpio/gpio117/value: Permission denied\n2019-02-08T10:09:19Z br-forklift.scan[31421]: { Error: Command failed: echo 0 \u0026gt; /sys/class/gpio/gpio117/value\n2019-02-08T10:09:19Z br-forklift.scan[31421]: /bin/sh: 1: cannot create /sys/class/gpio/gpio117/value: Permission denied\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eIn the output of \u003ccode\u003esnap interfaces\u003c/code\u003e, the slot is showing as \u003ccode\u003e-\u003c/code\u003e for my application like:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e-                             br-forklift:gpio-117\n-                             br-forklift:gpio-118\n-                             br-forklift:gpio-30\n-                             br-forklift:gpio-31\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThis doesn’t seem right, though from the snapcraft file it looks correct. Any ideas to why this might be?\u003c/p\u003e\n\u003cp\u003eCan you please add a small sample in this doc to make it clear.\u003c/p\u003e","post_number":2,"post_type":1,"updated_at":"2019-02-08T11:15:57.604Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":14,"reads":48,"readers_count":47,"score":84.6,"yours":false,"topic_id":7829,"topic_slug":"the-gpio-interface","display_username":"Tavish","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":4122,"hidden":false,"trust_level":0,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":42781,"name":"Ian Johnson","username":"ijohnson","avatar_template":"/user_avatar/forum.snapcraft.io/ijohnson/{size}/2091_2.png","created_at":"2019-02-08T15:07:49.674Z","cooked":"\u003cp\u003eYou need to connect the gpio plugs to a gadget snap that slots those. For example, on the raspberry pi you would do\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003esnap connect br-forklift:gpio-117 pi:gpio-117\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e(not sure what gadget snap you’re using on this device)\u003c/p\u003e","post_number":3,"post_type":1,"updated_at":"2019-02-08T15:07:49.674Z","reply_count":0,"reply_to_post_number":2,"quote_count":0,"incoming_link_count":1,"reads":43,"readers_count":42,"score":13.6,"yours":false,"topic_id":7829,"topic_slug":"the-gpio-interface","display_username":"Ian Johnson","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"","reply_to_user":{"username":"tavish","avatar_template":"/letter_avatar/tavish/{size}/5_6d6f4cde2641c35611d5cac2fb97c77e.png"},"bookmarked":false,"actions_summary":[],"moderator":true,"admin":false,"staff":true,"user_id":2438,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":81388,"name":"David Sean","username":"dav","avatar_template":"/user_avatar/forum.snapcraft.io/dav/{size}/7509_2.png","created_at":"2020-10-28T16:01:47.668Z","cooked":"\u003cp\u003eI am also having trouble specifying specific pins with the \u003ccode\u003egpio\u003c/code\u003e plug.\u003cbr\u003e\nI am trying to use the \u003ccode\u003egpio-N\u003c/code\u003e plugs, following the example posted by \u003ca class=\"mention\" href=\"/u/tavish\"\u003e@tavish\u003c/a\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e  monitor:\n    command: bin/monitor\n    daemon: simple      \n    plugs:\n      - gpio-22 \n      - gpio-17 \n      - gpio-27 \n      - gpio-7 \n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eBut I get an error message when uploading to the snap store.\u003cbr\u003e\n\u003ccode\u003eunknown plugs interface name reference 'gpio-17' lint-snap-v2_app_plugs_plug_reference\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003eI am currently using \u003ccode\u003ecore20\u003c/code\u003e base with \u003ccode\u003edevmode\u003c/code\u003e confinement. The output of \u003ccode\u003esnap interfaces\u003c/code\u003e ouputs:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e:gpio-control              -\n:gpio-memory-control       -\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003ewhich suggests the \u003ccode\u003egpio\u003c/code\u003e interface  isn’t supported.\u003cbr\u003e\nThe output of \u003ccode\u003esnap connections --all\u003c/code\u003e doesn’t list anything related to gpio. I am building off a Raspberry Pi 4 running Ubuntu Server 20.04\u003c/p\u003e","post_number":4,"post_type":1,"updated_at":"2020-10-28T16:01:47.668Z","reply_count":2,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":32,"readers_count":31,"score":16.4,"yours":false,"topic_id":7829,"topic_slug":"the-gpio-interface","display_username":"David Sean","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":5924,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":81389,"name":"Ian Johnson","username":"ijohnson","avatar_template":"/user_avatar/forum.snapcraft.io/ijohnson/{size}/2091_2.png","created_at":"2020-10-28T16:26:47.202Z","cooked":"\u003caside class=\"quote no-group\" data-username=\"dav\" data-post=\"4\" data-topic=\"7829\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"20\" height=\"20\" src=\"https://forum.snapcraft.io/user_avatar/forum.snapcraft.io/dav/40/7509_2.png\" class=\"avatar\"\u003e dav:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cpre\u003e\u003ccode\u003e    plugs:\n      - gpio-22 \n      - gpio-17 \n      - gpio-27 \n      - gpio-7 \n\u003c/code\u003e\u003c/pre\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eWhen you are using the \u003ccode\u003eplug\u003c/code\u003e side, you just specify the interface name, so this would just be:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-yaml\"\u003eplugs:\n - gpio\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eand then when it comes time to connect after you have installed your snap, you would use:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003esnap connect your-snap:gpio the-gadget-snap:gpio-22\nsnap connect your-snap:gpio the-gadget-snap:gpio-17\n...\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003ewhere \u003ccode\u003ethe-gadget\u003c/code\u003e if you are on an Ubuntu Core Raspberry Pi image would be just \u003ccode\u003epi\u003c/code\u003e for example\u003c/p\u003e\n\u003caside class=\"quote no-group\" data-username=\"dav\" data-post=\"4\" data-topic=\"7829\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"20\" height=\"20\" src=\"https://forum.snapcraft.io/user_avatar/forum.snapcraft.io/dav/40/7509_2.png\" class=\"avatar\"\u003e dav:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eI am building off a Raspberry Pi 4 running Ubuntu Server 20.04\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eWe don’t currently have a gadget snap installed on classic Server images for the Raspberry Pi, you would need to use an Ubuntu Core image to get the gpio slots provided by a gadget snap as explained above. If you need to use the classic Server image, you will need to build your own (classic) gadget snap which exposes these interface slots.\u003c/p\u003e","post_number":5,"post_type":1,"updated_at":"2020-10-28T16:26:56.588Z","reply_count":3,"reply_to_post_number":4,"quote_count":1,"incoming_link_count":7,"reads":31,"readers_count":30,"score":56.2,"yours":false,"topic_id":7829,"topic_slug":"the-gpio-interface","display_username":"Ian Johnson","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"","bookmarked":false,"actions_summary":[],"moderator":true,"admin":false,"staff":true,"user_id":2438,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":81406,"name":"David Sean","username":"dav","avatar_template":"/user_avatar/forum.snapcraft.io/dav/{size}/7509_2.png","created_at":"2020-10-28T20:39:18.176Z","cooked":"\u003cp\u003eThanks. I do ultimately want to install this on a UbuntuCore, but would prefer to develop/test directly on UbuntuServer for simplicity.\u003cbr\u003e\nI’ll look into building a \u003ccode\u003edevmode\u003c/code\u003e gadget snap based on the \u003ca href=\"https://github.com/snapcore/pi-gadget\" rel=\"noopener nofollow ugc\"\u003e20-armhf\u003c/a\u003e branch.\u003c/p\u003e","post_number":6,"post_type":1,"updated_at":"2020-10-28T20:39:18.176Z","reply_count":0,"reply_to_post_number":5,"quote_count":0,"incoming_link_count":3,"reads":32,"readers_count":31,"score":21.4,"yours":false,"topic_id":7829,"topic_slug":"the-gpio-interface","display_username":"David Sean","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://github.com/snapcore/pi-gadget","internal":false,"reflection":false,"title":"GitHub - snapcore/pi-gadget: Universal pi (pi2,pi3,pi4,cm3) gadget snap for core18","clicks":2}],"read":true,"user_title":null,"reply_to_user":{"username":"ijohnson","avatar_template":"/user_avatar/forum.snapcraft.io/ijohnson/{size}/2091_2.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":5924,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":81457,"name":"David Sean","username":"dav","avatar_template":"/user_avatar/forum.snapcraft.io/dav/{size}/7509_2.png","created_at":"2020-10-29T17:39:07.425Z","cooked":"\u003cp\u003eWhen trying to install the pi gadget snap, the error\u003cbr\u003e\n\u003ccode\u003e- Mount snap \"pi\" (unset) (cannot install gadget snap on classic if not requested by the model)\u003c/code\u003e\u003cbr\u003e\nshows up. I think that’s what you referred to when you mentioned I needed to build my own classic gadget snap. But this still occurred after I’ve built the pi gadget snap (from the 20-arm64 branch), and changed the confinement to \u003ccode\u003eclassic\u003c/code\u003e in its \u003ccode\u003esnapcraft.yaml\u003c/code\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e$ sudo snap install pi_20-1_arm64.snap --classic --dangerous\nerror: cannot perform the following tasks:\n- Mount snap \"pi\" (unset) (cannot install gadget snap on classic if not requested by the model)\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eI think I misunderstand what’s meant by “classic requested by the model”. Can you share more details relating to building a classic-mode gadget?\u003c/p\u003e","post_number":7,"post_type":1,"updated_at":"2020-10-29T17:39:07.425Z","reply_count":1,"reply_to_post_number":5,"quote_count":0,"incoming_link_count":17,"reads":30,"readers_count":29,"score":96.0,"yours":false,"topic_id":7829,"topic_slug":"the-gpio-interface","display_username":"David Sean","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"ijohnson","avatar_template":"/user_avatar/forum.snapcraft.io/ijohnson/{size}/2091_2.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":5924,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":81458,"name":"Ian Johnson","username":"ijohnson","avatar_template":"/user_avatar/forum.snapcraft.io/ijohnson/{size}/2091_2.png","created_at":"2020-10-29T17:43:13.681Z","cooked":"\u003cp\u003eYou need to seed the image with a model assertion that references the classic gadget. You can see more information on building a model assertion at \u003ca href=\"https://core.docs.ubuntu.com/en/image/image-building\"\u003ehttps://core.docs.ubuntu.com/en/image/image-building\u003c/a\u003e. The things that will change is that you will not have a kernel snap, the model will be a classic one, and you will need to call \u003ccode\u003esnap prepare-image --classic\u003c/code\u003e manually (instead of using \u003ccode\u003eubuntu-image\u003c/code\u003e as explained in the docs). I think this all is sufficiently complicated to start a new forum post about it\u003c/p\u003e","post_number":8,"post_type":1,"updated_at":"2020-10-29T17:43:13.681Z","reply_count":0,"reply_to_post_number":7,"quote_count":0,"incoming_link_count":5,"reads":30,"readers_count":29,"score":46.0,"yours":false,"topic_id":7829,"topic_slug":"the-gpio-interface","display_username":"Ian Johnson","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://core.docs.ubuntu.com/en/image/image-building","internal":false,"reflection":false,"title":"Ubuntu IoT Developer Documentation | Ubuntu Core documentation","clicks":33}],"read":true,"user_title":"","reply_to_user":{"username":"dav","avatar_template":"/user_avatar/forum.snapcraft.io/dav/{size}/7509_2.png"},"bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":true,"admin":false,"staff":true,"user_id":2438,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":96293,"name":"Samuele Pedroni","username":"pedronis","avatar_template":"/user_avatar/forum.snapcraft.io/pedronis/{size}/46_2.png","created_at":"2021-07-21T08:52:56.266Z","cooked":"\u003caside class=\"quote no-group quote-modified\" data-username=\"ijohnson\" data-post=\"5\" data-topic=\"7829\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"20\" height=\"20\" src=\"https://forum.snapcraft.io/user_avatar/forum.snapcraft.io/ijohnson/40/2091_2.png\" class=\"avatar\"\u003e ijohnson:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003caside class=\"quote no-group quote-modified\" data-username=\"dav\" data-post=\"4\" data-topic=\"7829\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"20\" height=\"20\" src=\"https://forum.snapcraft.io/user_avatar/forum.snapcraft.io/dav/40/7509_2.png\" class=\"avatar\"\u003e dav:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cpre\u003e\u003ccode\u003e\u0026gt;     plugs:\n      - gpio-22 \n      - gpio-17 \n      - gpio-27 \n      - gpio-7 \n\u0026gt; ```\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eWhen you are using the \u003ccode\u003eplug\u003c/code\u003e side, you just specify the interface name, so this would just be:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003eplugs:\n - gpio\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eAs discussed now in the documentation this is not very self-documenting though, so the recommended approach is possibly to have:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003eplugs:\n  gpio-22:\n    interface: gpio\n  gpio-17:\n    interface: gpio\n  gpio-27:\n    interface: gpio\n  gpio-7:\n    interface: gpio\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eor possibly even more purporse related plug names.\u003c/p\u003e","post_number":9,"post_type":1,"updated_at":"2021-07-21T08:52:56.266Z","reply_count":0,"reply_to_post_number":5,"quote_count":2,"incoming_link_count":2,"reads":23,"readers_count":22,"score":59.6,"yours":false,"topic_id":7829,"topic_slug":"the-gpio-interface","display_username":"Samuele Pedroni","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":13,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":119805,"name":"Farshid Tavakolizadeh","username":"farshidtz","avatar_template":"/letter_avatar/farshidtz/{size}/5_6d6f4cde2641c35611d5cac2fb97c77e.png","created_at":"2023-02-17T12:42:09.242Z","cooked":"\u003cp\u003eThe documentation doesn’t explain that the \u003ccode\u003egpio\u003c/code\u003e interface slots need to be provided by a gadget. Without that, there will be no slots to connect to:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e$ snap interface gpio\nname:    gpio\nsummary: allows access to specific GPIO pin\n\u003c/code\u003e\u003c/pre\u003e","post_number":10,"post_type":1,"updated_at":"2023-02-17T12:42:09.242Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":11,"readers_count":10,"score":17.2,"yours":false,"topic_id":7829,"topic_slug":"the-gpio-interface","display_username":"Farshid Tavakolizadeh","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":11344,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false}],"stream":[35496,42768,42781,81388,81389,81406,81457,81458,96293,119805]},"timeline_lookup":[[1,1709],[2,1589],[3,1588],[4,960],[7,959],[9,695],[10,119]],"suggested_topics":[{"id":31050,"title":"Snapcraft Explanation guides","fancy_title":"Snapcraft Explanation guides","slug":"snapcraft-explanation-guides","posts_count":2,"reply_count":0,"highest_post_number":2,"image_url":null,"created_at":"2022-07-27T11:41:43.445Z","last_posted_at":"2023-04-05T12:22:13.234Z","bumped":true,"bumped_at":"2023-04-05T12:22:13.234Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags":[],"like_count":2,"views":1139,"category_id":15,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":2772,"username":"degville","name":"Graham Morrison","avatar_template":"/user_avatar/forum.snapcraft.io/degville/{size}/2021_2.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":11710,"username":"rpjday","name":"Robert P. J. Day","avatar_template":"/user_avatar/forum.snapcraft.io/rpjday/{size}/8457_2.png"}}]},{"id":34548,"title":"ROS distributions with no extensions","fancy_title":"ROS distributions with no extensions","slug":"ros-distributions-with-no-extensions","posts_count":3,"reply_count":1,"highest_post_number":3,"image_url":null,"created_at":"2023-03-30T20:47:55.438Z","last_posted_at":"2023-03-31T14:22:33.616Z","bumped":true,"bumped_at":"2023-03-31T14:22:33.616Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags":[],"like_count":0,"views":398,"category_id":15,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":13647,"username":"giusebar18","name":"","avatar_template":"/letter_avatar/giusebar18/{size}/5_6d6f4cde2641c35611d5cac2fb97c77e.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":2772,"username":"degville","name":"Graham Morrison","avatar_template":"/user_avatar/forum.snapcraft.io/degville/{size}/2021_2.png"}}]},{"id":34026,"title":"Tutorial is outdated or something","fancy_title":"Tutorial is outdated or something","slug":"tutorial-is-outdated-or-something","posts_count":4,"reply_count":1,"highest_post_number":4,"image_url":null,"created_at":"2023-02-23T15:15:25.641Z","last_posted_at":"2023-02-23T17:40:48.223Z","bumped":true,"bumped_at":"2023-02-23T17:40:48.223Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags":[],"like_count":1,"views":123,"category_id":15,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":14103,"username":"Greg","name":"Greg Timmons","avatar_template":"/letter_avatar/greg/{size}/5_6d6f4cde2641c35611d5cac2fb97c77e.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":11310,"username":"mr_cal","name":"Callahan Kovacs","avatar_template":"/user_avatar/forum.snapcraft.io/mr_cal/{size}/8466_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":2772,"username":"degville","name":"Graham Morrison","avatar_template":"/user_avatar/forum.snapcraft.io/degville/{size}/2021_2.png"}}]},{"id":32986,"title":"Snapcraft installation and setup","fancy_title":"Snapcraft installation and setup","slug":"snapcraft-installation-and-setup","posts_count":2,"reply_count":0,"highest_post_number":2,"image_url":null,"created_at":"2022-12-07T12:49:10.746Z","last_posted_at":"2022-12-15T10:43:52.370Z","bumped":true,"bumped_at":"2022-12-07T12:49:10.898Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags":[],"like_count":0,"views":819,"category_id":15,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest single","description":"Original Poster, Most Recent Poster","user":{"id":2772,"username":"degville","name":"Graham Morrison","avatar_template":"/user_avatar/forum.snapcraft.io/degville/{size}/2021_2.png"}}]},{"id":35434,"title":"Installing snap on AlmaLinux OS","fancy_title":"Installing snap on AlmaLinux OS","slug":"installing-snap-on-almalinux-os","posts_count":1,"reply_count":0,"highest_post_number":1,"image_url":null,"created_at":"2023-06-01T16:00:10.610Z","last_posted_at":"2023-06-01T16:00:10.745Z","bumped":true,"bumped_at":"2023-06-01T16:00:10.745Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags":[],"like_count":0,"views":99,"category_id":15,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest single","description":"Original Poster, Most Recent Poster","user":{"id":2772,"username":"degville","name":"Graham Morrison","avatar_template":"/user_avatar/forum.snapcraft.io/degville/{size}/2021_2.png"}}]}],"tags":[],"id":7829,"title":"The gpio interface","fancy_title":"The gpio interface","posts_count":10,"created_at":"2018-10-11T11:15:37.561Z","views":6676,"reply_count":6,"like_count":4,"last_posted_at":"2023-02-17T12:42:09.242Z","visible":true,"closed":false,"archived":false,"has_summary":false,"archetype":"regular","slug":"the-gpio-interface","category_id":15,"word_count":1402,"deleted_at":null,"user_id":2772,"featured_link":null,"pinned_globally":false,"pinned_at":null,"pinned_until":null,"image_url":null,"slow_mode_seconds":0,"draft":null,"draft_key":"topic_7829","draft_sequence":null,"unpinned":null,"pinned":false,"current_post_number":1,"highest_post_number":10,"deleted_by":null,"actions_summary":[{"id":4,"count":0,"hidden":false,"can_act":false},{"id":8,"count":0,"hidden":false,"can_act":false},{"id":7,"count":0,"hidden":false,"can_act":false}],"chunk_size":20,"bookmarked":false,"topic_timer":null,"message_bus_last_id":0,"participant_count":6,"show_read_indicator":false,"thumbnails":null,"details":{"notification_level":1,"participants":[{"id":2438,"username":"ijohnson","name":"Ian Johnson","avatar_template":"/user_avatar/forum.snapcraft.io/ijohnson/{size}/2091_2.png","post_count":3,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null},{"id":5924,"username":"dav","name":"David Sean","avatar_template":"/user_avatar/forum.snapcraft.io/dav/{size}/7509_2.png","post_count":3,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null},{"id":13,"username":"pedronis","name":"Samuele Pedroni","avatar_template":"/user_avatar/forum.snapcraft.io/pedronis/{size}/46_2.png","post_count":1,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null},{"id":2772,"username":"degville","name":"Graham Morrison","avatar_template":"/user_avatar/forum.snapcraft.io/degville/{size}/2021_2.png","post_count":1,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null},{"id":4122,"username":"tavish","name":"Tavish","avatar_template":"/letter_avatar/tavish/{size}/5_6d6f4cde2641c35611d5cac2fb97c77e.png","post_count":1,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null},{"id":11344,"username":"farshidtz","name":"Farshid Tavakolizadeh","avatar_template":"/letter_avatar/farshidtz/{size}/5_6d6f4cde2641c35611d5cac2fb97c77e.png","post_count":1,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null}],"created_by":{"id":2772,"username":"degville","name":"Graham Morrison","avatar_template":"/user_avatar/forum.snapcraft.io/degville/{size}/2021_2.png"},"last_poster":{"id":11344,"username":"farshidtz","name":"Farshid Tavakolizadeh","avatar_template":"/letter_avatar/farshidtz/{size}/5_6d6f4cde2641c35611d5cac2fb97c77e.png"},"links":[{"url":"https://core.docs.ubuntu.com/en/image/image-building","title":"Ubuntu IoT Developer Documentation | Ubuntu Core documentation","internal":false,"attachment":false,"reflection":false,"clicks":33,"user_id":2438,"domain":"core.docs.ubuntu.com","root_domain":"ubuntu.com"},{"url":"https://github.com/ogra1/pi-fancontrol-snap","title":"GitHub - ogra1/pi-fancontrol-snap","internal":false,"attachment":false,"reflection":false,"clicks":20,"user_id":2772,"domain":"github.com","root_domain":"github.com"},{"url":"https://forum.snapcraft.io/t/interface-management/6154","title":"Interface management","internal":true,"attachment":false,"reflection":false,"clicks":13,"user_id":2772,"domain":"forum.snapcraft.io","root_domain":"snapcraft.io"},{"url":"https://github.com/snapcore/snapd/blob/master/interfaces/builtin/gpio.go","title":"snapd/gpio.go at master · snapcore/snapd · GitHub","internal":false,"attachment":false,"reflection":false,"clicks":11,"user_id":2772,"domain":"github.com","root_domain":"github.com"},{"url":"https://snapcraft.io/pi-fancontrol","title":"Install pi-fancontrol on Linux | Snap Store","internal":false,"attachment":false,"reflection":false,"clicks":8,"user_id":2772,"domain":"snapcraft.io","root_domain":"snapcraft.io"},{"url":"https://forum.snapcraft.io/t/supported-interfaces/7744","title":"Supported interfaces","internal":true,"attachment":false,"reflection":false,"clicks":5,"user_id":2772,"domain":"forum.snapcraft.io","root_domain":"snapcraft.io"},{"url":"https://github.com/snapcore/pi-gadget","title":"GitHub - snapcore/pi-gadget: Universal pi (pi2,pi3,pi4,cm3) gadget snap for core18","internal":false,"attachment":false,"reflection":false,"clicks":2,"user_id":5924,"domain":"github.com","root_domain":"github.com"},{"url":"https://forum.snapcraft.io/t/the-gpio-control-interface/13037","title":"The gpio-control interface","internal":true,"attachment":false,"reflection":true,"clicks":1,"user_id":2772,"domain":"forum.snapcraft.io","root_domain":"snapcraft.io"}]}}