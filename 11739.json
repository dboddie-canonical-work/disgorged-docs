{"post_stream":{"posts":[{"id":49872,"name":"Sergio Schvezov","username":"sergiusens","avatar_template":"/user_avatar/forum.snapcraft.io/sergiusens/{size}/5621_2.png","created_at":"2019-06-10T21:16:15.374Z","cooked":"\u003cp\u003e\u003ca href=\"/t/snapcraft-overview/8940\"\u003eSnapcraft\u003c/a\u003e is delivered as a snap and this creates a few complications when used with Docker. In particular, incompatible design constraints imposed by Docker affect the way snaps are intended to run. Fortunately, there are workarounds that can be used to create Docker images that will build snaps using Snapcraft.\u003c/p\u003e\n\u003cp\u003eWhat follows is a \u003ccode\u003eDockerfile\u003c/code\u003e that can creates a docker image for Snapcraft from the stable channel:\u003cbr\u003e\n\u003ca href=\"https://raw.githubusercontent.com/snapcore/snapcraft/master/docker/Dockerfile\" class=\"onebox\" target=\"_blank\" rel=\"noopener\"\u003ehttps://raw.githubusercontent.com/snapcore/snapcraft/master/docker/Dockerfile\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eThe above \u003ccode\u003eDockerfile\u003c/code\u003e can be used to build snaps with a \u003ccode\u003esnapcraft.yaml\u003c/code\u003e that either 1) defines \u003ccode\u003ebase: core\u003c/code\u003e, or 2) doesn’t define a base at all. In both cases, the build environment is expected to be Ubuntu 16.04 LTS (Xenial Xerus).\u003c/p\u003e\n\u003cp\u003eTo create a \u003ccode\u003eDockerfile\u003c/code\u003e that can be used with \u003ccode\u003ebase: core18\u003c/code\u003e in \u003ccode\u003esnapcraft.yaml\u003c/code\u003e (the current default), change the line \u003ccode\u003eFROM ubuntu:xenial\u003c/code\u003e to \u003ccode\u003eFROM ubuntu:bionic\u003c/code\u003e in \u003ca href=\"https://raw.githubusercontent.com/snapcore/snapcraft/master/docker/Dockerfile\"\u003eDockerfile\u003c/a\u003e:\u003c/p\u003e\n\u003cp\u003eFor more information on bases, see \u003ca href=\"/t/base-snaps/11198\"\u003eBase snaps\u003c/a\u003e.\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003e\u003cimg src=\"https://forum.snapcraft.io/images/emoji/emoji_one/bulb.png?v=9\" title=\":bulb:\" class=\"emoji\" alt=\":bulb:\"\u003e Reduce a snap’s build time by extending your project-specific Docker image to pre-install most of a snap’s dependencies, as defined by its \u003ccode\u003esnapcraft.yaml\u003c/code\u003e.\u003c/p\u003e\n\u003c/blockquote\u003e","post_number":1,"post_type":1,"updated_at":"2021-04-09T14:45:09.016Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":190,"reads":36,"readers_count":35,"score":987.0,"yours":false,"topic_id":11739,"topic_slug":"creating-docker-images-for-snapcraft","display_username":"Sergio Schvezov","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":7,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://raw.githubusercontent.com/snapcore/snapcraft/master/docker/Dockerfile","internal":false,"reflection":false,"clicks":13},{"url":"https://forum.snapcraft.io/t/base-snaps/11198","internal":true,"reflection":false,"title":"Base snaps","clicks":7},{"url":"https://forum.snapcraft.io/t/snapcraft-overview/8940","internal":true,"reflection":false,"title":"Snapcraft overview","clicks":1},{"url":"https://forum.snapcraft.io/t/build-on-docker/4158","internal":true,"reflection":true,"title":"Build on Docker","clicks":1},{"url":"https://forum.snapcraft.io/t/snap-documentation/11127","internal":true,"reflection":true,"title":"Snap documentation","clicks":0},{"url":"https://forum.snapcraft.io/t/snapcraft-docker-image-update-broke-python-plugin/11976/6","internal":true,"reflection":true,"title":"Snapcraft Docker Image Update Broke Python Plugin","clicks":0},{"url":"https://forum.snapcraft.io/t/running-snapcraft-with-podman/9016/7","internal":true,"reflection":true,"title":"Running snapcraft with podman","clicks":0}],"read":true,"user_title":"policy-reviewers","title_is_group":false,"bookmarked":false,"actions_summary":[{"id":2,"count":2}],"moderator":true,"admin":false,"staff":true,"user_id":25,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":true,"last_wiki_edit":"2021-04-09T14:45:09.026Z","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":53941,"name":"Anatoli Babenia","username":"abitrolly","avatar_template":"/user_avatar/forum.snapcraft.io/abitrolly/{size}/4528_2.png","created_at":"2019-08-22T09:24:13.481Z","cooked":"\u003cp\u003eAfter \u003ca href=\"https://github.com/snapcore/snapcraft/pull/2673\" rel=\"noopener nofollow ugc\"\u003ehttps://github.com/snapcore/snapcraft/pull/2673\u003c/a\u003e is merger, it will be possible to set both risk and Ubuntu flavor from the command line when building containers.\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003eexport RISK=stable\ndocker build --no-cache --tag snapcore/snapcraft:$RISK --build-arg RISK=$RISK --build-arg UBUNTU=bionic .\u003c/code\u003e\u003c/pre\u003e","post_number":2,"post_type":1,"updated_at":"2019-08-22T09:24:13.481Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":26,"readers_count":25,"score":20.2,"yours":false,"topic_id":11739,"topic_slug":"creating-docker-images-for-snapcraft","display_username":"Anatoli Babenia","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://github.com/snapcore/snapcraft/pull/2673","internal":false,"reflection":false,"title":"Parametrize docker builds by abitrolly · Pull Request #2673 · snapcore/snapcraft · GitHub","clicks":14}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":2185,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false}],"stream":[49872,53941]},"timeline_lookup":[[1,1466],[2,1394]],"suggested_topics":[{"id":35563,"title":"The WebkitGTK Problem","fancy_title":"The WebkitGTK Problem","slug":"the-webkitgtk-problem","posts_count":1,"reply_count":0,"highest_post_number":1,"image_url":null,"created_at":"2023-06-10T19:28:37.898Z","last_posted_at":"2023-06-10T19:28:38.095Z","bumped":true,"bumped_at":"2023-06-13T06:29:04.736Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags":[],"like_count":1,"views":55,"category_id":15,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest single","description":"Original Poster, Most Recent Poster","user":{"id":13970,"username":"soumyaDghosh","name":"Soumyadeep Ghosh","avatar_template":"/letter_avatar/soumyadghosh/{size}/5_6d6f4cde2641c35611d5cac2fb97c77e.png"}}]},{"id":30905,"title":"Snapcraft documentation","fancy_title":"Snapcraft documentation","slug":"snapcraft-documentation","posts_count":1,"reply_count":0,"highest_post_number":1,"image_url":null,"created_at":"2022-07-15T11:05:45.374Z","last_posted_at":"2022-07-15T11:05:45.528Z","bumped":true,"bumped_at":"2023-02-17T19:55:21.024Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags":[],"like_count":0,"views":1532,"category_id":15,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest single","description":"Original Poster, Most Recent Poster","user":{"id":2772,"username":"degville","name":"Graham Morrison","avatar_template":"/user_avatar/forum.snapcraft.io/degville/{size}/2021_2.png"}}]},{"id":32229,"title":"Library linter","fancy_title":"Library linter","slug":"library-linter","posts_count":2,"reply_count":0,"highest_post_number":2,"image_url":null,"created_at":"2022-10-18T17:35:43.980Z","last_posted_at":"2022-10-19T03:00:57.683Z","bumped":true,"bumped_at":"2022-10-19T03:00:57.683Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags":[],"like_count":3,"views":793,"category_id":15,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":3793,"username":"cmatsuoka","name":"Claudio Matsuoka","avatar_template":"/user_avatar/forum.snapcraft.io/cmatsuoka/{size}/9338_2.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":393,"username":"jamesh","name":"James Henstridge","avatar_template":"/user_avatar/forum.snapcraft.io/jamesh/{size}/3947_2.png"}}]},{"id":32908,"title":"The pwm-control interface","fancy_title":"The pwm-control interface","slug":"the-pwm-control-interface","posts_count":8,"reply_count":6,"highest_post_number":9,"image_url":null,"created_at":"2022-11-30T08:57:34.695Z","last_posted_at":"2023-03-30T09:37:54.031Z","bumped":true,"bumped_at":"2023-03-30T09:37:54.031Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags":[],"like_count":3,"views":552,"category_id":15,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":8707,"username":"zyga","name":"Zygmunt Krynicki","avatar_template":"/user_avatar/forum.snapcraft.io/zyga/{size}/4376_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":2772,"username":"degville","name":"Graham Morrison","avatar_template":"/user_avatar/forum.snapcraft.io/degville/{size}/2021_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":11710,"username":"rpjday","name":"Robert P. J. Day","avatar_template":"/user_avatar/forum.snapcraft.io/rpjday/{size}/8457_2.png"}}]},{"id":30809,"title":"The ROS 2 Humble extension","fancy_title":"The ROS 2 Humble extension","slug":"the-ros-2-humble-extension","posts_count":1,"reply_count":0,"highest_post_number":1,"image_url":null,"created_at":"2022-07-08T20:12:10.035Z","last_posted_at":"2022-07-08T20:12:10.192Z","bumped":true,"bumped_at":"2023-03-13T13:44:02.640Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags":[],"like_count":0,"views":1244,"category_id":15,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest single","description":"Original Poster, Most Recent Poster","user":{"id":6739,"username":"artivis","name":"Jeremie Deray","avatar_template":"/user_avatar/forum.snapcraft.io/artivis/{size}/5695_2.png"}}]}],"tags":[],"id":11739,"title":"Creating docker images for snapcraft","fancy_title":"Creating docker images for snapcraft","posts_count":2,"created_at":"2019-06-10T21:16:15.183Z","views":4282,"reply_count":0,"like_count":3,"last_posted_at":"2019-08-22T09:24:13.481Z","visible":true,"closed":false,"archived":false,"has_summary":false,"archetype":"regular","slug":"creating-docker-images-for-snapcraft","category_id":15,"word_count":250,"deleted_at":null,"user_id":25,"featured_link":null,"pinned_globally":false,"pinned_at":null,"pinned_until":null,"image_url":null,"slow_mode_seconds":0,"draft":null,"draft_key":"topic_11739","draft_sequence":null,"unpinned":null,"pinned":false,"current_post_number":1,"highest_post_number":2,"deleted_by":null,"actions_summary":[{"id":4,"count":0,"hidden":false,"can_act":false},{"id":8,"count":0,"hidden":false,"can_act":false},{"id":7,"count":0,"hidden":false,"can_act":false}],"chunk_size":20,"bookmarked":false,"topic_timer":null,"message_bus_last_id":0,"participant_count":2,"show_read_indicator":false,"thumbnails":null,"details":{"notification_level":1,"participants":[{"id":25,"username":"sergiusens","name":"Sergio Schvezov","avatar_template":"/user_avatar/forum.snapcraft.io/sergiusens/{size}/5621_2.png","post_count":1,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null},{"id":2185,"username":"abitrolly","name":"Anatoli Babenia","avatar_template":"/user_avatar/forum.snapcraft.io/abitrolly/{size}/4528_2.png","post_count":1,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null}],"created_by":{"id":25,"username":"sergiusens","name":"Sergio Schvezov","avatar_template":"/user_avatar/forum.snapcraft.io/sergiusens/{size}/5621_2.png"},"last_poster":{"id":2185,"username":"abitrolly","name":"Anatoli Babenia","avatar_template":"/user_avatar/forum.snapcraft.io/abitrolly/{size}/4528_2.png"},"links":[{"url":"https://github.com/snapcore/snapcraft/pull/2673","title":"Parametrize docker builds by abitrolly · Pull Request #2673 · snapcore/snapcraft · GitHub","internal":false,"attachment":false,"reflection":false,"clicks":14,"user_id":2185,"domain":"github.com","root_domain":"github.com"},{"url":"https://raw.githubusercontent.com/snapcore/snapcraft/master/docker/Dockerfile","title":null,"internal":false,"attachment":false,"reflection":false,"clicks":13,"user_id":25,"domain":"raw.githubusercontent.com","root_domain":"raw.githubusercontent.com"},{"url":"https://forum.snapcraft.io/t/base-snaps/11198","title":"Base snaps","internal":true,"attachment":false,"reflection":false,"clicks":7,"user_id":25,"domain":"forum.snapcraft.io","root_domain":"snapcraft.io"},{"url":"https://forum.snapcraft.io/t/build-on-docker/4158","title":"Build on Docker","internal":true,"attachment":false,"reflection":true,"clicks":1,"user_id":1044,"domain":"forum.snapcraft.io","root_domain":"snapcraft.io"},{"url":"https://forum.snapcraft.io/t/snapcraft-overview/8940","title":"Snapcraft overview","internal":true,"attachment":false,"reflection":false,"clicks":1,"user_id":25,"domain":"forum.snapcraft.io","root_domain":"snapcraft.io"}]}}