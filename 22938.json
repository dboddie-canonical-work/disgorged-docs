{"post_stream":{"posts":[{"id":87747,"name":"Ian Johnson","username":"ijohnson","avatar_template":"/user_avatar/forum.snapcraft.io/ijohnson/{size}/2091_2.png","created_at":"2021-02-24T16:51:32.311Z","cooked":"\u003cp\u003eThe \u003ccode\u003esnap try\u003c/code\u003e command installs a snap from its unpackaged components within a directory. After installation, most changes to the components in that directory will immediately by visible in the installed snap.\u003c/p\u003e\n\u003cp\u003eOrdinarily, snaps cannot be modified. They are distributed as, and executed from, read-only SquashFS files whose integrity is guaranteed via \u003ca href=\"/t/assertions/6155\"\u003eassertions\u003c/a\u003e and the \u003ca href=\"/t/using-the-snap-store/12379\"\u003estore\u003c/a\u003e.\u003c/p\u003e\n\u003cp\u003eBut it’s sometimes useful to be able to experiment with a snap locally, to help debug an issue, or to make changes to a snap when you don’t have upstream access to the packaging process. This is when \u003ccode\u003esnap try\u003c/code\u003e is useful.\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eIf you only have access to the packaged snap itself, you first need to \u003ca href=\"#heading--unsquash\"\u003eunsquash the snap\u003c/a\u003e and then \u003ca href=\"#heading--snaptry\"\u003euse snap try to test it\u003c/a\u003e.\u003c/li\u003e\n\u003cli\u003eIf, instead, you are a developer with access to the source code of the snap, you first need to \u003ca href=\"#heading--snapcrafttry\"\u003euse snapcraft try to build an unpacked snap\u003c/a\u003e, and then \u003ca href=\"#heading--snaptry\"\u003euse snap try to test it\u003c/a\u003e.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"heading--unsquash\"\u003eUnsquashing a snap\u003c/h2\u003e\n\u003cp\u003eIn order to use \u003ccode\u003esnap try\u003c/code\u003e, you first need to get the unpacked contents of the snap. The first step is to get the snap itself. The most practical source of snaps is the snap store, where a snap can be downloaded with the \u003ccode\u003esnap download\u003c/code\u003e command:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-bash\"\u003e$ snap download hello-world\nFetching snap \"hello-world\"\nFetching assertions for \"hello-world\"\nInstall the snap with:\nsnap ack hello-world_29.assert\nsnap install hello-world_29.snap\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThe download includes the snap itself and a signed set of \u003ca href=\"/t/assertions/6155\"\u003eassertions\u003c/a\u003e from the store to validate the snap’s default state.\u003c/p\u003e\n\u003cp\u003eAlternatively, \u003cem\u003e.snap\u003c/em\u003e files for any installed snaps can be found at \u003ccode\u003e/var/lib/snapd/snaps/\u003c/code\u003e, from where they can be copied across to your current working directory.\u003c/p\u003e\n\u003cp\u003eTo uncompress the SquashFS \u003cem\u003e.snap\u003c/em\u003e file, use \u003ccode\u003eunsquashfs \u0026lt;snap filename\u0026gt;\u003c/code\u003e:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-bash\"\u003e$ unsquashfs hello-world_29.snap\nParallel unsquashfs: Using 8 processors\n6 inodes (6 blocks) to write\n[===========================|] 6/6 100%\ncreated 6 files\ncreated 4 directories\ncreated 0 symlinks\ncreated 0 device\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThe files associated with the snap can now be found in the `squashfs-root’ directory. You can use \u003ca href=\"#heading--snaptry\"\u003esnap try\u003c/a\u003e to install this unpacked snap.\u003c/p\u003e\n\u003ch2 id=\"heading--snaptry\"\u003eUsing snap try\u003c/h2\u003e\n\u003cp\u003eRunning \u003ccode\u003esnap try \u0026lt;directory\u0026gt;\u003c/code\u003e installs an unpacked snap using a bind mount.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-bash\"\u003e$ snap try squashfs-root\nhello-world 6.4 mounted from /home/user/squashfs-root\n$ which hello-world\n/snap/bin/hello-world\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eMost changes now made to files in the \u003ccode\u003esquashfs-root\u003c/code\u003e folder will be immediately reflected in the installed snap. This can be helpful when debugging an application within a snap, or the snap itself.\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eⓘ Certain changes, such as adjusting a snap’s interfaces or confinement will not be reflected in the installed snap until after a reinstall. These changes include:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003echanges to snap interfaces, such as adding or removing a plug\u003c/li\u003e\n\u003cli\u003echanges to layouts\u003c/li\u003e\n\u003cli\u003echanges to a snap’s confinement\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eUsing the above hello-world snap, for example, we could edit the \u003ccode\u003ebin/echo\u003c/code\u003e script to change its output without rebuilding or remounting the snap:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-bash\"\u003e$ hello-world\nHello world!\n$ sed -i 's/World/Everyone/g' /home/user/squashfs-root/bin/echo\n$ hello-world\nHello Everyone!\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2 id=\"heading--snapcrafttry\"\u003eUsing snapcraft try\u003c/h2\u003e\n\u003cp\u003eWhen developing a snap with \u003ca href=\"/t/snapcraft-overview/8940\"\u003esnapcraft\u003c/a\u003e, the \u003ccode\u003esnapcraft try\u003c/code\u003e command can be used in combination with \u003ccode\u003esnap try\u003c/code\u003e to quickly test a snap and fix issues.\u003c/p\u003e\n\u003cp\u003eThe \u003ccode\u003esnapcraft try\u003c/code\u003e command runs through the build process to the completion of the \u003cem\u003eprime\u003c/em\u003e stage (see \u003ca href=\"/t/parts-lifecycle/12231\"\u003eParts lifecycle\u003c/a\u003e for further details). It then exposes the resultant \u003cem\u003eprime\u003c/em\u003e directory to the snapcraft directory, even from within a virtual machine or container.\u003c/p\u003e\n\u003cp\u003eThis \u003cem\u003eprime\u003c/em\u003e directory includes all the staged components of a snap, which can then be installed and tested with the \u003ccode\u003esnap try \u0026lt;prime directory\u0026gt;\u003c/code\u003e command.\u003c/p\u003e\n\u003cp\u003eThe following,  example, will build a \u003cem\u003ehello-world\u003c/em\u003e snap within \u003ca href=\"/t/build-options/14250\"\u003eLXD\u003c/a\u003e and offer its \u003cem\u003eprime\u003c/em\u003e directory locally:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-bash\"\u003e\n$ snapcraft try --use-lxd\nPulling hello-world\n+ snapcraftctl pull\nBuilding hello-world\n+ snapcraftctl build\n+ cp --archive --link --no-dereference . /root/parts/hello-world/install\nStaging hello-world\n+ snapcraftctl stage\nPriming hello-world\n+ snapcraftctl prime\nYou can now run `snap try /home/user/hello-world/prime`.\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThe above snap can then be installed and tested with \u003ca href=\"#heading--snaptry\"\u003e\u003ccode\u003esnap try\u003c/code\u003e\u003c/a\u003e and the \u003cem\u003eprime\u003c/em\u003e directory as its target:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-bash\"\u003e$ snap try /home/user/hello-world/prime\nhello-world 0.1 mounted from /home/user/hello-world/prime\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eFor further help on testing and debugging a snap, see \u003ca href=\"/t/iterating-over-a-build/12143\"\u003eIterating over a build\u003c/a\u003e and \u003ca href=\"/t/debugging-snaps/18420\"\u003eDebugging snaps\u003c/a\u003e.\u003c/p\u003e","post_number":1,"post_type":1,"updated_at":"2021-03-31T14:51:50.838Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":132,"reads":24,"readers_count":23,"score":724.8,"yours":false,"topic_id":22938,"topic_slug":"debug-snaps-with-snap-try","display_username":"Ian Johnson","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":10,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://forum.snapcraft.io/t/debugging-snaps/18420","internal":true,"reflection":false,"title":"Debugging snaps","clicks":4},{"url":"https://forum.snapcraft.io/t/build-options/14250","internal":true,"reflection":false,"title":"Build options","clicks":1},{"url":"https://forum.snapcraft.io/t/parts-lifecycle/12231","internal":true,"reflection":false,"title":"Parts lifecycle","clicks":1},{"url":"https://forum.snapcraft.io/t/iterating-over-a-build/12143","internal":true,"reflection":false,"title":"Iterating over a build","clicks":1},{"url":"https://forum.snapcraft.io/t/assertions/6155","internal":true,"reflection":false,"title":"Assertions","clicks":0},{"url":"https://forum.snapcraft.io/t/snapcraft-overview/8940","internal":true,"reflection":false,"title":"Snapcraft overview","clicks":0},{"url":"https://forum.snapcraft.io/t/using-the-snap-store/12379","internal":true,"reflection":false,"title":"Using the Snap Store","clicks":0},{"url":"https://forum.snapcraft.io/t/whats-new/20117","internal":true,"reflection":true,"title":"What's new","clicks":0},{"url":"https://forum.snapcraft.io/t/snap-documentation/11127","internal":true,"reflection":true,"title":"Snap documentation","clicks":0}],"read":true,"user_title":"","bookmarked":false,"actions_summary":[{"id":2,"count":2}],"moderator":true,"admin":false,"staff":true,"user_id":2438,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":true,"last_wiki_edit":"2021-03-31T14:51:50.862Z","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":90024,"name":"Lucy Llewellyn","username":"lucyllewy","avatar_template":"/user_avatar/forum.snapcraft.io/lucyllewy/{size}/9782_2.png","created_at":"2021-03-30T16:59:13.553Z","cooked":"\u003cp\u003e\u003cimg src=\"https://media3.giphy.com/media/26FmQ6EOvLxp6cWyY/giphy.gif?cid=ecf05e471meduev12f4s3ppu4hljp8zcizxeyjri4brswr23\u0026amp;rid=giphy.gif\" alt=\"Gif of Yoda from Star Wars saying \u0026quot;Do, or do not. There is no try!\u0026quot;\" width=\"\" height=\"\"\u003e\u003c/p\u003e","post_number":2,"post_type":1,"updated_at":"2021-03-30T16:59:13.553Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":17,"readers_count":16,"score":78.4,"yours":false,"topic_id":22938,"topic_slug":"debug-snaps-with-snap-try","display_username":"Lucy Llewellyn","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"","bookmarked":false,"actions_summary":[{"id":2,"count":3}],"moderator":false,"admin":false,"staff":false,"user_id":286,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":98362,"name":"Alistair Buxton","username":"ali1234","avatar_template":"/letter_avatar/ali1234/{size}/5_6d6f4cde2641c35611d5cac2fb97c77e.png","created_at":"2021-08-29T23:47:02.969Z","cooked":"\u003cp\u003eHow do I stop trying a snap?\u003c/p\u003e\n\u003cp\u003eAfter I have run \u003ccode\u003esnap try\u003c/code\u003e I can no longer run \u003ccode\u003esnapcraft clean\u003c/code\u003e because it says the directory is in use by \u003ccode\u003esnap try\u003c/code\u003e.\u003c/p\u003e","post_number":3,"post_type":1,"updated_at":"2021-08-29T23:47:02.969Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":10,"readers_count":9,"score":17.0,"yours":false,"topic_id":22938,"topic_slug":"debug-snaps-with-snap-try","display_username":"Alistair Buxton","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":792,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false}],"stream":[87747,90024,98362]},"timeline_lookup":[[1,841],[2,807],[3,655]],"suggested_topics":[{"id":34179,"title":"Set up classic confinement for a Python project","fancy_title":"Set up classic confinement for a Python project","slug":"set-up-classic-confinement-for-a-python-project","posts_count":1,"reply_count":0,"highest_post_number":1,"image_url":null,"created_at":"2023-03-03T16:07:41.416Z","last_posted_at":"2023-03-03T16:07:41.560Z","bumped":true,"bumped_at":"2023-06-13T14:13:20.173Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags":["how-to"],"like_count":1,"views":750,"category_id":15,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest single","description":"Original Poster, Most Recent Poster","user":{"id":14015,"username":"dboddie","name":"David Boddie","avatar_template":"/user_avatar/forum.snapcraft.io/dboddie/{size}/9564_2.png"}}]},{"id":35613,"title":"Revisions","fancy_title":"Revisions","slug":"revisions","posts_count":1,"reply_count":0,"highest_post_number":1,"image_url":null,"created_at":"2023-06-14T12:00:32.246Z","last_posted_at":"2023-06-14T12:00:32.397Z","bumped":true,"bumped_at":"2023-06-15T11:10:36.858Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags":[],"like_count":0,"views":45,"category_id":15,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest single","description":"Original Poster, Most Recent Poster","user":{"id":2772,"username":"degville","name":"Graham Morrison","avatar_template":"/user_avatar/forum.snapcraft.io/degville/{size}/2021_2.png"}}]},{"id":30982,"title":"The acrn interface","fancy_title":"The acrn interface","slug":"the-acrn-interface","posts_count":3,"reply_count":1,"highest_post_number":3,"image_url":null,"created_at":"2022-07-21T14:25:57.164Z","last_posted_at":"2022-08-05T17:30:59.540Z","bumped":true,"bumped_at":"2022-08-05T17:30:59.540Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags":[],"like_count":1,"views":1003,"category_id":15,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":2772,"username":"degville","name":"Graham Morrison","avatar_template":"/user_avatar/forum.snapcraft.io/degville/{size}/2021_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":9753,"username":"gvancuts","name":"Geoffroy","avatar_template":"/letter_avatar/gvancuts/{size}/5_6d6f4cde2641c35611d5cac2fb97c77e.png"}}]},{"id":31449,"title":"The gnome extension","fancy_title":"The gnome extension","slug":"the-gnome-extension","posts_count":4,"reply_count":1,"highest_post_number":5,"image_url":null,"created_at":"2022-08-24T15:47:37.290Z","last_posted_at":"2023-03-03T09:02:51.627Z","bumped":true,"bumped_at":"2023-03-03T09:02:51.627Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags":[],"like_count":0,"views":1500,"category_id":15,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":2772,"username":"degville","name":"Graham Morrison","avatar_template":"/user_avatar/forum.snapcraft.io/degville/{size}/2021_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":286,"username":"lucyllewy","name":"Lucy Llewellyn","avatar_template":"/user_avatar/forum.snapcraft.io/lucyllewy/{size}/9782_2.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":14159,"username":"manuvarkey","name":"Manu Varkey","avatar_template":"/user_avatar/forum.snapcraft.io/manuvarkey/{size}/9635_2.png"}}]},{"id":31668,"title":"The posix-mq interface","fancy_title":"The posix-mq interface","slug":"the-posix-mq-interface","posts_count":1,"reply_count":0,"highest_post_number":1,"image_url":null,"created_at":"2022-09-08T12:00:35.327Z","last_posted_at":"2022-09-08T12:00:35.467Z","bumped":true,"bumped_at":"2023-04-14T09:29:21.981Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags":[],"like_count":0,"views":888,"category_id":15,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest single","description":"Original Poster, Most Recent Poster","user":{"id":2772,"username":"degville","name":"Graham Morrison","avatar_template":"/user_avatar/forum.snapcraft.io/degville/{size}/2021_2.png"}}]}],"tags":[],"id":22938,"title":"Debug snaps with snap try","fancy_title":"Debug snaps with snap try","posts_count":3,"created_at":"2021-02-24T16:51:32.124Z","views":3342,"reply_count":0,"like_count":6,"last_posted_at":"2021-08-29T23:47:02.969Z","visible":true,"closed":false,"archived":false,"has_summary":false,"archetype":"regular","slug":"debug-snaps-with-snap-try","category_id":15,"word_count":853,"deleted_at":null,"user_id":2438,"featured_link":null,"pinned_globally":false,"pinned_at":null,"pinned_until":null,"image_url":null,"slow_mode_seconds":0,"draft":null,"draft_key":"topic_22938","draft_sequence":null,"unpinned":null,"pinned":false,"current_post_number":1,"highest_post_number":3,"deleted_by":null,"actions_summary":[{"id":4,"count":0,"hidden":false,"can_act":false},{"id":8,"count":0,"hidden":false,"can_act":false},{"id":7,"count":0,"hidden":false,"can_act":false}],"chunk_size":20,"bookmarked":false,"topic_timer":null,"message_bus_last_id":0,"participant_count":3,"show_read_indicator":false,"thumbnails":null,"details":{"notification_level":1,"participants":[{"id":286,"username":"lucyllewy","name":"Lucy Llewellyn","avatar_template":"/user_avatar/forum.snapcraft.io/lucyllewy/{size}/9782_2.png","post_count":1,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null},{"id":792,"username":"ali1234","name":"Alistair Buxton","avatar_template":"/letter_avatar/ali1234/{size}/5_6d6f4cde2641c35611d5cac2fb97c77e.png","post_count":1,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null},{"id":2438,"username":"ijohnson","name":"Ian Johnson","avatar_template":"/user_avatar/forum.snapcraft.io/ijohnson/{size}/2091_2.png","post_count":1,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null}],"created_by":{"id":2438,"username":"ijohnson","name":"Ian Johnson","avatar_template":"/user_avatar/forum.snapcraft.io/ijohnson/{size}/2091_2.png"},"last_poster":{"id":792,"username":"ali1234","name":"Alistair Buxton","avatar_template":"/letter_avatar/ali1234/{size}/5_6d6f4cde2641c35611d5cac2fb97c77e.png"},"links":[{"url":"https://forum.snapcraft.io/t/debugging-snaps/18420","title":"Debugging snaps","internal":true,"attachment":false,"reflection":false,"clicks":4,"user_id":2438,"domain":"forum.snapcraft.io","root_domain":"snapcraft.io"},{"url":"https://forum.snapcraft.io/t/build-options/14250","title":"Build options","internal":true,"attachment":false,"reflection":false,"clicks":1,"user_id":2438,"domain":"forum.snapcraft.io","root_domain":"snapcraft.io"},{"url":"https://forum.snapcraft.io/t/iterating-over-a-build/12143","title":"Iterating over a build","internal":true,"attachment":false,"reflection":false,"clicks":1,"user_id":2438,"domain":"forum.snapcraft.io","root_domain":"snapcraft.io"},{"url":"https://forum.snapcraft.io/t/parts-lifecycle/12231","title":"Parts lifecycle","internal":true,"attachment":false,"reflection":false,"clicks":1,"user_id":2438,"domain":"forum.snapcraft.io","root_domain":"snapcraft.io"}]}}