{"post_stream":{"posts":[{"id":18736,"name":"Will Cooke","username":"willcooke","avatar_template":"/letter_avatar/willcooke/{size}/5_6d6f4cde2641c35611d5cac2fb97c77e.png","created_at":"2018-01-31T14:33:57.318Z","cooked":"\u003cp\u003eAt the moment snapd allows applications to call xdg-open to open http and https links, but could it be extended to open files as well?\u003c/p\u003e\n\u003cp\u003eFor example:\u003c/p\u003e\n\u003cp\u003eA desktop snap allows the user to download a file, let’s say it’s a LibreOffice .ods file.  This file gets placed in the user’s Downloads directory, and the snap offers the user the ability to open that file by clicking on it from it’s UI.\u003c/p\u003e\n\u003cp\u003eOpening that file wouldn’t work because it’s not an http[s] link.\u003c/p\u003e\n\u003cp\u003eI can see that this opens a potentially large hole, so perhaps a special interface is the right approach?\u003c/p\u003e","post_number":1,"post_type":1,"updated_at":"2018-01-31T14:33:57.318Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":2453,"reads":114,"readers_count":113,"score":12259.8,"yours":false,"topic_id":3789,"topic_slug":"allowing-xdg-open-to-open-files","display_username":"Will Cooke","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://forum.snapcraft.io/t/sharing-files-via-tmp/1613/11","internal":true,"reflection":true,"title":"Sharing files via /tmp","clicks":0}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":678,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":18740,"name":"Ken VanDine","username":"kenvandine","avatar_template":"/user_avatar/forum.snapcraft.io/kenvandine/{size}/4387_2.png","created_at":"2018-01-31T15:44:38.883Z","cooked":"\u003cp\u003eI think xdg-desktop-portal might help here.  That should include file open, iirc.  \u003ca class=\"mention\" href=\"/u/jamesh\"\u003e@jamesh\u003c/a\u003e can you please confirm?  Hopefully portals will at least handle the case of opening files using\u003cbr\u003e\ng_app_info_launch_default_for_uri.\u003c/p\u003e","post_number":2,"post_type":1,"updated_at":"2018-01-31T15:44:38.883Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":4,"reads":114,"readers_count":113,"score":42.8,"yours":false,"topic_id":3789,"topic_slug":"allowing-xdg-open-to-open-files","display_username":"Ken VanDine","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"policy-reviewers","title_is_group":false,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":430,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":18741,"name":"Gustavo Niemeyer","username":"niemeyer","avatar_template":"/user_avatar/forum.snapcraft.io/niemeyer/{size}/4620_2.png","created_at":"2018-01-31T15:49:42.706Z","cooked":"\u003cp\u003eThe two things are orthogonal. We do want portals to work, but we also want good old xdg-open to work.\u003c/p\u003e\n\u003cp\u003eI suggest we start with something equivalent to what we did with xdg-settings: accept the snap request and ask the user to confirm the intention.\u003c/p\u003e\n\u003cp\u003eWe can eventually remember decisions like this so we don’t bother the user repeatedly, but we need to be careful about it. Opening different files comes with different security implications.\u003c/p\u003e","post_number":3,"post_type":1,"updated_at":"2018-01-31T15:49:42.706Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":6,"reads":113,"readers_count":112,"score":67.6,"yours":false,"topic_id":3789,"topic_slug":"allowing-xdg-open-to-open-files","display_username":"Gustavo Niemeyer","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":true,"staff":true,"user_id":1,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":18753,"name":"Jamie Strandboge","username":"jdstrand","avatar_template":"/user_avatar/forum.snapcraft.io/jdstrand/{size}/6376_2.png","created_at":"2018-01-31T16:22:37.196Z","cooked":"\u003cp\u003eI agree with \u003ca class=\"mention\" href=\"/u/niemeyer\"\u003e@niemeyer\u003c/a\u003e. We don’t, for example, want the snap to use xdg-open and have userd blindly call the handler without (at least some initial) feedback from the user since the snap might try to exploit bugs or features in the handler to escape confinement, and the user needs to express the intent for the snap to use the handler. We’ll want to be very careful with the handling of the filename to not introduce shell metacharacter escapes as well.\u003c/p\u003e","post_number":4,"post_type":1,"updated_at":"2018-01-31T16:22:37.196Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":2,"reads":113,"readers_count":112,"score":62.6,"yours":false,"topic_id":3789,"topic_slug":"allowing-xdg-open-to-open-files","display_username":"Jamie Strandboge","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"","bookmarked":false,"actions_summary":[{"id":2,"count":2}],"moderator":false,"admin":false,"staff":false,"user_id":21,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":19511,"name":"Marco Trevisan","username":"Trevinho","avatar_template":"/user_avatar/forum.snapcraft.io/trevinho/{size}/332_2.png","created_at":"2018-02-09T21:23:40.163Z","cooked":"\u003cp\u003eHey, we had some discussion in the channel, one thing that IMHO should be allowed (and \u003ca class=\"mention\" href=\"/u/jdstrand\"\u003e@jdstrand\u003c/a\u003e was kinda agreeing from a security point of view) was to use the (trusted) filemanager as if it’s the browser, then leaving to the user the choice weather to open or not a file.\u003c/p\u003e\n\u003cp\u003eMy idea was to apply this to just \u003ccode\u003efile://\u003c/code\u003e where the pointed path is a directory, as it does firefox when you ask to open the container folder or Telegram too.\u003c/p\u003e\n\u003cp\u003eHowever, I think we could just expand this role by using the \u003ca href=\"https://www.freedesktop.org/wiki/Specifications/file-manager-interface/\" rel=\"noopener nofollow ugc\"\u003e\u003ccode\u003eorg.freedesktop.FileManager1\u003c/code\u003e interface\u003c/a\u003e to all the files.\u003c/p\u003e\n\u003cp\u003eSo basically when a \u003ccode\u003efile:///any/path/to/file.ext\u003c/code\u003e is sent to \u003ccode\u003exdg-open\u003c/code\u003e we can just call the Filemanager’s \u003ccode\u003eShowFolders\u003c/code\u003e method: if the pointed file is a folder, it will be just opened for browsing. If it’s a regular file, the containing folder will be opened and the file only selected. So, the snap itself won’t have any power to launch anything else.\u003c/p\u003e\n\u003cp\u003eThe only thing that will happen is a dbus call, that might eventually open the filemanager implementing that interface (say nautilus).\u003c/p\u003e\n\u003cp\u003eSo something like for a dir:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003egdbus call --session --dest org.freedesktop.FileManager1 \\\n           --object-path /org/freedesktop/FileManager1 \\\n           --method org.freedesktop.FileManager1.ShowFolders \\\n                   \"[\\\"file://$(xdg-user-dir PICTURES)\\\"]\" \"\"\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eAnd this how it works for a file:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003egdbus call --session --dest org.freedesktop.FileManager1 \\\n           --object-path /org/freedesktop/FileManager1 \\\n           --method org.freedesktop.FileManager1.ShowFolders \\\n                   '[\"file:///var/lib/snapd/state.json\"]' \"\"\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eAnd this will work without portals, even for apps that won’t use it.\u003c/p\u003e","post_number":5,"post_type":1,"updated_at":"2018-02-09T21:31:04.589Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":22,"reads":113,"readers_count":112,"score":152.6,"yours":false,"topic_id":3789,"topic_slug":"allowing-xdg-open-to-open-files","display_username":"Marco Trevisan","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":2,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://www.freedesktop.org/wiki/Specifications/file-manager-interface/","internal":false,"reflection":false,"title":"file-manager-interface","clicks":8},{"url":"https://forum.snapcraft.io/t/call-for-testing-telegram-desktop/3954/13","internal":true,"reflection":true,"title":"Call for testing: Telegram Desktop","clicks":0}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":475,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":19640,"name":"Gustavo Niemeyer","username":"niemeyer","avatar_template":"/user_avatar/forum.snapcraft.io/niemeyer/{size}/4620_2.png","created_at":"2018-02-12T02:08:23.618Z","cooked":"\u003cp\u003ePopping a file manager with a file selected, without any context, and in which just pressing enter will run arbitrary and potentially dangerous actions, feels undesirable.\u003c/p\u003e\n\u003cp\u003eThe idea presented above still sounds better: we would pop an actual dialog telling the user what’s going on, and also which specific snap is trying to do it, and let the user choose.\u003c/p\u003e","post_number":6,"post_type":1,"updated_at":"2018-02-12T02:08:23.618Z","reply_count":1,"reply_to_post_number":5,"quote_count":0,"incoming_link_count":361,"reads":105,"readers_count":104,"score":1831.0,"yours":false,"topic_id":3789,"topic_slug":"allowing-xdg-open-to-open-files","display_username":"Gustavo Niemeyer","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://forum.snapcraft.io/t/an-interface-for-org-freedesktop-filemanager1/20917/3","internal":true,"reflection":true,"title":"An interface for org.freedesktop.FileManager1?","clicks":0}],"read":true,"user_title":null,"reply_to_user":{"username":"Trevinho","avatar_template":"/user_avatar/forum.snapcraft.io/trevinho/{size}/332_2.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":true,"staff":true,"user_id":1,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":19719,"name":"Marco Trevisan","username":"Trevinho","avatar_template":"/user_avatar/forum.snapcraft.io/trevinho/{size}/332_2.png","created_at":"2018-02-13T11:33:56.210Z","cooked":"\u003cp\u003eWell true, but that’s the same in any web browser too, it’s that in that case there’s another confinement level, though. So while I agree that for files this might be still a bit more dangerous, what about enabling this for directories at least?\u003c/p\u003e","post_number":7,"post_type":1,"updated_at":"2018-02-13T11:33:56.210Z","reply_count":1,"reply_to_post_number":6,"quote_count":0,"incoming_link_count":0,"reads":101,"readers_count":100,"score":25.2,"yours":false,"topic_id":3789,"topic_slug":"allowing-xdg-open-to-open-files","display_username":"Marco Trevisan","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"niemeyer","avatar_template":"/user_avatar/forum.snapcraft.io/niemeyer/{size}/4620_2.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":475,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":19744,"name":"Gustavo Niemeyer","username":"niemeyer","avatar_template":"/user_avatar/forum.snapcraft.io/niemeyer/{size}/4620_2.png","created_at":"2018-02-13T16:14:00.346Z","cooked":"\u003cp\u003eI don’t get the analogy with web browsers. Can you expand a bit?\u003c/p\u003e","post_number":8,"post_type":1,"updated_at":"2018-02-13T16:14:00.346Z","reply_count":1,"reply_to_post_number":7,"quote_count":0,"incoming_link_count":1,"reads":98,"readers_count":97,"score":29.6,"yours":false,"topic_id":3789,"topic_slug":"allowing-xdg-open-to-open-files","display_username":"Gustavo Niemeyer","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"Trevinho","avatar_template":"/user_avatar/forum.snapcraft.io/trevinho/{size}/332_2.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":true,"staff":true,"user_id":1,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":19958,"name":"Marco Trevisan","username":"Trevinho","avatar_template":"/user_avatar/forum.snapcraft.io/trevinho/{size}/332_2.png","created_at":"2018-02-15T22:05:28.324Z","cooked":"\u003cp\u003eEven a malicious snap could point to a phishing (say) site, and that is of course allowed as it’s not our role to educate users in controlling their actions.\u003cbr\u003e\nAt the same time, I wouldn’t consider allowing an user to open a file-browser to access to some content (which he should explicitly open) a security issue per se.\u003c/p\u003e","post_number":9,"post_type":1,"updated_at":"2018-02-15T22:05:28.324Z","reply_count":1,"reply_to_post_number":8,"quote_count":0,"incoming_link_count":4,"reads":96,"readers_count":95,"score":44.2,"yours":false,"topic_id":3789,"topic_slug":"allowing-xdg-open-to-open-files","display_username":"Marco Trevisan","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"niemeyer","avatar_template":"/user_avatar/forum.snapcraft.io/niemeyer/{size}/4620_2.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":475,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":20013,"name":"Jamie Strandboge","username":"jdstrand","avatar_template":"/user_avatar/forum.snapcraft.io/jdstrand/{size}/6376_2.png","created_at":"2018-02-16T14:35:13.699Z","cooked":"\u003cp\u003eThe difference with a browser is that browsers are coded for phishing. The url is prominently displayed, there are noisy certificate checks and some browsers even have lists of phishing/otherwise bad sites. As a result, the snapd team decided that opening http/https URLs was ok.\u003c/p\u003e\n\u003cp\u003eWith your idea, we now need to decide if the file manager is sufficient to convey enough information to the user to make an informed choice. It is easy for a malicious snap to point the file browser at a directory under its control with attack code that otherwise looks like the user’s home directory and/or files, and then trick the user into launching that code, which is now run outside of confinement. I would argue that users are trained to look at browser URLs and warnings more than file manager directories (which has no warnings) since people have been talking about phishing for years, where phishing via the file manager with snaps is new.\u003c/p\u003e","post_number":10,"post_type":1,"updated_at":"2018-02-16T14:35:13.699Z","reply_count":0,"reply_to_post_number":9,"quote_count":0,"incoming_link_count":6,"reads":102,"readers_count":101,"score":65.4,"yours":false,"topic_id":3789,"topic_slug":"allowing-xdg-open-to-open-files","display_username":"Jamie Strandboge","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"","reply_to_user":{"username":"Trevinho","avatar_template":"/user_avatar/forum.snapcraft.io/trevinho/{size}/332_2.png"},"bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":21,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":21507,"name":"James Henstridge","username":"jamesh","avatar_template":"/user_avatar/forum.snapcraft.io/jamesh/{size}/3947_2.png","created_at":"2018-03-05T13:40:12.373Z","cooked":"\u003cp\u003eFYI, future versions should allow the core snap’s xdg-open to open local files:\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://github.com/snapcore/snapd/pull/4766\" class=\"onebox\" target=\"_blank\" rel=\"noopener nofollow ugc\"\u003ehttps://github.com/snapcore/snapd/pull/4766\u003c/a\u003e\u003cbr\u003e\n\u003ca href=\"https://github.com/snapcore/core/pull/82\" class=\"onebox\" target=\"_blank\" rel=\"noopener nofollow ugc\"\u003ehttps://github.com/snapcore/core/pull/82\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eThe changes have been merged to the 2.31 maintenance branch, so should be available soon.\u003c/p\u003e\n\u003cp\u003eThe \u003ccode\u003e/usr/bin/xdg-open\u003c/code\u003e in the core snap will now accept local file paths, including relative paths.  It then calls the new \u003ccode\u003eio.snapcraft.Launcher.OpenFile\u003c/code\u003e D-Bus method, passing a file descriptor to prove that the confined application has access to the file.  Outside the sandbox, \u003ccode\u003esnap userd\u003c/code\u003e will show a graphical permission prompt and then launch the file using the real \u003ccode\u003exdg-open\u003c/code\u003e.\u003c/p\u003e\n\u003cp\u003eThis feature also supports opening directories, causing them to be opened in the file manager.\u003c/p\u003e","post_number":11,"post_type":1,"updated_at":"2018-03-05T13:40:12.373Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":242,"reads":98,"readers_count":97,"score":1239.6,"yours":false,"topic_id":3789,"topic_slug":"allowing-xdg-open-to-open-files","display_username":"James Henstridge","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://github.com/snapcore/snapd/pull/4766","internal":false,"reflection":false,"title":"userd: add an OpenFile method for launching local files with xdg-open by jhenstridge · Pull Request #4766 · snapcore/snapd · GitHub","clicks":29},{"url":"https://github.com/snapcore/core/pull/82","internal":false,"reflection":false,"title":"xdg-open: add implementation capable of opening local files by jhenstridge · Pull Request #82 · snapcore/core · GitHub","clicks":27},{"url":"https://forum.snapcraft.io/t/classic-confinement-request-for-f1viewer/15665/9","internal":true,"reflection":true,"title":"Classic confinement request for F1viewer","clicks":0},{"url":"https://forum.snapcraft.io/t/process-for-reviewing-classic-confinement-snaps/1460","internal":true,"reflection":true,"title":"Process for reviewing classic confinement snaps","clicks":0}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":393,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":21717,"name":"Bazzet","username":"bazzet","avatar_template":"/user_avatar/forum.snapcraft.io/bazzet/{size}/942_2.png","created_at":"2018-03-08T09:40:31.874Z","cooked":"\u003cp\u003eWill this work for any kind of files? Like jpeg’s pdf’s etc? Do I need some special interface for this or will it “just start working” ?\u003c/p\u003e","post_number":12,"post_type":1,"updated_at":"2018-03-08T09:40:31.874Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":92,"readers_count":91,"score":18.4,"yours":false,"topic_id":3789,"topic_slug":"allowing-xdg-open-to-open-files","display_username":"Bazzet","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1386,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":22970,"name":"Olivier Tilloy","username":"oSoMoN","avatar_template":"/user_avatar/forum.snapcraft.io/osomon/{size}/4400_2.png","created_at":"2018-03-27T12:57:16.463Z","cooked":"\u003cp\u003eThis works, it’s a significant UX improvement, thanks!\u003c/p\u003e\n\u003cp\u003eHowever if the handler picked by xdg-open to open the file is itself a confined snap, it will fail to open it because it can’t access it. A typical example would be downloading a .doc file with the chromium snap, and having the libreoffice snap installed as the default handler for this type of files (can be achieved by installing the libreoffice snap and removing the deb):\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003eAllow snap \"chromium\" to open file \"/home/osomon/snap/chromium/266/Downloads/sample.doc\"?\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eclicking “Yes” results in a libreoffice error dialog:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003eAccess to /home/osomon/snap/chromium/266/Downloads/sample.doc denied.\u003c/code\u003e\u003c/pre\u003e","post_number":13,"post_type":1,"updated_at":"2018-03-27T12:57:16.463Z","reply_count":0,"reply_to_post_number":11,"quote_count":0,"incoming_link_count":8,"reads":88,"readers_count":87,"score":72.6,"yours":false,"topic_id":3789,"topic_slug":"allowing-xdg-open-to-open-files","display_username":"Olivier Tilloy","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"jamesh","avatar_template":"/user_avatar/forum.snapcraft.io/jamesh/{size}/3947_2.png"},"bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":531,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":28367,"name":"Matheus Lino Gomes De Souza","username":"shanepa","avatar_template":"/letter_avatar/shanepa/{size}/5_6d6f4cde2641c35611d5cac2fb97c77e.png","created_at":"2018-06-19T13:02:30.836Z","cooked":"\u003cp\u003eHello,\u003c/p\u003e\n\u003cp\u003eI use xdg-open to open a folder form a snap package. Then it will prompt a dialog to ask “Allow Opening File” from the user. Is it possible to make user need to accept once only? So that it won’t prompt again and always open.\u003c/p\u003e\n\u003cp\u003eThanks.\u003c/p\u003e","post_number":14,"post_type":1,"updated_at":"2018-06-19T13:02:30.836Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":1,"reads":73,"readers_count":72,"score":39.6,"yours":false,"topic_id":3789,"topic_slug":"allowing-xdg-open-to-open-files","display_username":"Matheus Lino Gomes De Souza","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":2618,"hidden":false,"trust_level":0,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":54515,"name":"Kevin Funk","username":"kfunk","avatar_template":"/user_avatar/forum.snapcraft.io/kfunk/{size}/4553_2.png","created_at":"2019-09-04T06:04:36.593Z","cooked":"\u003cp\u003eSame here. Chromium in Ubuntu 19.10 is now a Snap and the recurring prompts when opening files are kind of an annoyance.\u003c/p\u003e","post_number":15,"post_type":1,"updated_at":"2019-09-04T06:04:36.593Z","reply_count":0,"reply_to_post_number":14,"quote_count":0,"incoming_link_count":8,"reads":52,"readers_count":51,"score":80.4,"yours":false,"topic_id":3789,"topic_slug":"allowing-xdg-open-to-open-files","display_username":"Kevin Funk","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"shanepa","avatar_template":"/letter_avatar/shanepa/{size}/5_6d6f4cde2641c35611d5cac2fb97c77e.png"},"bookmarked":false,"actions_summary":[{"id":2,"count":2}],"moderator":false,"admin":false,"staff":false,"user_id":5461,"hidden":false,"trust_level":0,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":106428,"name":"","username":"giammi56","avatar_template":"/user_avatar/forum.snapcraft.io/giammi56/{size}/8555_2.png","created_at":"2022-03-04T16:21:24.569Z","cooked":"\u003cp\u003eHi all, I am experiencing a problem related to permissions of xdg-open from a snap packages (e.g., Obsidian) to interact with a non-snap packages (e.g., Zotero). The problem is described better \u003ca href=\"https://forum.obsidian.md/t/zotero-link-on-snap/33446\" rel=\"noopener nofollow ugc\"\u003ehere\u003c/a\u003e, but I’d like to know what the implementation status of this feature for xdg-open.\u003c/p\u003e","post_number":16,"post_type":1,"updated_at":"2022-03-04T16:21:24.569Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":1,"reads":18,"readers_count":17,"score":13.6,"yours":false,"topic_id":3789,"topic_slug":"allowing-xdg-open-to-open-files","display_username":"","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://forum.obsidian.md/t/zotero-link-on-snap/33446","internal":false,"reflection":false,"clicks":5}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":12025,"hidden":false,"trust_level":0,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":106431,"name":"Oliver Grawert","username":"ogra","avatar_template":"/user_avatar/forum.snapcraft.io/ogra/{size}/22_2.png","created_at":"2022-03-04T16:51:31.121Z","cooked":"\u003cp\u003exdg-open inside the snap environment only hands the url handler over to xdg-open outside of the snap environment, there is no further interaction …\u003c/p\u003e\n\u003cp\u003eif the app outside of the snap env is properly registering its mime type with the host, it should just open the file type properly …\u003c/p\u003e","post_number":17,"post_type":1,"updated_at":"2022-03-04T16:51:31.121Z","reply_count":0,"reply_to_post_number":16,"quote_count":0,"incoming_link_count":0,"reads":18,"readers_count":17,"score":3.6,"yours":false,"topic_id":3789,"topic_slug":"allowing-xdg-open-to-open-files","display_username":"Oliver Grawert","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"giammi56","avatar_template":"/user_avatar/forum.snapcraft.io/giammi56/{size}/8555_2.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":9,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":106432,"name":"","username":"giammi56","avatar_template":"/user_avatar/forum.snapcraft.io/giammi56/{size}/8555_2.png","created_at":"2022-03-04T17:04:28.716Z","cooked":"\u003cp\u003eThank you for your clarification. Is there any sort of permission to be given to xdg-open?\u003c/p\u003e","post_number":18,"post_type":1,"updated_at":"2022-03-04T20:44:42.510Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":1,"reads":18,"readers_count":17,"score":8.6,"yours":false,"topic_id":3789,"topic_slug":"allowing-xdg-open-to-open-files","display_username":"","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":2,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":12025,"hidden":false,"trust_level":0,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":106436,"name":"Oliver Grawert","username":"ogra","avatar_template":"/user_avatar/forum.snapcraft.io/ogra/{size}/22_2.png","created_at":"2022-03-04T17:15:42.204Z","cooked":"\u003cp\u003enope, there is nothing other than what i described above, the shipped xdg-open in the base snap (which gets launched when your app calls xdg-open) is just a forwarder that hands everything to the actual xdg-open of the host system …\u003c/p\u003e","post_number":19,"post_type":1,"updated_at":"2022-03-04T17:15:42.204Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":3,"reads":18,"readers_count":17,"score":18.6,"yours":false,"topic_id":3789,"topic_slug":"allowing-xdg-open-to-open-files","display_username":"Oliver Grawert","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":9,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":106438,"name":"James Carroll","username":"James-Carroll","avatar_template":"/user_avatar/forum.snapcraft.io/james-carroll/{size}/7921_2.png","created_at":"2022-03-04T17:29:26.603Z","cooked":"\u003cp\u003e\u003ca href=\"https://discourse.joplinapp.org/t/open-zotero-program-as-link-zotero-select-inside-joplin/23012\" class=\"onebox\" target=\"_blank\" rel=\"noopener nofollow ugc\"\u003ehttps://discourse.joplinapp.org/t/open-zotero-program-as-link-zotero-select-inside-joplin/23012\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eI’ve had a very similar experience with Zotero before. I never managed to figure out what exactly caused problems with opening it from within a snap, except that the issue didn’t exist when Zotero was installed from a third party repo via apt.\u003c/p\u003e\n\u003cp\u003eIf you’re using Zotero via the tarball they provide, it’s likely the same issue as above unfortunately.\u003c/p\u003e","post_number":20,"post_type":1,"updated_at":"2022-03-04T17:30:19.540Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":2,"reads":18,"readers_count":17,"score":33.6,"yours":false,"topic_id":3789,"topic_slug":"allowing-xdg-open-to-open-files","display_username":"James Carroll","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://discourse.joplinapp.org/t/open-zotero-program-as-link-zotero-select-inside-joplin/23012","internal":false,"reflection":false,"clicks":5}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":8016,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false}],"stream":[18736,18740,18741,18753,19511,19640,19719,19744,19958,20013,21507,21717,22970,28367,54515,106428,106431,106432,106436,106438,106442,106449,106457]},"timeline_lookup":[[1,1961],[5,1952],[6,1950],[7,1949],[8,1948],[9,1946],[10,1945],[11,1929],[12,1926],[13,1907],[14,1823],[15,1381],[16,468]],"tags":[],"id":3789,"title":"Allowing xdg-open to open files","fancy_title":"Allowing xdg-open to open files","posts_count":23,"created_at":"2018-01-31T14:33:57.221Z","views":7460,"reply_count":10,"like_count":11,"last_posted_at":"2022-03-05T09:14:43.650Z","visible":true,"closed":false,"archived":false,"has_summary":false,"archetype":"regular","slug":"allowing-xdg-open-to-open-files","category_id":5,"word_count":1684,"deleted_at":null,"user_id":678,"featured_link":null,"pinned_globally":false,"pinned_at":null,"pinned_until":null,"image_url":null,"slow_mode_seconds":0,"draft":null,"draft_key":"topic_3789","draft_sequence":null,"unpinned":null,"pinned":false,"current_post_number":1,"highest_post_number":23,"deleted_by":null,"actions_summary":[{"id":4,"count":0,"hidden":false,"can_act":false},{"id":8,"count":0,"hidden":false,"can_act":false},{"id":7,"count":0,"hidden":false,"can_act":false}],"chunk_size":20,"bookmarked":false,"topic_timer":null,"message_bus_last_id":0,"participant_count":14,"show_read_indicator":false,"thumbnails":null,"details":{"notification_level":1,"participants":[{"id":1,"username":"niemeyer","name":"Gustavo Niemeyer","avatar_template":"/user_avatar/forum.snapcraft.io/niemeyer/{size}/4620_2.png","post_count":3,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null},{"id":475,"username":"Trevinho","name":"Marco Trevisan","avatar_template":"/user_avatar/forum.snapcraft.io/trevinho/{size}/332_2.png","post_count":3,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null},{"id":12025,"username":"giammi56","name":"","avatar_template":"/user_avatar/forum.snapcraft.io/giammi56/{size}/8555_2.png","post_count":3,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null},{"id":1497,"username":"mborzecki","name":"Maciej Borzecki","avatar_template":"/user_avatar/forum.snapcraft.io/mborzecki/{size}/4382_2.png","post_count":2,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null},{"id":9,"username":"ogra","name":"Oliver Grawert","avatar_template":"/user_avatar/forum.snapcraft.io/ogra/{size}/22_2.png","post_count":2,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null},{"id":21,"username":"jdstrand","name":"Jamie Strandboge","avatar_template":"/user_avatar/forum.snapcraft.io/jdstrand/{size}/6376_2.png","post_count":2,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null},{"id":531,"username":"oSoMoN","name":"Olivier Tilloy","avatar_template":"/user_avatar/forum.snapcraft.io/osomon/{size}/4400_2.png","post_count":1,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null},{"id":678,"username":"willcooke","name":"Will Cooke","avatar_template":"/letter_avatar/willcooke/{size}/5_6d6f4cde2641c35611d5cac2fb97c77e.png","post_count":1,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null},{"id":393,"username":"jamesh","name":"James Henstridge","avatar_template":"/user_avatar/forum.snapcraft.io/jamesh/{size}/3947_2.png","post_count":1,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null},{"id":2618,"username":"shanepa","name":"Matheus Lino Gomes De Souza","avatar_template":"/letter_avatar/shanepa/{size}/5_6d6f4cde2641c35611d5cac2fb97c77e.png","post_count":1,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null},{"id":5461,"username":"kfunk","name":"Kevin Funk","avatar_template":"/user_avatar/forum.snapcraft.io/kfunk/{size}/4553_2.png","post_count":1,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null},{"id":1386,"username":"bazzet","name":"Bazzet","avatar_template":"/user_avatar/forum.snapcraft.io/bazzet/{size}/942_2.png","post_count":1,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null},{"id":430,"username":"kenvandine","name":"Ken VanDine","avatar_template":"/user_avatar/forum.snapcraft.io/kenvandine/{size}/4387_2.png","post_count":1,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null},{"id":8016,"username":"James-Carroll","name":"James Carroll","avatar_template":"/user_avatar/forum.snapcraft.io/james-carroll/{size}/7921_2.png","post_count":1,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null}],"created_by":{"id":678,"username":"willcooke","name":"Will Cooke","avatar_template":"/letter_avatar/willcooke/{size}/5_6d6f4cde2641c35611d5cac2fb97c77e.png"},"last_poster":{"id":1497,"username":"mborzecki","name":"Maciej Borzecki","avatar_template":"/user_avatar/forum.snapcraft.io/mborzecki/{size}/4382_2.png"},"links":[{"url":"https://github.com/snapcore/snapd/pull/4766","title":"userd: add an OpenFile method for launching local files with xdg-open by jhenstridge · Pull Request #4766 · snapcore/snapd · GitHub","internal":false,"attachment":false,"reflection":false,"clicks":29,"user_id":393,"domain":"github.com","root_domain":"github.com"},{"url":"https://github.com/snapcore/core/pull/82","title":"xdg-open: add implementation capable of opening local files by jhenstridge · Pull Request #82 · snapcore/core · GitHub","internal":false,"attachment":false,"reflection":false,"clicks":27,"user_id":393,"domain":"github.com","root_domain":"github.com"},{"url":"https://github.com/snapcore/snapd/pull/11200","title":null,"internal":false,"attachment":false,"reflection":false,"clicks":8,"user_id":1497,"domain":"github.com","root_domain":"github.com"},{"url":"https://www.freedesktop.org/wiki/Specifications/file-manager-interface/","title":"file-manager-interface","internal":false,"attachment":false,"reflection":false,"clicks":8,"user_id":475,"domain":"www.freedesktop.org","root_domain":"freedesktop.org"},{"url":"https://discourse.joplinapp.org/t/open-zotero-program-as-link-zotero-select-inside-joplin/23012","title":null,"internal":false,"attachment":false,"reflection":false,"clicks":5,"user_id":8016,"domain":"discourse.joplinapp.org","root_domain":"joplinapp.org"},{"url":"https://forum.obsidian.md/t/zotero-link-on-snap/33446","title":null,"internal":false,"attachment":false,"reflection":false,"clicks":5,"user_id":12025,"domain":"forum.obsidian.md","root_domain":"obsidian.md"}]}}