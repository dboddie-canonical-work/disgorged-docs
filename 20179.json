{"post_stream":{"posts":[{"id":79232,"name":"Graham Morrison","username":"degville","avatar_template":"/user_avatar/forum.snapcraft.io/degville/{size}/2021_2.png","created_at":"2020-09-24T09:11:58.311Z","cooked":"\u003cp\u003eInterfaces allow (or deny) access to a resource outside of a snap’s confinement, but a they’re also designed to be convenient for users.\u003c/p\u003e\n\u003cp\u003ePart of this convenience is whether an interface is permitted to be automatically connected when a snap installed, or whether a snap can request to include certain super-privileged interfaces to begin with.\u003c/p\u003e\n\u003chr\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#heading--autoconnect\"\u003eAuto-connections\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"#heading--process\"\u003eAuto-connection process\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#heading--constraints\"\u003eAuto-connection constraints\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#heading--default--provider\"\u003eAuto-connection with a default-provider\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#heading--super\"\u003eSuper-privileged interfaces\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"heading--autoconnect\"\u003eAuto-connections\u003c/h2\u003e\n\u003cp\u003eThe snapd \u003ca href=\"https://forum.snapcraft.io/t/interface-management/6154#heading--auto-connections\"\u003einterface auto-connection\u003c/a\u003e mechanism has been designed to remove the need for a manual connection when:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eAn interface is commonly required and has no or low security implications\u003c/li\u003e\n\u003cli\u003eA snap provides, or accesses, libraries or other content vital to the operation of a snap\u003c/li\u003e\n\u003cli\u003eThere is a need to connect snaps that are designed to work together\u003c/li\u003e\n\u003cli\u003eStore-set policy applies to let a given snap use an interface that would not be generally auto-connected.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"heading--process\"\u003eAuto-connection process\u003c/h3\u003e\n\u003cp\u003eWhenever a snap is installed or refreshed, snapd will review its unconnected plugs and their candidate slots for auto-connection potential. It does the same for its slots and candidate plugs.\u003c/p\u003e\n\u003cp\u003eIf there is exactly one candidate slot for a plug then an interface connection is automatically performed. The requirement for exactly one candidate can be changed.\u003c/p\u003e\n\u003cp\u003eFor an interface, the candidate plug and slot pairs are determined using constraints-based rules. The rule language can either express allowing or denying an auto-connection, with the latter taking precedence.\u003c/p\u003e\n\u003cp\u003eRules are either built-in to snapd or conveyed via assertions (signed documents) that correspond to a given snap (snap-declarations). The rules are scoped and attached to the slot or plug side of an interface at either one of those two levels:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003ethe built-in level\u003c/li\u003e\n\u003cli\u003ethe snap level\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eTo simplify reasoning about their effect, the rules from the different levels/scopes are not merged but rather prioritised according to level:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003esnap plug (from the snap-declaration of the snap with the plug)\u003c/li\u003e\n\u003cli\u003esnap slot (from the snap-declaration of the snap sporting the slot)\u003c/li\u003e\n\u003cli\u003ebuilt-in plug level\u003c/li\u003e\n\u003cli\u003ebuilt-in slot level\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eFrom snap plug to the built-in slot level, it’s the level that first provides any rules that determines the rules used and considered. This ordering reflects a scale from the most specific usage perspective, snap plug side consumption, to the most general, builtin slot rules.\u003c/p\u003e\n\u003cp\u003eBuilt-in rules embody the general policy of whether and when an interface should be auto-connected, and as such, these are documented with the interface. Consequently, snap-declaration rules express store-set policy.\u003c/p\u003e\n\u003cp\u003eA user can also issue “snap connect” and “snap disconnect” commands. In particular, a manual “snap disconnect” of an auto-connection will inhibit a subsequent refresh from re-establishing the auto-connection.\u003c/p\u003e\n\u003ch3 id=\"heading--constraints\"\u003eAuto-connection constraints\u003c/h3\u003e\n\u003cp\u003eThe following is an example built-in auto-connection rule (attached to the slot-side) for the content interface:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-yaml\"\u003eslots:\n  content:\n    allow-auto-connection:\n      plug-publisher-id:\n        - $SLOT_PUBLISHER_ID\n      plug-attributes:\n        content: $SLOT(content)\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThe above example permits an auto-connection if:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003ethe publisher of both the slot and plug side snaps is the same\u003c/li\u003e\n\u003cli\u003ethe “content” attribute on the plug and slot match\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eThe rule language allows us to deny or allow auto-connections with the following constraints:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eattributes values on the plug and slot (based on regular expressions or special expressions like $SLOT(content) in the example)\u003c/li\u003e\n\u003cli\u003esnap type or the snap-id of the plug or slot snap\u003c/li\u003e\n\u003cli\u003epublisher of the slot or plug snap\u003c/li\u003e\n\u003cli\u003eactual names of the plug or slot\u003c/li\u003e\n\u003cli\u003ewhether the device is a classic system or not\u003c/li\u003e\n\u003cli\u003ethe actual store in use or device model (for IoT use-cases)\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eFurther lists of constraints or values can be used in the rule language to express alternation (logical OR).\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003e\u003cimg src=\"https://forum.snapcraft.io/images/emoji/emoji_one/information_source.png?v=9\" title=\":information_source:\" class=\"emoji\" alt=\":information_source:\"\u003e  The same language rules can be used to define rules other than interface auto-connections, including default policy for ordinary connections and installations, and to override policy for the more sensitive interfaces.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003ch3 id=\"heading--default-provider\"\u003eAuto-connection with a default-provider\u003c/h3\u003e\n\u003cp\u003eA content interface plug can specify a default-provider. This is the name of a snap that can be installed to fulfil the plug’s need. If there isn’t a slot with the content label of the plug on the system the specified snap will be installed before the snap with the plug. However, if there is a slot on the system that already has the content label, any default-provider specified by a content interface plug is ignored. If the specified snap is already installed but there is no slot with the content label, the specified snap will be upgraded instead under the assumption that a newer version may start providing the label.\u003c/p\u003e\n\u003cp\u003eThe default-provider mechanism triggers the installation or upgrade of the provider snap as described but it does not include an implied connection. The auto-connection will only happen by means of and if it is permitted by the general auto-connection mechanism.\u003c/p\u003e","post_number":1,"post_type":1,"updated_at":"2023-04-14T09:20:35.553Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":213,"reads":54,"readers_count":53,"score":1090.6,"yours":false,"topic_id":20179,"topic_slug":"the-interface-auto-connection-mechanism","display_username":"Graham Morrison","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":20,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://forum.snapcraft.io/t/interface-management/6154","internal":true,"reflection":false,"title":"Interface management","clicks":0},{"url":"https://forum.snapcraft.io/t/the-home-interface/7838","internal":true,"reflection":true,"title":"The home interface","clicks":1},{"url":"https://forum.snapcraft.io/t/the-gpio-interface/7829","internal":true,"reflection":true,"title":"The gpio interface","clicks":1},{"url":"https://forum.snapcraft.io/t/the-pwm-control-interface/32908","internal":true,"reflection":true,"title":"The pwm-control interface","clicks":0},{"url":"https://forum.snapcraft.io/t/the-acrn-interface/30982","internal":true,"reflection":true,"title":"The acrn interface","clicks":0},{"url":"https://forum.snapcraft.io/t/the-bool-file-interface/7803","internal":true,"reflection":true,"title":"The bool-file interface","clicks":0},{"url":"https://forum.snapcraft.io/t/hardware-io-interfaces/35421/2","internal":true,"reflection":true,"title":"Hardware IO interfaces","clicks":0},{"url":"https://forum.snapcraft.io/t/the-pwm-interface/25857","internal":true,"reflection":true,"title":"The pwm interface","clicks":0},{"url":"https://forum.snapcraft.io/t/the-content-interface/1074","internal":true,"reflection":true,"title":"The content interface","clicks":0},{"url":"https://forum.snapcraft.io/t/snap-documentation/11127","internal":true,"reflection":true,"title":"Snap documentation","clicks":0},{"url":"https://forum.snapcraft.io/t/the-cups-interface/26453","internal":true,"reflection":true,"title":"The cups interface","clicks":0},{"url":"https://forum.snapcraft.io/t/hardware-io-interfaces/35421","internal":true,"reflection":true,"title":"Hardware IO interfaces","clicks":0},{"url":"https://forum.snapcraft.io/t/supported-interfaces/7744","internal":true,"reflection":true,"title":"Supported interfaces","clicks":0}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":true,"admin":true,"staff":true,"user_id":2772,"hidden":false,"trust_level":4,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":true,"last_wiki_edit":"2023-04-14T09:20:35.578Z","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":122049,"name":"Robert P. J. Day","username":"rpjday","avatar_template":"/user_avatar/forum.snapcraft.io/rpjday/{size}/8457_2.png","created_at":"2023-04-05T13:40:05.842Z","cooked":"\u003cp\u003eI think this page should have a title including the phrase “auto”, as it explains the auto-connection mechanism, does it not?\u003c/p\u003e","post_number":2,"post_type":1,"updated_at":"2023-04-05T13:40:05.842Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":13,"readers_count":12,"score":7.4,"yours":false,"topic_id":20179,"topic_slug":"the-interface-auto-connection-mechanism","display_username":"Robert P. J. Day","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"","bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":11710,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":122055,"name":"Graham Morrison","username":"degville","avatar_template":"/user_avatar/forum.snapcraft.io/degville/{size}/2021_2.png","created_at":"2023-04-05T14:37:24.294Z","cooked":"\u003cp\u003eGreat suggestion - I have absolutely no idea why i didn’t do this in the first place. Thanks!\u003c/p\u003e","post_number":3,"post_type":1,"updated_at":"2023-04-05T14:37:24.294Z","reply_count":1,"reply_to_post_number":2,"quote_count":0,"incoming_link_count":1,"reads":11,"readers_count":10,"score":12.0,"yours":false,"topic_id":20179,"topic_slug":"the-interface-auto-connection-mechanism","display_username":"Graham Morrison","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"rpjday","avatar_template":"/user_avatar/forum.snapcraft.io/rpjday/{size}/8457_2.png"},"bookmarked":false,"actions_summary":[],"moderator":true,"admin":true,"staff":true,"user_id":2772,"hidden":false,"trust_level":4,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":122102,"name":"Samuele Pedroni","username":"pedronis","avatar_template":"/user_avatar/forum.snapcraft.io/pedronis/{size}/46_2.png","created_at":"2023-04-06T09:03:41.075Z","cooked":"\u003cp\u003ethe last section “Super-privileged interfaces” feels slightly out of place with the new title though\u003c/p\u003e","post_number":4,"post_type":1,"updated_at":"2023-04-06T09:03:41.075Z","reply_count":1,"reply_to_post_number":3,"quote_count":0,"incoming_link_count":0,"reads":11,"readers_count":10,"score":7.0,"yours":false,"topic_id":20179,"topic_slug":"the-interface-auto-connection-mechanism","display_username":"Samuele Pedroni","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"degville","avatar_template":"/user_avatar/forum.snapcraft.io/degville/{size}/2021_2.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":13,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":122103,"name":"Graham Morrison","username":"degville","avatar_template":"/user_avatar/forum.snapcraft.io/degville/{size}/2021_2.png","created_at":"2023-04-06T09:05:31.540Z","cooked":"\u003cp\u003eThanks Samuele. I had the same thought. I think it’s probably best to break this out into its own page - it’ll require a little more work as those pages link back here, but I’ll create a task to do this.\u003c/p\u003e","post_number":5,"post_type":1,"updated_at":"2023-04-06T09:05:31.540Z","reply_count":0,"reply_to_post_number":4,"quote_count":0,"incoming_link_count":3,"reads":9,"readers_count":8,"score":16.6,"yours":false,"topic_id":20179,"topic_slug":"the-interface-auto-connection-mechanism","display_username":"Graham Morrison","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"pedronis","avatar_template":"/user_avatar/forum.snapcraft.io/pedronis/{size}/46_2.png"},"bookmarked":false,"actions_summary":[],"moderator":true,"admin":true,"staff":true,"user_id":2772,"hidden":false,"trust_level":4,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false}],"stream":[79232,122049,122055,122102,122103]},"timeline_lookup":[[1,995],[2,72],[3,71]],"suggested_topics":[{"id":33074,"title":"Basic snapcraft.yaml example","fancy_title":"Basic snapcraft.yaml example","slug":"basic-snapcraft-yaml-example","posts_count":2,"reply_count":0,"highest_post_number":2,"image_url":null,"created_at":"2022-12-13T10:53:46.449Z","last_posted_at":"2022-12-15T10:45:49.975Z","bumped":true,"bumped_at":"2022-12-13T10:53:46.598Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags":[],"like_count":0,"views":887,"category_id":15,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest single","description":"Original Poster, Most Recent Poster","user":{"id":2772,"username":"degville","name":"Graham Morrison","avatar_template":"/user_avatar/forum.snapcraft.io/degville/{size}/2021_2.png"}}]},{"id":34319,"title":"Docker to Snap","fancy_title":"Docker to Snap","slug":"docker-to-snap","posts_count":3,"reply_count":1,"highest_post_number":3,"image_url":null,"created_at":"2023-03-13T16:55:10.581Z","last_posted_at":"2023-03-20T13:38:28.789Z","bumped":true,"bumped_at":"2023-03-20T13:38:28.789Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags":[],"like_count":3,"views":484,"category_id":15,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":13647,"username":"giusebar18","name":"","avatar_template":"/letter_avatar/giusebar18/{size}/5_6d6f4cde2641c35611d5cac2fb97c77e.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":2772,"username":"degville","name":"Graham Morrison","avatar_template":"/user_avatar/forum.snapcraft.io/degville/{size}/2021_2.png"}}]},{"id":31049,"title":"Snapcraft How-to guides","fancy_title":"Snapcraft How-to guides","slug":"snapcraft-how-to-guides","posts_count":1,"reply_count":0,"highest_post_number":1,"image_url":null,"created_at":"2022-07-27T10:34:11.548Z","last_posted_at":"2022-07-27T10:34:11.663Z","bumped":true,"bumped_at":"2023-04-05T08:45:13.573Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags":[],"like_count":0,"views":1200,"category_id":15,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest single","description":"Original Poster, Most Recent Poster","user":{"id":2772,"username":"degville","name":"Graham Morrison","avatar_template":"/user_avatar/forum.snapcraft.io/degville/{size}/2021_2.png"}}]},{"id":30605,"title":"Build and Publish a ROS Snap with GitHub Actions","fancy_title":"Build and Publish a ROS Snap with GitHub Actions","slug":"build-and-publish-a-ros-snap-with-github-actions","posts_count":2,"reply_count":0,"highest_post_number":2,"image_url":null,"created_at":"2022-06-22T15:28:55.512Z","last_posted_at":"2022-06-22T15:43:40.132Z","bumped":true,"bumped_at":"2022-06-22T15:43:40.132Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags":[],"like_count":2,"views":1300,"category_id":15,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest single","description":"Original Poster, Most Recent Poster","user":{"id":11989,"username":"gbeuzeboc","name":"","avatar_template":"/letter_avatar/gbeuzeboc/{size}/5_6d6f4cde2641c35611d5cac2fb97c77e.png"}}]},{"id":35223,"title":"How to perform a reboot from a snap with strict confinement","fancy_title":"How to perform a reboot from a snap with strict confinement","slug":"how-to-perform-a-reboot-from-a-snap-with-strict-confinement","posts_count":3,"reply_count":1,"highest_post_number":3,"image_url":null,"created_at":"2023-05-19T14:33:58.466Z","last_posted_at":"2023-05-21T10:37:46.676Z","bumped":true,"bumped_at":"2023-05-21T10:37:46.676Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags":[],"like_count":3,"views":106,"category_id":15,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":14015,"username":"dboddie","name":"David Boddie","avatar_template":"/user_avatar/forum.snapcraft.io/dboddie/{size}/9564_2.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":14590,"username":"apklu","name":"Arjun Suhass","avatar_template":"/letter_avatar/apklu/{size}/5_6d6f4cde2641c35611d5cac2fb97c77e.png"}}]}],"tags":[],"id":20179,"title":"The interface auto-connection mechanism","fancy_title":"The interface auto-connection mechanism","posts_count":5,"created_at":"2020-09-24T09:11:58.169Z","views":4211,"reply_count":3,"like_count":1,"last_posted_at":"2023-04-06T09:05:31.540Z","visible":true,"closed":false,"archived":false,"has_summary":false,"archetype":"regular","slug":"the-interface-auto-connection-mechanism","category_id":15,"word_count":970,"deleted_at":null,"user_id":2772,"featured_link":null,"pinned_globally":false,"pinned_at":null,"pinned_until":null,"image_url":null,"slow_mode_seconds":0,"draft":null,"draft_key":"topic_20179","draft_sequence":null,"unpinned":null,"pinned":false,"current_post_number":1,"highest_post_number":5,"deleted_by":null,"actions_summary":[{"id":4,"count":0,"hidden":false,"can_act":false},{"id":8,"count":0,"hidden":false,"can_act":false},{"id":7,"count":0,"hidden":false,"can_act":false}],"chunk_size":20,"bookmarked":false,"topic_timer":null,"message_bus_last_id":0,"participant_count":3,"show_read_indicator":false,"thumbnails":null,"details":{"notification_level":1,"participants":[{"id":2772,"username":"degville","name":"Graham Morrison","avatar_template":"/user_avatar/forum.snapcraft.io/degville/{size}/2021_2.png","post_count":3,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null},{"id":13,"username":"pedronis","name":"Samuele Pedroni","avatar_template":"/user_avatar/forum.snapcraft.io/pedronis/{size}/46_2.png","post_count":1,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null},{"id":11710,"username":"rpjday","name":"Robert P. J. Day","avatar_template":"/user_avatar/forum.snapcraft.io/rpjday/{size}/8457_2.png","post_count":1,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null}],"created_by":{"id":2772,"username":"degville","name":"Graham Morrison","avatar_template":"/user_avatar/forum.snapcraft.io/degville/{size}/2021_2.png"},"last_poster":{"id":2772,"username":"degville","name":"Graham Morrison","avatar_template":"/user_avatar/forum.snapcraft.io/degville/{size}/2021_2.png"},"links":[{"url":"https://forum.snapcraft.io/t/the-gpio-interface/7829","title":"The gpio interface","internal":true,"attachment":false,"reflection":true,"clicks":1,"user_id":2772,"domain":"forum.snapcraft.io","root_domain":"snapcraft.io"},{"url":"https://forum.snapcraft.io/t/the-home-interface/7838","title":"The home interface","internal":true,"attachment":false,"reflection":true,"clicks":1,"user_id":2772,"domain":"forum.snapcraft.io","root_domain":"snapcraft.io"}]}}