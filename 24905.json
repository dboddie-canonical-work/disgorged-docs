{"post_stream":{"posts":[{"id":94053,"name":"Graham Morrison","username":"degville","avatar_template":"/user_avatar/forum.snapcraft.io/degville/{size}/2021_2.png","created_at":"2021-06-09T12:19:53.631Z","cooked":"\u003cp\u003eMost snaps use strict confinement to isolate both their execution environments and their data from your system (see \u003ca href=\"/t/snap-confinement/6233\"\u003eSnap Confinement\u003c/a\u003e for further details).\u003c/p\u003e\n\u003cp\u003eThis confinement is an important security feature, but it can affect how and where you access a snap’s files, including:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003econfiguration files\u003c/li\u003e\n\u003cli\u003euser documents\u003c/li\u003e\n\u003cli\u003einternal databases\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eA snap which needs user-access to files should use an \u003ca href=\"/t/interface-management/6154\"\u003einterface\u003c/a\u003e, such as the \u003ca href=\"/t/the-home-interface/7838\"\u003ehome interface\u003c/a\u003e, to bridge this confinement gap.\u003c/p\u003e\n\u003cp\u003eBut it can also be helpful to understand how snaps operate on and access data, even without an interface, and this is outlined below:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"#heading--installation\"\u003eSnap installation\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#heading--system\"\u003eSystem data\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#heading--user\"\u003eUser data\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#heading--other\"\u003eOther locations\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#heading--delete\"\u003eDeleting a snap\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003ch2 id=\"heading--installation\"\u003eSnap installation\u003c/h2\u003e\n\u003cp\u003eWhen a user \u003ca href=\"/t/getting-started/3876#heading--install-snap\"\u003einstalls a snap\u003c/a\u003e from the \u003ca href=\"https://snapcraft.io/store\"\u003eSnap Store\u003c/a\u003e, the following happens:\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eThe \u003ca href=\"/t/glossary/14612#heading--snapd\"\u003esnapd services\u003c/a\u003e downloads the snap as a single file – a compressed SquashFS archive with a \u003cem\u003e.snap\u003c/em\u003e suffix.\u003c/li\u003e\n\u003cli\u003eThe snap file is uncompressed and mounted as a read-only filesystem under \u003cem\u003e/snap.\u003c/em\u003e   See \u003ca href=\"/t/the-snap-format/698\"\u003eThe snap format\u003c/a\u003e for further details on what is included in a snap.\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eBy design, the read-only filesystem cannot provide a persistent experience between application launches, which is why snaps also have writable parts for system data and for user data.\u003c/p\u003e\n\u003ch2 id=\"heading--system\"\u003eSystem data\u003c/h2\u003e\n\u003cp\u003eWithin the snap environment, \u003ca href=\"/t/environment-variables/7983\"\u003eenvironment variables\u003c/a\u003e are used to reference different accessible locations.  The following variables and default referenced locations are used to store system data:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003eSNAP_COMMON\u003c/strong\u003e: \u003ccode\u003e/var/snap/\u0026lt;snap name\u0026gt;/common\u003c/code\u003e\nThis directory is owned and writable by root and is used to store data that is common across multiple \u003ca href=\"/t/glossary/14612#heading--revision\"\u003erevisions\u003c/a\u003e of the snap (e.g.: revision 6, revision 7, etc.).\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003eSNAP_ DATA\u003c/strong\u003e: \u003ccode\u003e/var/snap/\u0026lt;snap name\u0026gt;/\u0026lt;revision number\u0026gt;\u003c/code\u003e\nThis location it is also used to store data, mostly information utilised by background application and services, for logging, and other tasks that require persistence between snap launches.\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eA \u003ca href=\"/t/snapshots/9468\"\u003esnapshot\u003c/a\u003e of \u003ccode\u003eSNAP_DATA\u003c/code\u003e and \u003ccode\u003eSNAP_COMMON\u003c/code\u003e is created and restored when performing a snap update (refresh) or revert operation. The contents of \u003ccode\u003eSNAP_DATA\u003c/code\u003e is specific to the snap revision, while the contents of \u003ccode\u003eSNAP_COMMON\u003c/code\u003e is applicable to all revisions and will overwrite the contents of \u003ccode\u003eSNAP_COMMON\u003c/code\u003e when restored. See \u003ca href=\"/t/snapshots/9468#heading--what-is-stored\"\u003eWhat a snapshot stores\u003c/a\u003e for more details.\u003c/p\u003e\n\u003ch2 id=\"heading--user\"\u003eUser data\u003c/h2\u003e\n\u003cp\u003eSnaps can also contain user data. As with the system data environment variables, \u003ccode\u003eSNAP_COMMON\u003c/code\u003e and \u003ccode\u003eSNAP_DATA\u003c/code\u003e,  the following user-specific environment variables point to directories for user data:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003eSNAP_USER_COMMON\u003c/strong\u003e: \u003ccode\u003e/home/\u0026lt;username\u0026gt;/snap/\u0026lt;snap name\u0026gt;/common\u003c/code\u003e\nThis location maps user data across each revision of a snap. It is not backed up or restored on snap operations.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003eSNAP_USER_DATA\u003c/strong\u003e: \u003ccode\u003e/home/\u0026lt;username\u0026gt;/snap/\u0026lt;snap name\u0026gt;/\u0026lt;revision\u0026gt;\u003c/code\u003e\nThis contains any user data that the snap writes to its own home. This is \u003cem\u003ein contrast\u003c/em\u003e to what the Linux user would consider \u003cem\u003etheir\u003c/em\u003e home. It is important to note this distinction, because it can be useful, and even important when users decide to perform maintenance operations with their snaps (like removal). By default, every snap will use a symlink \u003cem\u003ecurrent\u003c/em\u003e, pointing to the latest available revision.\u003c/p\u003e\n\u003cp\u003eSnaps without the home interface declared and/or connected cannot access the disk. The \u003ccode\u003e$SNAP_USER_DATA\u003c/code\u003e directory will still be created and exist in the user’s home directory but it can contain no files\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eBoth \u003ccode\u003eSNAP_USER_COMMON\u003c/code\u003e and \u003ccode\u003eSNAP_USER_DATA\u003c/code\u003e only become available after a snap has been run once.\u003c/p\u003e\n\u003ch3\u003eUbuntu Core\u003c/h3\u003e\n\u003cp\u003eOn Ubuntu Core, the \u003cstrong\u003e\u003ccode\u003eSNAP_SAVE_DATA\u003c/code\u003e\u003c/strong\u003e environment variable within a snap’s environment points to a snap-specific location on the \u003ca href=\"https://ubuntu.com/core/docs/uc20/inside#heading--layouts\"\u003eubuntu-save\u003c/a\u003e volume. This is used to store data that can be accessed during recovery or after re-installation of Ubuntu Core.\u003c/p\u003e\n\u003cp\u003eFor example, in the reference Ubuntu Core 22 image, from within the \u003cem\u003ehello-world\u003c/em\u003e snap, \u003ccode\u003eSNAP_SAVE_DATA\u003c/code\u003e has the following value:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003eSNAP_SAVE_DATA=/var/lib/snapd/save/snap/hello-world\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThe above environment variable references a mount point at the following location:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-bash\"\u003e$ mount | grep \"snapd/save\"\n/dev/mapper/ubuntu-save on /var/lib/snapd/save type ext4 (rw,relatime)\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2 id=\"heading--other\"\u003eOther locations\u003c/h2\u003e\n\u003cp\u003eThere are several other directories you should be aware of:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cstrong\u003e\u003ccode\u003e/var/lib/snapd/cache\u003c/code\u003e\u003c/strong\u003e\nThis is the working cache and is used to minimise download size and speed-up refreshes.\u003c/li\u003e\n\u003cli\u003e\n\u003cstrong\u003e\u003ccode\u003e/var/lib/snapd/snaps\u003c/code\u003e\u003c/strong\u003e\nContains all the versions of snaps installed on your system.\u003c/li\u003e\n\u003cli\u003e\n\u003cstrong\u003e\u003ccode\u003e/var/lib/snapd/snapshots/\u003c/code\u003e\u003c/strong\u003e\nContains both the manually generated and automatically generated \u003ca href=\"/t/snapshots/9468\"\u003esnapshots\u003c/a\u003e.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"heading--delete\"\u003eDeleting a snap\u003c/h2\u003e\n\u003cp\u003eWhen deleting and removing a snap from a system, the following will happen:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eThe snap will be unmounted and no longer shown under \u003ccode\u003e/snap\u003c/code\u003e.\u003c/li\u003e\n\u003cli\u003eThe data under \u003ccode\u003e/var/snap/\u0026lt;snap name\u0026gt;/\u003c/code\u003e and \u003ccode\u003e/home/\u0026lt;username\u0026gt;/snap/\u003c/code\u003e will be deleted. However, a copy is be retained as a \u003ca href=\"/t/snapshots/9468\"\u003esnapshot\u003c/a\u003e for 30-days (except on Ubuntu Core systems), allowing data to be restored or manually retrieved.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003ca href=\"/t/snapshots/9468\"\u003eSnapshot management\u003c/a\u003e can be used to restore data, or unzip the archives, and only copy the data you consider necessary. With the right permissions, you can also create your own backup routine, which copies the important data like application databases, configurations or similar content to a backup path.\u003c/p\u003e\n\u003cp\u003eTo remove a snap without generating a snapshot, use the additional ‘–purge’ argument:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-bash\"\u003e$ sudo snap remove vlc --purge\nvlc removed\n\u003c/code\u003e\u003c/pre\u003e","post_number":1,"post_type":1,"updated_at":"2023-06-09T11:37:55.100Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":206,"reads":23,"readers_count":22,"score":1034.6,"yours":false,"topic_id":24905,"topic_slug":"data-locations","display_username":"Graham Morrison","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":10,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://forum.snapcraft.io/t/interface-management/6154","internal":true,"reflection":false,"title":"Interface management","clicks":5},{"url":"https://forum.snapcraft.io/t/snapshots/9468","internal":true,"reflection":false,"title":"Snapshots","clicks":3},{"url":"https://forum.snapcraft.io/t/snap-confinement/6233","internal":true,"reflection":false,"title":"Snap confinement","clicks":1},{"url":"https://forum.snapcraft.io/t/the-snap-format/698","internal":true,"reflection":false,"title":"The snap format","clicks":1},{"url":"https://forum.snapcraft.io/t/the-home-interface/7838","internal":true,"reflection":false,"title":"The home interface","clicks":1},{"url":"https://snapcraft.io/store","internal":false,"reflection":false,"title":"Install Linux apps using the Snap Store | Snapcraft","clicks":0},{"url":"https://forum.snapcraft.io/t/environment-variables/7983","internal":true,"reflection":false,"title":"Environment variables","clicks":0},{"url":"https://ubuntu.com/core/docs/uc20/inside#heading--layouts","internal":false,"reflection":false,"title":"Inside Ubuntu Core | Ubuntu","clicks":0},{"url":"https://forum.snapcraft.io/t/glossary/14612","internal":true,"reflection":false,"title":"Glossary","clicks":0},{"url":"https://forum.snapcraft.io/t/quickstart-guide/3876","internal":true,"reflection":true,"title":"Quickstart guide","clicks":0},{"url":"https://forum.snapcraft.io/t/revisions/35613","internal":true,"reflection":true,"title":"Revisions","clicks":0},{"url":"https://forum.snapcraft.io/t/security-policy-and-sandboxing/554","internal":true,"reflection":true,"title":"Security policy and sandboxing","clicks":0},{"url":"https://forum.snapcraft.io/t/excluding-data-from-snapshots/33643","internal":true,"reflection":true,"title":"Excluding data from snapshots","clicks":0},{"url":"https://forum.snapcraft.io/t/getting-started/3876/15","internal":true,"reflection":true,"title":"Quickstart guide","clicks":0},{"url":"https://forum.snapcraft.io/t/snap-documentation/11127","internal":true,"reflection":true,"title":"Snap documentation","clicks":0},{"url":"https://forum.snapcraft.io/t/quickstart-guide/3876/23","internal":true,"reflection":true,"title":"Quickstart guide","clicks":0}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":true,"admin":true,"staff":true,"user_id":2772,"hidden":false,"trust_level":4,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":true,"last_wiki_edit":"2023-06-09T11:37:55.119Z","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false}],"stream":[94053]},"timeline_lookup":[[1,737]],"suggested_topics":[{"id":34416,"title":"How to guides for classic confinement","fancy_title":"How to guides for classic confinement","slug":"how-to-guides-for-classic-confinement","posts_count":3,"reply_count":1,"highest_post_number":3,"image_url":null,"created_at":"2023-03-21T09:34:37.128Z","last_posted_at":"2023-03-21T09:50:37.844Z","bumped":true,"bumped_at":"2023-03-21T09:50:37.844Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags":["how-to"],"like_count":0,"views":461,"category_id":15,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":14015,"username":"dboddie","name":"David Boddie","avatar_template":"/user_avatar/forum.snapcraft.io/dboddie/{size}/9564_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":2772,"username":"degville","name":"Graham Morrison","avatar_template":"/user_avatar/forum.snapcraft.io/degville/{size}/2021_2.png"}}]},{"id":32908,"title":"The pwm-control interface","fancy_title":"The pwm-control interface","slug":"the-pwm-control-interface","posts_count":8,"reply_count":6,"highest_post_number":9,"image_url":null,"created_at":"2022-11-30T08:57:34.695Z","last_posted_at":"2023-03-30T09:37:54.031Z","bumped":true,"bumped_at":"2023-03-30T09:37:54.031Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags":[],"like_count":3,"views":552,"category_id":15,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":8707,"username":"zyga","name":"Zygmunt Krynicki","avatar_template":"/user_avatar/forum.snapcraft.io/zyga/{size}/4376_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":2772,"username":"degville","name":"Graham Morrison","avatar_template":"/user_avatar/forum.snapcraft.io/degville/{size}/2021_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":11710,"username":"rpjday","name":"Robert P. J. Day","avatar_template":"/user_avatar/forum.snapcraft.io/rpjday/{size}/8457_2.png"}}]},{"id":31152,"title":"Refresh awareness","fancy_title":"Refresh awareness","slug":"refresh-awareness","posts_count":5,"reply_count":1,"highest_post_number":5,"image_url":null,"created_at":"2022-08-04T11:13:22.373Z","last_posted_at":"2023-02-16T16:37:34.392Z","bumped":true,"bumped_at":"2023-02-16T16:37:34.392Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags":[],"like_count":2,"views":1730,"category_id":15,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":2772,"username":"degville","name":"Graham Morrison","avatar_template":"/user_avatar/forum.snapcraft.io/degville/{size}/2021_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":13385,"username":"ernstklrb","name":"","avatar_template":"/letter_avatar/ernstklrb/{size}/5_6d6f4cde2641c35611d5cac2fb97c77e.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":1903,"username":"dhoomakethu","name":"dhoomkethu","avatar_template":"/letter_avatar/dhoomakethu/{size}/5_6d6f4cde2641c35611d5cac2fb97c77e.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":1418,"username":"galgalesh","name":"Merlijn Sebrechts","avatar_template":"/user_avatar/forum.snapcraft.io/galgalesh/{size}/9283_2.png"}}]},{"id":34026,"title":"Tutorial is outdated or something","fancy_title":"Tutorial is outdated or something","slug":"tutorial-is-outdated-or-something","posts_count":4,"reply_count":1,"highest_post_number":4,"image_url":null,"created_at":"2023-02-23T15:15:25.641Z","last_posted_at":"2023-02-23T17:40:48.223Z","bumped":true,"bumped_at":"2023-02-23T17:40:48.223Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags":[],"like_count":1,"views":123,"category_id":15,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":14103,"username":"Greg","name":"Greg Timmons","avatar_template":"/letter_avatar/greg/{size}/5_6d6f4cde2641c35611d5cac2fb97c77e.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":11310,"username":"mr_cal","name":"Callahan Kovacs","avatar_template":"/user_avatar/forum.snapcraft.io/mr_cal/{size}/8466_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":2772,"username":"degville","name":"Graham Morrison","avatar_template":"/user_avatar/forum.snapcraft.io/degville/{size}/2021_2.png"}}]},{"id":34548,"title":"ROS distributions with no extensions","fancy_title":"ROS distributions with no extensions","slug":"ros-distributions-with-no-extensions","posts_count":3,"reply_count":1,"highest_post_number":3,"image_url":null,"created_at":"2023-03-30T20:47:55.438Z","last_posted_at":"2023-03-31T14:22:33.616Z","bumped":true,"bumped_at":"2023-03-31T14:22:33.616Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags":[],"like_count":0,"views":398,"category_id":15,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":13647,"username":"giusebar18","name":"","avatar_template":"/letter_avatar/giusebar18/{size}/5_6d6f4cde2641c35611d5cac2fb97c77e.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":2772,"username":"degville","name":"Graham Morrison","avatar_template":"/user_avatar/forum.snapcraft.io/degville/{size}/2021_2.png"}}]}],"tags":[],"id":24905,"title":"Data locations","fancy_title":"Data locations","posts_count":1,"created_at":"2021-06-09T12:19:53.435Z","views":3234,"reply_count":0,"like_count":1,"last_posted_at":"2021-06-09T12:19:53.631Z","visible":true,"closed":false,"archived":false,"has_summary":false,"archetype":"regular","slug":"data-locations","category_id":15,"word_count":941,"deleted_at":null,"user_id":2772,"featured_link":null,"pinned_globally":false,"pinned_at":null,"pinned_until":null,"image_url":null,"slow_mode_seconds":0,"draft":null,"draft_key":"topic_24905","draft_sequence":null,"unpinned":null,"pinned":false,"current_post_number":1,"highest_post_number":1,"deleted_by":null,"actions_summary":[{"id":4,"count":0,"hidden":false,"can_act":false},{"id":8,"count":0,"hidden":false,"can_act":false},{"id":7,"count":0,"hidden":false,"can_act":false}],"chunk_size":20,"bookmarked":false,"topic_timer":null,"message_bus_last_id":0,"participant_count":1,"show_read_indicator":false,"thumbnails":null,"details":{"notification_level":1,"participants":[{"id":2772,"username":"degville","name":"Graham Morrison","avatar_template":"/user_avatar/forum.snapcraft.io/degville/{size}/2021_2.png","post_count":1,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null}],"created_by":{"id":2772,"username":"degville","name":"Graham Morrison","avatar_template":"/user_avatar/forum.snapcraft.io/degville/{size}/2021_2.png"},"last_poster":{"id":2772,"username":"degville","name":"Graham Morrison","avatar_template":"/user_avatar/forum.snapcraft.io/degville/{size}/2021_2.png"},"links":[{"url":"https://forum.snapcraft.io/t/interface-management/6154","title":"Interface management","internal":true,"attachment":false,"reflection":false,"clicks":5,"user_id":2772,"domain":"forum.snapcraft.io","root_domain":"snapcraft.io"},{"url":"https://forum.snapcraft.io/t/snapshots/9468","title":"Snapshots","internal":true,"attachment":false,"reflection":false,"clicks":3,"user_id":2772,"domain":"forum.snapcraft.io","root_domain":"snapcraft.io"},{"url":"https://forum.snapcraft.io/t/snap-confinement/6233","title":"Snap confinement","internal":true,"attachment":false,"reflection":false,"clicks":1,"user_id":2772,"domain":"forum.snapcraft.io","root_domain":"snapcraft.io"},{"url":"https://forum.snapcraft.io/t/the-home-interface/7838","title":"The home interface","internal":true,"attachment":false,"reflection":false,"clicks":1,"user_id":2772,"domain":"forum.snapcraft.io","root_domain":"snapcraft.io"},{"url":"https://forum.snapcraft.io/t/the-snap-format/698","title":"The snap format","internal":true,"attachment":false,"reflection":false,"clicks":1,"user_id":2772,"domain":"forum.snapcraft.io","root_domain":"snapcraft.io"}]}}