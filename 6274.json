{"post_stream":{"posts":[{"id":29402,"name":"Alan Pope","username":"popey","avatar_template":"/user_avatar/forum.snapcraft.io/popey/{size}/7793_2.png","created_at":"2018-07-06T11:57:29.666Z","cooked":"\u003cp\u003eBuilding snaps can be a new experience for many developers. Here’s some tips which can help you successfully, reliably build snaps for publication in the Snap Store. This is a wiki post so feel free to add more tips to this page, to help build successful snaps!\u003c/p\u003e\n\u003ch2 id=\"heading--build-environment\"\u003eBuild Environment\u003c/h2\u003e\n\u003cp\u003eSnaps are built to run on top of a \u003ca href=\"/t/base-snaps/11198\"\u003ebase snap\u003c/a\u003e runtime. This base is provided by an automatically-installed snap. Currently the most widely used core image is based on Ubuntu 22.04 LTS.\u003c/p\u003e\n\u003ch2 id=\"heading--missing-libraries\"\u003eMissing libraries\u003c/h2\u003e\n\u003cp\u003eMost applications will need additional libraries added to the snap in order to function correctly. As the developer of the application, you’re best placed to know which libraries you need to stage in the snap.\u003c/p\u003e\n\u003cp\u003eSometimes  when a snap is initially built, libraries are missing because they were not explicitly specified by the developer. There’s a couple of ways to bundle required libraries in a snap, both of which are covered below, but more details can be found in \u003ca href=\"/t/build-and-staging-dependencies/11451\"\u003eBuild and staging dependencies\u003c/a\u003e.\u003c/p\u003e\n\u003ch3 id=\"heading--staging-packages\"\u003eStaging Packages\u003c/h3\u003e\n\u003cp\u003eIt’s common to bundle required libraries in snaps using \u003ccode\u003estage-packages\u003c/code\u003e in the \u003ccode\u003esnapcraft.yaml\u003c/code\u003e. These are standard package names from the Ubuntu repository used by the base snap. For those unfamiliar with the naming of packages in the Ubuntu archive, the package search at \u003ca href=\"https://packages.ubuntu.com/\"\u003ehttps://packages.ubuntu.com/\u003c/a\u003e can be an invaluable tool. It enables search for files (such as libraries) within packages in the archive. Just be sure to choose the Ubuntu version used by your base snap when searching.\u003c/p\u003e\n\u003cp\u003eDon’t include \u003ccode\u003eglibc\u003c/code\u003e/\u003ccode\u003elibc6\u003c/code\u003e in your list of staged packages. Doing so is unnecessary as the base snap contains those libraries already, and bundling them into your snap can cause unexpected behaviour.\u003c/p\u003e\n\u003ch3 id=\"heading--staging-individual-libraries\"\u003eStaging individual libraries\u003c/h3\u003e\n\u003cp\u003eSome application developers already have ‘vendored’ libraries which they’ve well tested with their application. If that’s the case, those libraries can be bundled in the snap in a similar fashion. Place the libraries in the \u003ccode\u003e/lib\u003c/code\u003e folder when constructing the snap. This folder is added to the \u003ccode\u003eLD_LIBRARY_PATH\u003c/code\u003e and as such should be found successfully  by your application when the resulting snap is installed on an end-user computer\u003c/p\u003e\n\u003ch2 id=\"heading--interfaces\"\u003eInterfaces\u003c/h2\u003e\n\u003cp\u003eWhen applications are confined in a snap, they have a restricted view of the world, with access to resources governed by standard Linux security features apparmor and seccomp. Interfaces enable the developer to choose specify what access is required by the application to resources such as the network, camera, joystick and X11 display.\u003c/p\u003e\n\u003ch3 id=\"heading--identifying-missing-interfaces\"\u003eIdentifying missing interfaces\u003c/h3\u003e\n\u003cp\u003eThe full list of \u003ca href=\"/t/supported-interfaces/7744\"\u003einterfaces\u003c/a\u003e details the capabilities enabled by each. Developers should consult this list to identify the necessary interfaces required by their application. When an interface is omitted, this may result in the application misbehaving.\u003c/p\u003e\n\u003cp\u003eThe Snap security team have provided a tool to debug these situations. Install the tool with \u003ccode\u003esnap install snappy-debug\u003c/code\u003e. This helps identify missing interfaces by reporting on application security failures, and will make suggestions on how to improve the snap, perhaps by adding interfaces.\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eIn a terminal, run \u003ccode\u003esnappy-debug\u003c/code\u003e\n\u003c/li\u003e\n\u003cli\u003eLaunch the snapped application (in another terminal)\u003c/li\u003e\n\u003cli\u003eOperate the snapped application until failure occurs\u003c/li\u003e\n\u003cli\u003eExamine the output from \u003ccode\u003esnappy-debug\u003c/code\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eTypically the output will report on failed attempts to access system resources, and suggest additional interfaces which should be specified. If so, add the interface(s) listed and rebuild the snap.\u003c/p\u003e\n\u003ch2 id=\"heading--iterating-without-rebuilding\"\u003eIterating without rebuilding\u003c/h2\u003e\n\u003cp\u003eIt can be time consuming to iterate over a snap via tweaking the \u003ccode\u003esnapcraft.yaml\u003c/code\u003e or application itself, then rebuild and re-install.\u003c/p\u003e\n\u003cp\u003eTo speed a build up, see \u003ca href=\"/t/iterating-over-a-build/12143\"\u003eIterating over a build\u003c/a\u003e for build and testing best-practices.\u003c/p\u003e","post_number":1,"post_type":1,"updated_at":"2023-06-13T10:31:55.603Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":287,"reads":48,"readers_count":47,"score":1539.6,"yours":false,"topic_id":6274,"topic_slug":"debugging-building-snaps","display_username":"Alan Pope","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":12,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://forum.snapcraft.io/t/iterating-over-a-build/12143","internal":true,"reflection":false,"title":"Iterating over a build","clicks":17},{"url":"https://packages.ubuntu.com/","internal":false,"reflection":false,"title":"Ubuntu – Ubuntu Packages Search","clicks":3},{"url":"https://forum.snapcraft.io/t/build-and-staging-dependencies/11451","internal":true,"reflection":false,"title":"Build and staging dependencies","clicks":3},{"url":"https://forum.snapcraft.io/t/base-snaps/11198","internal":true,"reflection":false,"title":"Base snaps","clicks":0},{"url":"https://forum.snapcraft.io/t/supported-interfaces/7744","internal":true,"reflection":false,"title":"Supported interfaces","clicks":0},{"url":"https://forum.snapcraft.io/t/troubleshoot-snap-building/11938","internal":true,"reflection":true,"title":"Troubleshoot snap building","clicks":3},{"url":"https://forum.snapcraft.io/t/snapcraft-overview/8940","internal":true,"reflection":true,"title":"Snapcraft overview","clicks":1},{"url":"https://forum.snapcraft.io/t/flutter-snapcraft-yaml/22150/5","internal":true,"reflection":true,"title":"Flutter Snapcraft.yaml","clicks":0},{"url":"https://forum.snapcraft.io/t/can-someone-tell-me-how-the-snapcraft-triage-process-works/22315/2","internal":true,"reflection":true,"title":"Can someone tell me how the Snapcraft triage process works?","clicks":0},{"url":"https://forum.snapcraft.io/t/adding-interfaces/13123","internal":true,"reflection":true,"title":"Adding interfaces","clicks":0},{"url":"https://forum.snapcraft.io/t/documentation-roadmap/8763","internal":true,"reflection":true,"title":"Documentation roadmap","clicks":0},{"url":"https://forum.snapcraft.io/t/no-autolink-for-headings-in-topic/7358/3","internal":true,"reflection":true,"title":"No autolink for headings in topic","clicks":0},{"url":"https://forum.snapcraft.io/t/debugging-snaps/18420/3","internal":true,"reflection":true,"title":"Debugging snaps","clicks":0},{"url":"https://forum.snapcraft.io/t/snap-documentation/11127","internal":true,"reflection":true,"title":"Snap documentation","clicks":0},{"url":"https://forum.snapcraft.io/t/request-for-classic-confinement-for-quicknav/23173/6","internal":true,"reflection":true,"title":"Request for classic confinement for Quicknav","clicks":0}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":4}],"moderator":true,"admin":false,"staff":true,"user_id":14,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":true,"last_wiki_edit":"2023-06-13T10:31:55.623Z","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":124940,"name":"Farshid Tavakolizadeh","username":"farshidtz","avatar_template":"/letter_avatar/farshidtz/{size}/5_6d6f4cde2641c35611d5cac2fb97c77e.png","created_at":"2023-06-13T10:04:21.221Z","cooked":"\u003caside class=\"quote no-group\" data-username=\"popey\" data-post=\"1\" data-topic=\"6274\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"20\" height=\"20\" src=\"https://forum.snapcraft.io/user_avatar/forum.snapcraft.io/popey/40/7793_2.png\" class=\"avatar\"\u003e popey:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eAs such we recommend all snaps are built either on bare metal running Ubuntu 16.04 LTS, or in a virtual machine or container running Ubuntu 16.04.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eThis is a very outdated recommendation.\u003c/p\u003e","post_number":2,"post_type":1,"updated_at":"2023-06-13T10:04:21.221Z","reply_count":1,"reply_to_post_number":null,"quote_count":1,"incoming_link_count":0,"reads":5,"readers_count":4,"score":6.0,"yours":false,"topic_id":6274,"topic_slug":"debugging-building-snaps","display_username":"Farshid Tavakolizadeh","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":11344,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":124944,"name":"Graham Morrison","username":"degville","avatar_template":"/user_avatar/forum.snapcraft.io/degville/{size}/2021_2.png","created_at":"2023-06-13T10:34:04.111Z","cooked":"\u003cp\u003eWow, it really is. Thank you for letting us know. I’ve edited those references ou, but overall, I’m not sure how useful this page is any more. It duplicates a lot of information detailed elsewhere. We’ll look into dropping it.\u003c/p\u003e","post_number":3,"post_type":1,"updated_at":"2023-06-13T10:34:04.111Z","reply_count":0,"reply_to_post_number":2,"quote_count":0,"incoming_link_count":0,"reads":4,"readers_count":3,"score":0.8,"yours":false,"topic_id":6274,"topic_slug":"debugging-building-snaps","display_username":"Graham Morrison","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"farshidtz","avatar_template":"/letter_avatar/farshidtz/{size}/5_6d6f4cde2641c35611d5cac2fb97c77e.png"},"bookmarked":false,"actions_summary":[],"moderator":true,"admin":true,"staff":true,"user_id":2772,"hidden":false,"trust_level":4,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false}],"stream":[29402,124940,124944]},"timeline_lookup":[[1,1806],[2,3]],"suggested_topics":[{"id":35613,"title":"Revisions","fancy_title":"Revisions","slug":"revisions","posts_count":1,"reply_count":0,"highest_post_number":1,"image_url":null,"created_at":"2023-06-14T12:00:32.246Z","last_posted_at":"2023-06-14T12:00:32.397Z","bumped":true,"bumped_at":"2023-06-15T11:10:36.858Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags":[],"like_count":0,"views":44,"category_id":15,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest single","description":"Original Poster, Most Recent Poster","user":{"id":2772,"username":"degville","name":"Graham Morrison","avatar_template":"/user_avatar/forum.snapcraft.io/degville/{size}/2021_2.png"}}]},{"id":34740,"title":"Super-privileged interfaces","fancy_title":"Super-privileged interfaces","slug":"super-privileged-interfaces","posts_count":1,"reply_count":0,"highest_post_number":1,"image_url":null,"created_at":"2023-04-14T09:20:24.510Z","last_posted_at":"2023-04-14T09:20:24.656Z","bumped":true,"bumped_at":"2023-04-14T09:29:53.927Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags":[],"like_count":0,"views":260,"category_id":15,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest single","description":"Original Poster, Most Recent Poster","user":{"id":2772,"username":"degville","name":"Graham Morrison","avatar_template":"/user_avatar/forum.snapcraft.io/degville/{size}/2021_2.png"}}]},{"id":34097,"title":"Set up classic confinement for a Makefile project","fancy_title":"Set up classic confinement for a Makefile project","slug":"set-up-classic-confinement-for-a-makefile-project","posts_count":2,"reply_count":0,"highest_post_number":2,"image_url":null,"created_at":"2023-02-27T16:32:26.768Z","last_posted_at":"2023-02-27T16:34:00.750Z","bumped":true,"bumped_at":"2023-02-27T16:34:00.750Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags":["how-to"],"like_count":0,"views":762,"category_id":15,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest single","description":"Original Poster, Most Recent Poster","user":{"id":14015,"username":"dboddie","name":"David Boddie","avatar_template":"/user_avatar/forum.snapcraft.io/dboddie/{size}/9564_2.png"}}]},{"id":30905,"title":"Snapcraft documentation","fancy_title":"Snapcraft documentation","slug":"snapcraft-documentation","posts_count":1,"reply_count":0,"highest_post_number":1,"image_url":null,"created_at":"2022-07-15T11:05:45.374Z","last_posted_at":"2022-07-15T11:05:45.528Z","bumped":true,"bumped_at":"2023-02-17T19:55:21.024Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags":[],"like_count":0,"views":1532,"category_id":15,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest single","description":"Original Poster, Most Recent Poster","user":{"id":2772,"username":"degville","name":"Graham Morrison","avatar_template":"/user_avatar/forum.snapcraft.io/degville/{size}/2021_2.png"}}]},{"id":32986,"title":"Snapcraft installation and setup","fancy_title":"Snapcraft installation and setup","slug":"snapcraft-installation-and-setup","posts_count":2,"reply_count":0,"highest_post_number":2,"image_url":null,"created_at":"2022-12-07T12:49:10.746Z","last_posted_at":"2022-12-15T10:43:52.370Z","bumped":true,"bumped_at":"2022-12-07T12:49:10.898Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags":[],"like_count":0,"views":819,"category_id":15,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest single","description":"Original Poster, Most Recent Poster","user":{"id":2772,"username":"degville","name":"Graham Morrison","avatar_template":"/user_avatar/forum.snapcraft.io/degville/{size}/2021_2.png"}}]}],"tags":[],"id":6274,"title":"Debugging building snaps","fancy_title":"Debugging building snaps","posts_count":3,"created_at":"2018-07-06T11:57:29.493Z","views":8869,"reply_count":1,"like_count":4,"last_posted_at":"2023-06-13T10:34:04.111Z","visible":true,"closed":false,"archived":false,"has_summary":false,"archetype":"regular","slug":"debugging-building-snaps","category_id":15,"word_count":754,"deleted_at":null,"user_id":14,"featured_link":null,"pinned_globally":false,"pinned_at":null,"pinned_until":null,"image_url":null,"slow_mode_seconds":0,"draft":null,"draft_key":"topic_6274","draft_sequence":null,"unpinned":null,"pinned":false,"current_post_number":1,"highest_post_number":3,"deleted_by":null,"actions_summary":[{"id":4,"count":0,"hidden":false,"can_act":false},{"id":8,"count":0,"hidden":false,"can_act":false},{"id":7,"count":0,"hidden":false,"can_act":false}],"chunk_size":20,"bookmarked":false,"topic_timer":null,"message_bus_last_id":11,"participant_count":3,"show_read_indicator":false,"thumbnails":null,"details":{"notification_level":1,"participants":[{"id":14,"username":"popey","name":"Alan Pope","avatar_template":"/user_avatar/forum.snapcraft.io/popey/{size}/7793_2.png","post_count":1,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null},{"id":2772,"username":"degville","name":"Graham Morrison","avatar_template":"/user_avatar/forum.snapcraft.io/degville/{size}/2021_2.png","post_count":1,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null},{"id":11344,"username":"farshidtz","name":"Farshid Tavakolizadeh","avatar_template":"/letter_avatar/farshidtz/{size}/5_6d6f4cde2641c35611d5cac2fb97c77e.png","post_count":1,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null}],"created_by":{"id":14,"username":"popey","name":"Alan Pope","avatar_template":"/user_avatar/forum.snapcraft.io/popey/{size}/7793_2.png"},"last_poster":{"id":2772,"username":"degville","name":"Graham Morrison","avatar_template":"/user_avatar/forum.snapcraft.io/degville/{size}/2021_2.png"},"links":[{"url":"https://forum.snapcraft.io/t/iterating-over-a-build/12143","title":"Iterating over a build","internal":true,"attachment":false,"reflection":false,"clicks":17,"user_id":14,"domain":"forum.snapcraft.io","root_domain":"snapcraft.io"},{"url":"https://forum.snapcraft.io/t/build-and-staging-dependencies/11451","title":"Build and staging dependencies","internal":true,"attachment":false,"reflection":false,"clicks":3,"user_id":14,"domain":"forum.snapcraft.io","root_domain":"snapcraft.io"},{"url":"https://forum.snapcraft.io/t/troubleshoot-snap-building/11938","title":"Troubleshoot snap building","internal":true,"attachment":false,"reflection":true,"clicks":3,"user_id":2772,"domain":"forum.snapcraft.io","root_domain":"snapcraft.io"},{"url":"https://packages.ubuntu.com/","title":"Ubuntu – Ubuntu Packages Search","internal":false,"attachment":false,"reflection":false,"clicks":3,"user_id":14,"domain":"packages.ubuntu.com","root_domain":"ubuntu.com"},{"url":"https://forum.snapcraft.io/t/snapcraft-overview/8940","title":"Snapcraft overview","internal":true,"attachment":false,"reflection":true,"clicks":1,"user_id":2772,"domain":"forum.snapcraft.io","root_domain":"snapcraft.io"}]}}