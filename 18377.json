{"post_stream":{"posts":[{"id":73152,"name":"Umayr","username":"Nightmayr","avatar_template":"/letter_avatar/nightmayr/{size}/5_6d6f4cde2641c35611d5cac2fb97c77e.png","created_at":"2020-06-21T19:45:58.327Z","cooked":"\u003cp\u003eI have added KDE plasma integration to my snap in order for it to look at home on KDE, however when trying to open a file, the native file picker produces an error (see screenshot). I get these AppArmour denials from \u003ccode\u003esnappy-debug\u003c/code\u003e:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003eTime: Jun 21 20:20:27\nLog: apparmor=\"DENIED\" operation=\"dbus_signal\"  bus=\"session\" path=\"/\" interface=\"org.kde.KDirNotify\" member=\"leftDirectory\" mask=\"send\" name=\"org.freedesktop.DBus\" pid=6289 label=\"snap.yuzu.yuzu\" peer_pid=1397 peer_label=\"unconfined\"\nDBus access\n\n= AppArmor =\nTime: Jun 21 20:20:27\nLog: apparmor=\"DENIED\" operation=\"dbus_signal\"  bus=\"session\" path=\"/\" interface=\"org.kde.KDirNotify\" member=\"enteredDirectory\" mask=\"send\" name=\"org.freedesktop.DBus\" pid=6289 label=\"snap.yuzu.yuzu\" peer_pid=1397 peer_label=\"unconfined\"\nDBus access\n\n= AppArmor =\nTime: Jun 21 20:20:27\nLog: apparmor=\"DENIED\" operation=\"dbus_signal\"  bus=\"session\" path=\"/\" interface=\"org.kde.KDirNotify\" member=\"leftDirectory\" mask=\"send\" name=\"org.freedesktop.DBus\" pid=6289 label=\"snap.yuzu.yuzu\" peer_pid=1397 peer_label=\"unconfined\"\nDBus access\n\n= AppArmor =\nTime: Jun 21 20:20:27\nLog: apparmor=\"DENIED\" operation=\"dbus_signal\"  bus=\"session\" path=\"/\" interface=\"org.kde.KDirNotify\" member=\"enteredDirectory\" mask=\"send\" name=\"org.freedesktop.DBus\" pid=6289 label=\"snap.yuzu.yuzu\" peer_pid=1397 peer_label=\"unconfined\"\nDBus access\n\n= AppArmor =\nTime: Jun 21 20:20:27\nLog: apparmor=\"DENIED\" operation=\"dbus_method_call\"  bus=\"session\" path=\"/KLauncher\" interface=\"org.kde.KSlaveLauncher\" member=\"requestSlave\" mask=\"send\" name=\"org.kde.klauncher5\" pid=6289 label=\"snap.yuzu.yuzu\" peer_pid=1361 peer_label=\"unconfined\"\nDBus access\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cimg src=\"https://forum.snapcraft.io/images/transparent.png\" alt=\"klauncherError\" data-orig-src=\"upload://5tjOrANaWdbUco3KAyb7dzGAeMR.png\" width=\"689\" height=\"379\"\u003e\u003c/p\u003e\n\u003cp\u003eSnapcraft.yaml: \u003ca href=\"https://github.com/Nightmayr/yuzu-snap/blob/master/snap/snapcraft.yaml\" rel=\"noopener nofollow ugc\"\u003ehttps://github.com/Nightmayr/yuzu-snap/blob/master/snap/snapcraft.yaml\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eTested on Kubuntu 20.04\u003c/p\u003e","post_number":1,"post_type":1,"updated_at":"2020-06-22T17:48:22.892Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":1210,"reads":18,"readers_count":17,"score":6003.6,"yours":false,"topic_id":18377,"topic_slug":"kde-error-unable-to-create-io-slave-cannot-talk-to-klauncher","display_username":"Umayr","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":3,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://github.com/Nightmayr/yuzu-snap/blob/master/snap/snapcraft.yaml","internal":false,"reflection":false,"title":"yuzu-snap/snapcraft.yaml at master · Nightmayr/yuzu-snap · GitHub","clicks":10},{"url":"https://forum.snapcraft.io/t/process-for-reviewing-classic-confinement-snaps/1460","internal":true,"reflection":true,"title":"Process for reviewing classic confinement snaps","clicks":0}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":7388,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":73269,"name":"Jamie Strandboge","username":"jdstrand","avatar_template":"/user_avatar/forum.snapcraft.io/jdstrand/{size}/6376_2.png","created_at":"2020-06-22T18:42:02.296Z","cooked":"\u003cp\u003eFrom the klauncher man page: “\u003cstrong\u003eklauncher\u003c/strong\u003e is a daemon responsible for service activation in KDE. It operates closely together with the kdeinit master process to start new processes. KDE applications communicate with \u003cstrong\u003eklauncher\u003c/strong\u003e via DCOP to start new applications or services.”\u003c/p\u003e\n\u003cp\u003eNaively adding the DBus accesses for klauncher to snapd would allow immediate confinement escape so klauncher and snapd would need to integrate in some manner for this to work with strict confinement (this is not entirely dissimilar to the issues gvfs/gio face).\u003c/p\u003e\n\u003cp\u003eThe simple answer to your question is “don’t use klauncher” but I understand that isn’t helpful. There are other KDE applications in the store so perhaps the KDE snap developers can comment?\u003c/p\u003e","post_number":2,"post_type":1,"updated_at":"2020-06-22T18:42:02.296Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":17,"reads":19,"readers_count":18,"score":88.8,"yours":false,"topic_id":18377,"topic_slug":"kde-error-unable-to-create-io-slave-cannot-talk-to-klauncher","display_username":"Jamie Strandboge","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"","bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":21,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":73545,"name":"Umayr","username":"Nightmayr","avatar_template":"/letter_avatar/nightmayr/{size}/5_6d6f4cde2641c35611d5cac2fb97c77e.png","created_at":"2020-06-25T17:10:44.818Z","cooked":"\u003cp\u003eThanks \u003ca class=\"mention\" href=\"/u/jdstrand\"\u003e@jdstrand\u003c/a\u003e, I managed to find a workaround and it was a case of your simple answer of “don’t use klauncher”. The addition I made was to add the environment variable \u003ccode\u003eKDE_FORK_SLAVES: 1\u003c/code\u003e. With the variable set the klauncher error disappeared but a new error of being unable to find the \u003ccode\u003ekioslave5\u003c/code\u003e binary appeared. I tried setting \u003ccode\u003eKF5_LIBEXEC_DIR: \"$SNAP/usr/lib/$SNAPCRAFT_ARCH_TRIPLET/libexec/kf5\"\u003c/code\u003e but this didn’t help even though most examples I’ve seen use this variable to allow discovery of the binary. What worked for me was appending the directory to PATH, \u003ccode\u003ePATH: \"$PATH:$SNAP/usr/lib/$SNAPCRAFT_ARCH_TRIPLET/libexec/kf5\"\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003eI managed to find out about this by looking at the VLC snapcraft.yaml: \u003ca href=\"https://github.com/videolan/vlc/tree/master/extras/package/snap\" rel=\"noopener nofollow ugc\"\u003ehttps://github.com/videolan/vlc/tree/master/extras/package/snap\u003c/a\u003e.\u003cbr\u003e\nThey seem to set these variables in a wrapper script \u003ccode\u003evlc-snap-wrapper.sh\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003eThe end result is that the native file picker works in KDE with these changes.\u003c/p\u003e","post_number":3,"post_type":1,"updated_at":"2020-06-27T10:38:48.728Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":114,"reads":18,"readers_count":17,"score":618.6,"yours":false,"topic_id":18377,"topic_slug":"kde-error-unable-to-create-io-slave-cannot-talk-to-klauncher","display_username":"Umayr","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://github.com/videolan/vlc/tree/master/extras/package/snap","internal":false,"reflection":false,"title":"vlc/extras/package/snap at master · videolan/vlc · GitHub","clicks":13},{"url":"https://forum.snapcraft.io/t/process-for-reviewing-classic-confinement-snaps/1460","internal":true,"reflection":true,"title":"Process for reviewing classic confinement snaps","clicks":1}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":7388,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":true},{"id":73602,"name":"Jamie Strandboge","username":"jdstrand","avatar_template":"/user_avatar/forum.snapcraft.io/jdstrand/{size}/6376_2.png","created_at":"2020-06-26T14:44:27.701Z","cooked":"\u003cp\u003e\u003ca class=\"mention\" href=\"/u/galgalesh\"\u003e@galgalesh\u003c/a\u003e - I wonder if \u003ca href=\"https://forum.snapcraft.io/t/the-kde-neon-extension/13752\" class=\"inline-onebox\"\u003eThe kde-neon extension\u003c/a\u003e or similar should be updated to make this easier for people?\u003c/p\u003e","post_number":4,"post_type":1,"updated_at":"2020-06-26T14:44:27.701Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":6,"reads":15,"readers_count":14,"score":38.0,"yours":false,"topic_id":18377,"topic_slug":"kde-error-unable-to-create-io-slave-cannot-talk-to-klauncher","display_username":"Jamie Strandboge","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://forum.snapcraft.io/t/the-kde-neon-extension/13752","internal":true,"reflection":false,"title":"The kde-neon extension","clicks":6}],"read":true,"user_title":"","bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":21,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":73647,"name":"Merlijn Sebrechts","username":"galgalesh","avatar_template":"/user_avatar/forum.snapcraft.io/galgalesh/{size}/9283_2.png","created_at":"2020-06-27T18:44:42.163Z","cooked":"\u003cp\u003eI think this is already fixed in the \u003ca href=\"https://forum.snapcraft.io/t/the-kde-neon-extension/13752\"\u003ekde-neon extension\u003c/a\u003e. Apps created with that extension have the native file chooser by default on kde and I haven’t encountered that error message.\u003c/p\u003e\n\u003cp\u003eVLC and OP’s app don’t use that extension.\u003c/p\u003e","post_number":5,"post_type":1,"updated_at":"2020-06-27T18:45:09.399Z","reply_count":0,"reply_to_post_number":4,"quote_count":0,"incoming_link_count":6,"reads":12,"readers_count":11,"score":32.4,"yours":false,"topic_id":18377,"topic_slug":"kde-error-unable-to-create-io-slave-cannot-talk-to-klauncher","display_username":"Merlijn Sebrechts","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://forum.snapcraft.io/t/the-kde-neon-extension/13752","internal":true,"reflection":false,"title":"The kde-neon extension","clicks":25}],"read":true,"user_title":null,"reply_to_user":{"username":"jdstrand","avatar_template":"/user_avatar/forum.snapcraft.io/jdstrand/{size}/6376_2.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1418,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false}],"stream":[73152,73269,73545,73602,73647]},"timeline_lookup":[[1,1089],[2,1088],[3,1085],[4,1084],[5,1083]],"suggested_topics":[{"id":32010,"title":"Access to Wayland socket","fancy_title":"Access to Wayland socket","slug":"access-to-wayland-socket","posts_count":4,"reply_count":2,"highest_post_number":4,"image_url":null,"created_at":"2022-09-30T16:58:25.476Z","last_posted_at":"2022-09-30T21:32:37.274Z","bumped":true,"bumped_at":"2022-09-30T21:32:37.274Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags":[],"like_count":0,"views":339,"category_id":13,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":13163,"username":"bram","name":"Bram Stolk","avatar_template":"/user_avatar/forum.snapcraft.io/bram/{size}/9153_2.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":430,"username":"kenvandine","name":"Ken VanDine","avatar_template":"/user_avatar/forum.snapcraft.io/kenvandine/{size}/4387_2.png"}}]},{"id":31071,"title":"Launch browser if user clicks on \"Launch\"","fancy_title":"Launch browser if user clicks on \u0026ldquo;Launch\u0026rdquo;","slug":"launch-browser-if-user-clicks-on-launch","posts_count":2,"reply_count":0,"highest_post_number":2,"image_url":null,"created_at":"2022-07-28T14:52:46.002Z","last_posted_at":"2022-07-28T17:45:16.511Z","bumped":true,"bumped_at":"2022-07-28T17:45:16.511Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags":[],"like_count":1,"views":204,"category_id":13,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":null,"description":"Original Poster","user":{"id":8352,"username":"mirasoft","name":"Mirasoft","avatar_template":"/user_avatar/forum.snapcraft.io/mirasoft/{size}/6735_2.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":286,"username":"lucyllewy","name":"Lucy Llewellyn","avatar_template":"/user_avatar/forum.snapcraft.io/lucyllewy/{size}/9782_2.png"}}]},{"id":32164,"title":"Snap only shell script and tar.gz file","fancy_title":"Snap only shell script and tar.gz file","slug":"snap-only-shell-script-and-tar-gz-file","posts_count":2,"reply_count":0,"highest_post_number":2,"image_url":null,"created_at":"2022-10-13T17:45:40.217Z","last_posted_at":"2022-10-14T12:55:11.487Z","bumped":true,"bumped_at":"2022-10-14T12:55:11.487Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags":[],"like_count":1,"views":248,"category_id":13,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":13354,"username":"mr.tux","name":"m. ugur","avatar_template":"/letter_avatar/mr.tux/{size}/5_6d6f4cde2641c35611d5cac2fb97c77e.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":3793,"username":"cmatsuoka","name":"Claudio Matsuoka","avatar_template":"/user_avatar/forum.snapcraft.io/cmatsuoka/{size}/9338_2.png"}}]},{"id":32579,"title":"Are progressive releases still experimental?","fancy_title":"Are progressive releases still experimental?","slug":"are-progressive-releases-still-experimental","posts_count":2,"reply_count":0,"highest_post_number":2,"image_url":null,"created_at":"2022-11-08T21:06:39.653Z","last_posted_at":"2022-12-06T13:53:16.978Z","bumped":true,"bumped_at":"2022-12-06T13:53:16.978Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags":[],"like_count":4,"views":228,"category_id":13,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":5923,"username":"bmw","name":"Brad Warren","avatar_template":"/letter_avatar/bmw/{size}/5_6d6f4cde2641c35611d5cac2fb97c77e.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":33,"username":"roadmr","name":"Daniel Manrique","avatar_template":"/user_avatar/forum.snapcraft.io/roadmr/{size}/4385_2.png"}}]},{"id":32199,"title":"The 'base' for the snap with 'classic 'confinement","fancy_title":"The \u0026lsquo;base\u0026rsquo; for the snap with \u0026lsquo;classic \u0026lsquo;confinement","slug":"the-base-for-the-snap-with-classic-confinement","posts_count":2,"reply_count":0,"highest_post_number":2,"image_url":null,"created_at":"2022-10-17T08:16:07.662Z","last_posted_at":"2022-10-17T09:41:18.236Z","bumped":true,"bumped_at":"2022-10-17T09:41:18.236Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags":[],"like_count":0,"views":248,"category_id":13,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":12958,"username":"EchoResponse","name":"","avatar_template":"/letter_avatar/echoresponse/{size}/5_6d6f4cde2641c35611d5cac2fb97c77e.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":9,"username":"ogra","name":"Oliver Grawert","avatar_template":"/user_avatar/forum.snapcraft.io/ogra/{size}/22_2.png"}}]}],"tags":[],"id":18377,"title":"KDE Error: Unable to create io-slave. Cannot talk to klauncher","fancy_title":"KDE Error: Unable to create io-slave. Cannot talk to klauncher","posts_count":5,"created_at":"2020-06-21T19:45:58.187Z","views":3269,"reply_count":1,"like_count":1,"last_posted_at":"2020-06-27T18:44:42.163Z","visible":true,"closed":false,"archived":false,"has_summary":false,"archetype":"regular","slug":"kde-error-unable-to-create-io-slave-cannot-talk-to-klauncher","category_id":13,"word_count":615,"deleted_at":null,"user_id":7388,"featured_link":null,"pinned_globally":false,"pinned_at":null,"pinned_until":null,"image_url":null,"slow_mode_seconds":0,"draft":null,"draft_key":"topic_18377","draft_sequence":null,"unpinned":null,"pinned":false,"current_post_number":1,"highest_post_number":5,"deleted_by":null,"actions_summary":[{"id":4,"count":0,"hidden":false,"can_act":false},{"id":8,"count":0,"hidden":false,"can_act":false},{"id":7,"count":0,"hidden":false,"can_act":false}],"chunk_size":20,"bookmarked":false,"topic_timer":null,"message_bus_last_id":0,"participant_count":3,"show_read_indicator":false,"thumbnails":null,"accepted_answer":{"post_number":3,"username":"Nightmayr","excerpt":"Thanks \u003ca class=\"mention\" href=\"/u/jdstrand\"\u003e@jdstrand\u003c/a\u003e, I managed to find a workaround and it was a case of your simple answer of “don’t use klauncher”. The addition I made was to add the environment variable KDE_FORK_SLAVES: 1. With the variable set the klauncher error disappeared but a new error of being unable to find the kioslave5 b\u0026hellip;"},"details":{"notification_level":1,"participants":[{"id":21,"username":"jdstrand","name":"Jamie Strandboge","avatar_template":"/user_avatar/forum.snapcraft.io/jdstrand/{size}/6376_2.png","post_count":2,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null},{"id":7388,"username":"Nightmayr","name":"Umayr","avatar_template":"/letter_avatar/nightmayr/{size}/5_6d6f4cde2641c35611d5cac2fb97c77e.png","post_count":2,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null},{"id":1418,"username":"galgalesh","name":"Merlijn Sebrechts","avatar_template":"/user_avatar/forum.snapcraft.io/galgalesh/{size}/9283_2.png","post_count":1,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null}],"created_by":{"id":7388,"username":"Nightmayr","name":"Umayr","avatar_template":"/letter_avatar/nightmayr/{size}/5_6d6f4cde2641c35611d5cac2fb97c77e.png"},"last_poster":{"id":1418,"username":"galgalesh","name":"Merlijn Sebrechts","avatar_template":"/user_avatar/forum.snapcraft.io/galgalesh/{size}/9283_2.png"},"links":[{"url":"https://forum.snapcraft.io/t/the-kde-neon-extension/13752","title":"The kde-neon extension","internal":true,"attachment":false,"reflection":false,"clicks":31,"user_id":21,"domain":"forum.snapcraft.io","root_domain":"snapcraft.io"},{"url":"https://github.com/videolan/vlc/tree/master/extras/package/snap","title":"vlc/extras/package/snap at master · videolan/vlc · GitHub","internal":false,"attachment":false,"reflection":false,"clicks":13,"user_id":7388,"domain":"github.com","root_domain":"github.com"},{"url":"https://github.com/Nightmayr/yuzu-snap/blob/master/snap/snapcraft.yaml","title":"yuzu-snap/snapcraft.yaml at master · Nightmayr/yuzu-snap · GitHub","internal":false,"attachment":false,"reflection":false,"clicks":10,"user_id":7388,"domain":"github.com","root_domain":"github.com"},{"url":"https://forum.snapcraft.io/t/process-for-reviewing-classic-confinement-snaps/1460","title":"Process for reviewing classic confinement snaps","internal":true,"attachment":false,"reflection":true,"clicks":1,"user_id":21,"domain":"forum.snapcraft.io","root_domain":"snapcraft.io"}]}}