{"post_stream":{"posts":[{"id":77074,"name":"林博仁(Buo-ren, Lin)","username":"Lin-Buo-Ren","avatar_template":"/user_avatar/forum.snapcraft.io/lin-buo-ren/{size}/4612_2.png","created_at":"2020-08-18T04:57:14.710Z","cooked":"\u003cp\u003eI’m snapping an application that specifically needs the original \u003ccode\u003eHOME\u003c/code\u003e environment variable set by the user, which is rewritten as \u003ccode\u003e~/snap/$SNAP_NAME/$SNAP_REVISION\u003c/code\u003e by snapd.\u003c/p\u003e\n\u003cp\u003e\u003cem\u003eNot\u003c/em\u003e the one registered in the user’s password database entry(\u003ccode\u003egetent passwd $USER | cut -d: -f6\u003c/code\u003e) to be specific, is it possible?\u003c/p\u003e\n\u003cp\u003eI am expecting the snap runtime ships a \u003ccode\u003eSNAP_ORIGINAL_HOME\u003c/code\u003e environment variable for such usage, but nothing useful is found in the runtime environment.\u003c/p\u003e","post_number":1,"post_type":1,"updated_at":"2020-08-18T07:45:18.525Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":761,"reads":84,"readers_count":83,"score":3776.6,"yours":false,"topic_id":19475,"topic_slug":"any-way-to-acquire-the-originally-set-home-environment-variable","display_username":"林博仁(Buo-ren, Lin)","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":2,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://forum.snapcraft.io/t/environment-variables/7983","internal":true,"reflection":true,"title":"Environment variables","clicks":1}],"read":true,"user_title":"","bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1417,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":77076,"name":"James Henstridge","username":"jamesh","avatar_template":"/user_avatar/forum.snapcraft.io/jamesh/{size}/3947_2.png","created_at":"2020-08-18T07:40:12.859Z","cooked":"\u003cp\u003eThere isn’t anything like that.  The \u003ccode\u003esnap run\u003c/code\u003e command overwrites the HOME environment variable without stashing the original value anywhere.\u003c/p\u003e\n\u003cp\u003eThe value it sets it to is based on the home directory found in the password database too, so you can’t deduce it from the new value of \u003ccode\u003e$HOME\u003c/code\u003e either.\u003c/p\u003e","post_number":2,"post_type":1,"updated_at":"2020-08-18T07:40:12.859Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":3,"reads":81,"readers_count":80,"score":46.0,"yours":false,"topic_id":19475,"topic_slug":"any-way-to-acquire-the-originally-set-home-environment-variable","display_username":"James Henstridge","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":393,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":77078,"name":"林博仁(Buo-ren, Lin)","username":"Lin-Buo-Ren","avatar_template":"/user_avatar/forum.snapcraft.io/lin-buo-ren/{size}/4612_2.png","created_at":"2020-08-18T07:45:00.495Z","cooked":"\u003cp\u003eJust to be specific the application I tried to snap is \u003ca href=\"https://github.com/ericpruitt/homeishome\"\u003eericpruitt/homeishome: Override passwd-\u0026gt;pw_dir for the current user’s password database entry with $HOME.\u003c/a\u003e\u003c/p\u003e","post_number":3,"post_type":1,"updated_at":"2020-08-18T07:45:00.495Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":75,"readers_count":74,"score":19.8,"yours":false,"topic_id":19475,"topic_slug":"any-way-to-acquire-the-originally-set-home-environment-variable","display_username":"林博仁(Buo-ren, Lin)","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://github.com/ericpruitt/homeishome","internal":false,"reflection":false,"title":"GitHub - ericpruitt/homeishome: Override passwd-\u003epw_dir for the current user's password database entry with $HOME.","clicks":7}],"read":true,"user_title":"","bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1417,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":77087,"name":"James Henstridge","username":"jamesh","avatar_template":"/user_avatar/forum.snapcraft.io/jamesh/{size}/3947_2.png","created_at":"2020-08-18T09:34:27.940Z","cooked":"\u003cp\u003eI’m not sure I see the benefit of snap packaging a command like that.  It’s primary purpose is run another user supplied command with LD_PRELOAD set, so as a snap it would just be running random commands within its confinement sandbox.\u003c/p\u003e\n\u003cp\u003eWhat problem are you trying to solve exactly?\u003c/p\u003e","post_number":4,"post_type":1,"updated_at":"2020-08-18T09:34:27.940Z","reply_count":1,"reply_to_post_number":3,"quote_count":0,"incoming_link_count":1,"reads":70,"readers_count":69,"score":23.8,"yours":false,"topic_id":19475,"topic_slug":"any-way-to-acquire-the-originally-set-home-environment-variable","display_username":"James Henstridge","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"Lin-Buo-Ren","avatar_template":"/user_avatar/forum.snapcraft.io/lin-buo-ren/{size}/4612_2.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":393,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":77088,"name":"林博仁(Buo-ren, Lin)","username":"Lin-Buo-Ren","avatar_template":"/user_avatar/forum.snapcraft.io/lin-buo-ren/{size}/4612_2.png","created_at":"2020-08-18T09:43:58.693Z","cooked":"\u003cp\u003eI primarily snap it to fix some snapped applications that hardcoded its access of resources under the users’ real home directory(which is acquired from the passwd database and not always accessible in the snap runtime, like \u003ccode\u003e.gitconfig\u003c/code\u003e).\u003c/p\u003e\n\u003cp\u003eThis issue is encountered when I tried to make it doubly functional as a stage snap to be consumed by other snaps and a regular snap that can be used by the end-user, the sandbox confinement can be workarounded by switching it to classic confinement.\u003c/p\u003e","post_number":5,"post_type":1,"updated_at":"2020-08-18T09:43:58.693Z","reply_count":1,"reply_to_post_number":4,"quote_count":0,"incoming_link_count":3,"reads":70,"readers_count":69,"score":33.8,"yours":false,"topic_id":19475,"topic_slug":"any-way-to-acquire-the-originally-set-home-environment-variable","display_username":"林博仁(Buo-ren, Lin)","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"","reply_to_user":{"username":"jamesh","avatar_template":"/user_avatar/forum.snapcraft.io/jamesh/{size}/3947_2.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1417,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":77091,"name":"James Henstridge","username":"jamesh","avatar_template":"/user_avatar/forum.snapcraft.io/jamesh/{size}/3947_2.png","created_at":"2020-08-18T09:50:48.510Z","cooked":"\u003cp\u003eSo how would the original HOME environment variable help you here?  Wouldn’t it also point the app at a location it can’t read/write?\u003c/p\u003e","post_number":6,"post_type":1,"updated_at":"2020-08-18T09:50:48.510Z","reply_count":1,"reply_to_post_number":5,"quote_count":0,"incoming_link_count":1,"reads":69,"readers_count":68,"score":23.6,"yours":false,"topic_id":19475,"topic_slug":"any-way-to-acquire-the-originally-set-home-environment-variable","display_username":"James Henstridge","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"Lin-Buo-Ren","avatar_template":"/user_avatar/forum.snapcraft.io/lin-buo-ren/{size}/4612_2.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":393,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":77093,"name":"林博仁(Buo-ren, Lin)","username":"Lin-Buo-Ren","avatar_template":"/user_avatar/forum.snapcraft.io/lin-buo-ren/{size}/4612_2.png","created_at":"2020-08-18T10:03:07.962Z","cooked":"\u003cp\u003eOne of the usage of the \u003ccode\u003ehomeishome\u003c/code\u003e utility is to deceive the indirectly called program to use another path as the user’s home directory, for example, to prevent the program from polluting the files under the real home directory.\u003c/p\u003e\n\u003cp\u003eIn the stage snap usage, though, is to make the snapped program read from $SNAP_USER_DATA or $SNAP_USER_COMMON, instead of the user’s real home directory.\u003c/p\u003e\n\u003cp\u003eThe original intention is to make the to-be-released BFG Repo Cleaner snap to not read the ~/.gitconfig file in the user’s directory, which is not suitable for a personal-files declaration as the access is an unintended side-affect by the underlying Git libraries.\u003c/p\u003e","post_number":7,"post_type":1,"updated_at":"2020-09-02T17:50:06.533Z","reply_count":1,"reply_to_post_number":6,"quote_count":0,"incoming_link_count":4,"reads":67,"readers_count":66,"score":38.2,"yours":false,"topic_id":19475,"topic_slug":"any-way-to-acquire-the-originally-set-home-environment-variable","display_username":"林博仁(Buo-ren, Lin)","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":2,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"","reply_to_user":{"username":"jamesh","avatar_template":"/user_avatar/forum.snapcraft.io/jamesh/{size}/3947_2.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1417,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":77094,"name":"James Henstridge","username":"jamesh","avatar_template":"/user_avatar/forum.snapcraft.io/jamesh/{size}/3947_2.png","created_at":"2020-08-18T10:07:20.560Z","cooked":"\u003cp\u003eOkay, but why do you need to know the value of \u003ccode\u003e$HOME\u003c/code\u003e outside of confinement for that?\u003c/p\u003e\n\u003cp\u003eIf you put a copy of \u003ccode\u003ehomeishome\u003c/code\u003e inside your snap and run the other application under it, won’t that have the intended effect of pointing it at the snap’s private home directory even if it uses \u003ccode\u003egetpwuid\u003c/code\u003e?\u003c/p\u003e","post_number":8,"post_type":1,"updated_at":"2020-08-18T10:07:20.560Z","reply_count":1,"reply_to_post_number":7,"quote_count":0,"incoming_link_count":0,"reads":63,"readers_count":62,"score":17.4,"yours":false,"topic_id":19475,"topic_slug":"any-way-to-acquire-the-originally-set-home-environment-variable","display_username":"James Henstridge","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"Lin-Buo-Ren","avatar_template":"/user_avatar/forum.snapcraft.io/lin-buo-ren/{size}/4612_2.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":393,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":77095,"name":"林博仁(Buo-ren, Lin)","username":"Lin-Buo-Ren","avatar_template":"/user_avatar/forum.snapcraft.io/lin-buo-ren/{size}/4612_2.png","created_at":"2020-08-18T10:11:49.747Z","cooked":"\u003caside class=\"quote no-group\" data-username=\"jamesh\" data-post=\"8\" data-topic=\"19475\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"20\" height=\"20\" src=\"https://forum.snapcraft.io/user_avatar/forum.snapcraft.io/jamesh/40/3947_2.png\" class=\"avatar\"\u003e jamesh:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eOkay, but why do you need to know the value of \u003ccode\u003e$HOME\u003c/code\u003e outside of confinement for that?\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eIt helps if \u003ccode\u003ehomeishome\u003c/code\u003e is packaged as a regular snap application for its original purpose instead of being used in another snap.\u003c/p\u003e\n\u003cp\u003eNote that I’m not really intend to do so, though, I just come across this issue while exploring the possiblities.\u003c/p\u003e\n\u003caside class=\"quote no-group\" data-username=\"jamesh\" data-post=\"8\" data-topic=\"19475\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"20\" height=\"20\" src=\"https://forum.snapcraft.io/user_avatar/forum.snapcraft.io/jamesh/40/3947_2.png\" class=\"avatar\"\u003e jamesh:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eIf you put a copy of \u003ccode\u003ehomeishome\u003c/code\u003e inside your snap and run the other application under it, won’t that have the intended effect of pointing it at the snap’s private home directory even if it uses \u003ccode\u003egetpwuid\u003c/code\u003e ?\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eI can always rewrite the HOME environment variable with the original one in a launcher \u003cimg src=\"https://forum.snapcraft.io/images/emoji/emoji_one/slight_smile.png?v=9\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\"\u003e\u003c/p\u003e","post_number":9,"post_type":1,"updated_at":"2020-08-18T10:15:01.668Z","reply_count":1,"reply_to_post_number":8,"quote_count":1,"incoming_link_count":3,"reads":58,"readers_count":57,"score":31.4,"yours":false,"topic_id":19475,"topic_slug":"any-way-to-acquire-the-originally-set-home-environment-variable","display_username":"林博仁(Buo-ren, Lin)","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":2,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"","bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1417,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":77096,"name":"James Henstridge","username":"jamesh","avatar_template":"/user_avatar/forum.snapcraft.io/jamesh/{size}/3947_2.png","created_at":"2020-08-18T10:23:31.980Z","cooked":"\u003cp\u003eBut strict confined snaps cannot call commands provided by other snaps, so how would that help?  And even if that wasn’t the case, there’s no guarantee that the homeishome snap would be installed on systems where your repo cleaner snap is installed.  This sounds a lot more fragile than just distributing a single snap representing a complete application.\u003c/p\u003e","post_number":10,"post_type":1,"updated_at":"2020-08-18T10:23:45.476Z","reply_count":1,"reply_to_post_number":9,"quote_count":0,"incoming_link_count":2,"reads":54,"readers_count":53,"score":25.6,"yours":false,"topic_id":19475,"topic_slug":"any-way-to-acquire-the-originally-set-home-environment-variable","display_username":"James Henstridge","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"Lin-Buo-Ren","avatar_template":"/user_avatar/forum.snapcraft.io/lin-buo-ren/{size}/4612_2.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":393,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":77097,"name":"林博仁(Buo-ren, Lin)","username":"Lin-Buo-Ren","avatar_template":"/user_avatar/forum.snapcraft.io/lin-buo-ren/{size}/4612_2.png","created_at":"2020-08-18T10:26:55.486Z","cooked":"\u003cp\u003eI decide to bundle the homeishome snap to the BFG Repo Cleaner snap via the stage-snaps mechanism instead of calling it directly, refer \u003ca href=\"https://github.com/Lin-Buo-Ren/bfg-snap/blob/master/snap/snapcraft.yaml#L114\"\u003ebfg-snap/snapcraft.yaml at master · Lin-Buo-Ren/bfg-snap\u003c/a\u003e for the implementation.\u003c/p\u003e\n\u003cp\u003eid. est.:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eA standalone \u003ccode\u003ehomeishome\u003c/code\u003e snap that is used independently for its original purpose\u003c/li\u003e\n\u003cli\u003eA \u003ccode\u003ebfg-repo-cleaner\u003c/code\u003e snap that bundles the \u003ccode\u003ehomeishome\u003c/code\u003e snap’s content and use it as a runtime-patching launcher\u003c/li\u003e\n\u003c/ul\u003e","post_number":11,"post_type":1,"updated_at":"2020-08-18T10:29:36.368Z","reply_count":1,"reply_to_post_number":10,"quote_count":0,"incoming_link_count":1,"reads":54,"readers_count":53,"score":20.6,"yours":false,"topic_id":19475,"topic_slug":"any-way-to-acquire-the-originally-set-home-environment-variable","display_username":"林博仁(Buo-ren, Lin)","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://github.com/Lin-Buo-Ren/bfg-snap/blob/master/snap/snapcraft.yaml#L114","internal":false,"reflection":false,"title":"bfg-snap/snapcraft.yaml at master · Lin-Buo-Ren/bfg-snap · GitHub","clicks":4}],"read":true,"user_title":"","reply_to_user":{"username":"jamesh","avatar_template":"/user_avatar/forum.snapcraft.io/jamesh/{size}/3947_2.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1417,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":77098,"name":"James Henstridge","username":"jamesh","avatar_template":"/user_avatar/forum.snapcraft.io/jamesh/{size}/3947_2.png","created_at":"2020-08-18T10:39:35.257Z","cooked":"\u003cp\u003eWhy not just build the helper library directly as a part?  It would likely be faster than kicking off two Snapcraft builds, and avoids ordering dependencies if you need to rebuild for some reason.\u003c/p\u003e\n\u003cp\u003eIt doesn’t even look like it’s really simplifying your \u003ccode\u003esnapcraft.yaml\u003c/code\u003e file.  It likely makes the \u003ccode\u003esnap/manifest.yaml\u003c/code\u003e data less accurate, which will reduce the value of the security vulnerability scanner that checks if you’ve built against vulnerable package versions.\u003c/p\u003e","post_number":12,"post_type":1,"updated_at":"2020-08-18T10:39:35.257Z","reply_count":1,"reply_to_post_number":11,"quote_count":0,"incoming_link_count":1,"reads":50,"readers_count":49,"score":19.8,"yours":false,"topic_id":19475,"topic_slug":"any-way-to-acquire-the-originally-set-home-environment-variable","display_username":"James Henstridge","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"Lin-Buo-Ren","avatar_template":"/user_avatar/forum.snapcraft.io/lin-buo-ren/{size}/4612_2.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":393,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":77099,"name":"林博仁(Buo-ren, Lin)","username":"Lin-Buo-Ren","avatar_template":"/user_avatar/forum.snapcraft.io/lin-buo-ren/{size}/4612_2.png","created_at":"2020-08-18T11:10:11.403Z","cooked":"\u003caside class=\"quote no-group\" data-username=\"jamesh\" data-post=\"12\" data-topic=\"19475\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"20\" height=\"20\" src=\"https://forum.snapcraft.io/user_avatar/forum.snapcraft.io/jamesh/40/3947_2.png\" class=\"avatar\"\u003e jamesh:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eWhy not just build the helper library directly as a part?\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eThen I have to duplicate the part recipe for all of my snaps that require them.  With stage-snap I could simply import the provider snap and use it directly.\u003c/p\u003e\n\u003caside class=\"quote no-group\" data-username=\"jamesh\" data-post=\"12\" data-topic=\"19475\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"20\" height=\"20\" src=\"https://forum.snapcraft.io/user_avatar/forum.snapcraft.io/jamesh/40/3947_2.png\" class=\"avatar\"\u003e jamesh:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eIt doesn’t even look like it’s really simplifying your \u003ccode\u003esnapcraft.yaml\u003c/code\u003e file. It likely makes the \u003ccode\u003esnap/manifest.yaml\u003c/code\u003e data less accurate, which will reduce the value of the security vulnerability scanner that checks if you’ve built against vulnerable package versions.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eWouldn’t snap/manifest.yaml record the stage-snap’s version?  Also I assume the security vulnerability scanner only scans the packages that is shipped from the Ubuntu archive?  As homeishome isn’t packaged in Ubuntu it seems to not be currently benefit by it.\u003c/p\u003e","post_number":13,"post_type":1,"updated_at":"2020-08-18T11:43:56.910Z","reply_count":1,"reply_to_post_number":12,"quote_count":1,"incoming_link_count":4,"reads":50,"readers_count":49,"score":34.8,"yours":false,"topic_id":19475,"topic_slug":"any-way-to-acquire-the-originally-set-home-environment-variable","display_username":"林博仁(Buo-ren, Lin)","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":4,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"","bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1417,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":77100,"name":"林博仁(Buo-ren, Lin)","username":"Lin-Buo-Ren","avatar_template":"/user_avatar/forum.snapcraft.io/lin-buo-ren/{size}/4612_2.png","created_at":"2020-08-18T11:49:28.720Z","cooked":"\u003cp\u003eFYI, the implementation of the stage-snap: \u003ca href=\"https://github.com/Lin-Buo-Ren/homeishome-launch/blob/master/snap/snapcraft.yaml\"\u003ehttps://github.com/Lin-Buo-Ren/homeishome-launch/blob/master/snap/snapcraft.yaml\u003c/a\u003e\u003c/p\u003e","post_number":14,"post_type":1,"updated_at":"2020-08-18T11:49:28.720Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":48,"readers_count":47,"score":9.4,"yours":false,"topic_id":19475,"topic_slug":"any-way-to-acquire-the-originally-set-home-environment-variable","display_username":"林博仁(Buo-ren, Lin)","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://github.com/Lin-Buo-Ren/homeishome-launch/blob/master/snap/snapcraft.yaml","internal":false,"reflection":false,"title":"homeishome-launch/snapcraft.yaml at master · Lin-Buo-Ren/homeishome-launch · GitHub","clicks":6}],"read":true,"user_title":"","bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1417,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":77101,"name":"James Henstridge","username":"jamesh","avatar_template":"/user_avatar/forum.snapcraft.io/jamesh/{size}/3947_2.png","created_at":"2020-08-18T11:50:17.857Z","cooked":"\u003cp\u003eMy point is that the “recipe” to build the library directly as a part is of similar length to the “recipe” you’ve written to pull in the binaries via \u003ccode\u003estage-snaps\u003c/code\u003e.  The alternative would be something like this:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-yaml\"\u003e  homeishome:\n    plugin: make\n    source: https://github.com/ericpruitt/homeishome.git\n    make-install-var: INSTALLDIR\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eIt’s the same length as your \u003ccode\u003ehomeishome-launch\u003c/code\u003e part, and doesn’t depend on a second 100+ line \u003ccode\u003esnapcraft.yaml\u003c/code\u003e.  It’s also guaranteed to be built against the correct library versions, which could be a problem with the \u003ccode\u003estage-snaps\u003c/code\u003e approach when you begin migrating your snaps to target newer bases.\u003c/p\u003e\n\u003cp\u003eAs for the manifest issue, it doesn’t look like it currently records the revision: just the track and channel.  It doesn’t look like it is an issue in this particular case, but if the snap you included in \u003ccode\u003estage-snaps\u003c/code\u003e did happen to stage some Ubuntu packages, the details of those staged packages wouldn’t make it into the final snap.\u003c/p\u003e","post_number":15,"post_type":1,"updated_at":"2020-08-18T11:50:17.857Z","reply_count":1,"reply_to_post_number":13,"quote_count":0,"incoming_link_count":1,"reads":51,"readers_count":50,"score":20.0,"yours":false,"topic_id":19475,"topic_slug":"any-way-to-acquire-the-originally-set-home-environment-variable","display_username":"James Henstridge","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"Lin-Buo-Ren","avatar_template":"/user_avatar/forum.snapcraft.io/lin-buo-ren/{size}/4612_2.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":393,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":77102,"name":"林博仁(Buo-ren, Lin)","username":"Lin-Buo-Ren","avatar_template":"/user_avatar/forum.snapcraft.io/lin-buo-ren/{size}/4612_2.png","created_at":"2020-08-18T11:58:56.060Z","cooked":"\u003caside class=\"quote no-group\" data-username=\"jamesh\" data-post=\"15\" data-topic=\"19475\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"20\" height=\"20\" src=\"https://forum.snapcraft.io/user_avatar/forum.snapcraft.io/jamesh/40/3947_2.png\" class=\"avatar\"\u003e jamesh:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eMy point is that the “recipe” to build the library directly as a part is of similar length to the “recipe” you’ve written to pull in the binaries via \u003ccode\u003estage-snaps\u003c/code\u003e .\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eIf the recipe works \u003ca href=\"https://github.com/Lin-Buo-Ren/homeishome-launch/blob/master/snap/local/patching/disable-shared-library-execution-feature.patch\"\u003ewithout addtional patching\u003c/a\u003e, sure.  I really like the idea of minimizing the duplication of implementation via the stage-snaps mechanism and would not let go of it easily.\u003c/p\u003e\n\u003caside class=\"quote no-group\" data-username=\"jamesh\" data-post=\"15\" data-topic=\"19475\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"20\" height=\"20\" src=\"https://forum.snapcraft.io/user_avatar/forum.snapcraft.io/jamesh/40/3947_2.png\" class=\"avatar\"\u003e jamesh:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eIt’s also guaranteed to be built against the correct library versions, which could be a problem with the \u003ccode\u003estage-snaps\u003c/code\u003e approach when you begin migrating your snaps to target newer bases.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eI assumed that it isn’t an issue as the code is fairly simple and \u003cem\u003eshould\u003c/em\u003e be compatible with newer glibc snap bases.  \u003csmall\u003eProbably.\u003c/small\u003e\u003c/p\u003e\n\u003caside class=\"quote no-group\" data-username=\"jamesh\" data-post=\"15\" data-topic=\"19475\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"20\" height=\"20\" src=\"https://forum.snapcraft.io/user_avatar/forum.snapcraft.io/jamesh/40/3947_2.png\" class=\"avatar\"\u003e jamesh:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eIt doesn’t look like it is an issue in this particular case, but if the snap you included in \u003ccode\u003estage-snaps\u003c/code\u003e did happen to stage some Ubuntu packages, the details of those staged packages wouldn’t make it into the final snap.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eGood point.\u003c/p\u003e","post_number":16,"post_type":1,"updated_at":"2020-08-18T12:11:37.649Z","reply_count":2,"reply_to_post_number":15,"quote_count":1,"incoming_link_count":2,"reads":48,"readers_count":47,"score":29.4,"yours":false,"topic_id":19475,"topic_slug":"any-way-to-acquire-the-originally-set-home-environment-variable","display_username":"林博仁(Buo-ren, Lin)","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":2,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://github.com/Lin-Buo-Ren/homeishome-launch/blob/master/snap/local/patching/disable-shared-library-execution-feature.patch","internal":false,"reflection":false,"title":"homeishome-launch/disable-shared-library-execution-feature.patch at master · Lin-Buo-Ren/homeishome-launch · GitHub","clicks":1}],"read":true,"user_title":"","bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1417,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":77114,"name":"Chris Patterson","username":"cjp256","avatar_template":"/letter_avatar/cjp256/{size}/5_6d6f4cde2641c35611d5cac2fb97c77e.png","created_at":"2020-08-18T13:09:45.643Z","cooked":"\u003cp\u003eFWIW I’ve used \u003ccode\u003eREAL_HOME=\"$(getent passwd $(id -u) | cut -d ':' -f 6)\"\u003c/code\u003e successfully in the past to migrate user data from user’s home config to snap config using \u003ccode\u003epersonal-files\u003c/code\u003e interface.\u003c/p\u003e","post_number":17,"post_type":1,"updated_at":"2020-08-18T13:09:45.643Z","reply_count":0,"reply_to_post_number":16,"quote_count":0,"incoming_link_count":2,"reads":44,"readers_count":43,"score":18.6,"yours":false,"topic_id":19475,"topic_slug":"any-way-to-acquire-the-originally-set-home-environment-variable","display_username":"Chris Patterson","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"Lin-Buo-Ren","avatar_template":"/user_avatar/forum.snapcraft.io/lin-buo-ren/{size}/4612_2.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":4740,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":77115,"name":"James Henstridge","username":"jamesh","avatar_template":"/user_avatar/forum.snapcraft.io/jamesh/{size}/3947_2.png","created_at":"2020-08-18T13:10:49.141Z","cooked":"\u003caside class=\"quote no-group\" data-username=\"Lin-Buo-Ren\" data-post=\"16\" data-topic=\"19475\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"20\" height=\"20\" src=\"https://forum.snapcraft.io/user_avatar/forum.snapcraft.io/lin-buo-ren/40/4612_2.png\" class=\"avatar\"\u003e Lin-Buo-Ren:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eIf the recipe works \u003ca href=\"https://github.com/Lin-Buo-Ren/homeishome-launch/blob/master/snap/local/patching/disable-shared-library-execution-feature.patch\" rel=\"noopener nofollow ugc\"\u003ewithout addtional patching\u003c/a\u003e, sure. I really like the idea of minimizing the duplication of implementation via the stage-snaps mechanism and would not let go of it easily.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eIs any of that patch necessary though?  It can’t be reducing the binary size significantly, and is just one more thing you’re now on the hook for maintaining.  The \u003ccode\u003ehomeishome-launch\u003c/code\u003e script also looks like it would be one or two lines if its functionality was inlined:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-yaml\"\u003eenvironment:\n  LD_PRELOAD: ${SNAP}/lib/homeishome.so\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eI get that you don’t want to be continually repeating yourself, but it’s worth considering whether the abstractions you’re introducing are actually making your life easier.  If the boilerplate you need to add is of the same order as the boilerplate code you removed, then it’s not obvious the trade off is worth it.\u003c/p\u003e\n\u003cp\u003eLooking at your other use of \u003ccode\u003estage-snaps\u003c/code\u003e, I can see why you’d want to avoid copying that long \u003ccode\u003eselective-checkout\u003c/code\u003e script into multiple projects.  But it isn’t clear what benefit \u003ccode\u003estage-snaps\u003c/code\u003e gives you over simply having a part that references the git repo where you maintain the script as a source.  That also makes it easier for someone reading your \u003ccode\u003esnapcraft.yaml\u003c/code\u003e to understand what is going on.\u003c/p\u003e\n\u003caside class=\"quote no-group\" data-username=\"Lin-Buo-Ren\" data-post=\"16\" data-topic=\"19475\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"20\" height=\"20\" src=\"https://forum.snapcraft.io/user_avatar/forum.snapcraft.io/lin-buo-ren/40/4612_2.png\" class=\"avatar\"\u003e Lin-Buo-Ren:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eI assumed that it isn’t an issue as the code is fairly simple and \u003cem\u003eshould\u003c/em\u003e be compatible with newer glibc snap bases. \u003csmall\u003eProbably.\u003c/small\u003e\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eThat is probably true.  But that also means you’ve introduced an ordering dependency for how you update your snaps.  This might be workable if you are the only one who makes use of the snap, but what if other people do the same?  How will you know when it is finally safe to upgrade this snap?\u003c/p\u003e","post_number":18,"post_type":1,"updated_at":"2020-08-18T13:10:49.141Z","reply_count":1,"reply_to_post_number":16,"quote_count":1,"incoming_link_count":2,"reads":48,"readers_count":47,"score":39.4,"yours":false,"topic_id":19475,"topic_slug":"any-way-to-acquire-the-originally-set-home-environment-variable","display_username":"James Henstridge","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":393,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":77122,"name":"林博仁(Buo-ren, Lin)","username":"Lin-Buo-Ren","avatar_template":"/user_avatar/forum.snapcraft.io/lin-buo-ren/{size}/4612_2.png","created_at":"2020-08-18T14:37:58.086Z","cooked":"\u003caside class=\"quote no-group\" data-username=\"jamesh\" data-post=\"18\" data-topic=\"19475\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"20\" height=\"20\" src=\"https://forum.snapcraft.io/user_avatar/forum.snapcraft.io/jamesh/40/3947_2.png\" class=\"avatar\"\u003e jamesh:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eIs any of that patch necessary though?\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eAs a temporary workaround, yes:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/ericpruitt/homeishome/issues/1\"\u003eUnable to use the shared-library-as-executable feature · Issue #1 · ericpruitt/homeishome\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/ericpruitt/homeishome/issues/2\"\u003e./tests not buildable in i386 \u0026amp; armhf architectures · Issue #2 · ericpruitt/homeishome\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003caside class=\"quote no-group\" data-username=\"jamesh\" data-post=\"18\" data-topic=\"19475\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"20\" height=\"20\" src=\"https://forum.snapcraft.io/user_avatar/forum.snapcraft.io/jamesh/40/3947_2.png\" class=\"avatar\"\u003e jamesh:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eI get that you don’t want to be continually repeating yourself, but it’s worth considering whether the abstractions you’re introducing are actually making your life easier. If the boilerplate you need to add is of the same order as the boilerplate code you removed, then it’s not obvious the trade off is worth it.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eNoted.  Thanks for the input!\u003c/p\u003e\n\u003caside class=\"quote no-group\" data-username=\"jamesh\" data-post=\"18\" data-topic=\"19475\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"20\" height=\"20\" src=\"https://forum.snapcraft.io/user_avatar/forum.snapcraft.io/jamesh/40/3947_2.png\" class=\"avatar\"\u003e jamesh:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eBut it isn’t clear what benefit \u003ccode\u003estage-snaps\u003c/code\u003e gives you over simply having a part that references the git repo where you maintain the script as a source. That also makes it easier for someone reading your \u003ccode\u003esnapcraft.yaml\u003c/code\u003e to understand what is going on.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eNever thought of that, I might try this approach and see if it’s fit, thanks!\u003c/p\u003e\n\u003caside class=\"quote no-group\" data-username=\"jamesh\" data-post=\"18\" data-topic=\"19475\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"20\" height=\"20\" src=\"https://forum.snapcraft.io/user_avatar/forum.snapcraft.io/jamesh/40/3947_2.png\" class=\"avatar\"\u003e jamesh:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eThat is probably true. But that also means you’ve introduced an ordering dependency for how you update your snaps. This might be workable if you are the only one who makes use of the snap, but what if other people do the same? How will you know when it is finally safe to upgrade this snap?\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eGood point.  \u003cimg src=\"https://forum.snapcraft.io/images/emoji/emoji_one/thinking.png?v=9\" title=\":thinking:\" class=\"emoji\" alt=\":thinking:\"\u003e\u003c/p\u003e","post_number":19,"post_type":1,"updated_at":"2020-08-18T14:37:58.086Z","reply_count":0,"reply_to_post_number":18,"quote_count":1,"incoming_link_count":14,"reads":51,"readers_count":50,"score":95.0,"yours":false,"topic_id":19475,"topic_slug":"any-way-to-acquire-the-originally-set-home-environment-variable","display_username":"林博仁(Buo-ren, Lin)","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://github.com/ericpruitt/homeishome/issues/1","internal":false,"reflection":false,"title":"Unable to use the shared-library-as-executable feature · Issue #1 · ericpruitt/homeishome · GitHub","clicks":2},{"url":"https://github.com/ericpruitt/homeishome/issues/2","internal":false,"reflection":false,"title":"./tests not buildable in i386 \u0026 armhf architectures · Issue #2 · ericpruitt/homeishome · GitHub","clicks":0}],"read":true,"user_title":"","bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":1417,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":77410,"name":"","username":"QkiZ","avatar_template":"/user_avatar/forum.snapcraft.io/qkiz/{size}/6023_2.png","created_at":"2020-08-21T16:43:00.354Z","cooked":"\u003cp\u003eI have same problem but without solution. \u003ca href=\"https://forum.snapcraft.io/t/classic-confinement-for-autotrash/17211/9\" class=\"inline-onebox\"\u003eClassic confinement for autotrash\u003c/a\u003e\u003c/p\u003e","post_number":20,"post_type":1,"updated_at":"2020-08-21T16:43:00.354Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":10,"reads":44,"readers_count":43,"score":58.6,"yours":false,"topic_id":19475,"topic_slug":"any-way-to-acquire-the-originally-set-home-environment-variable","display_username":"","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://forum.snapcraft.io/t/classic-confinement-for-autotrash/17211/9","internal":true,"reflection":false,"title":"Classic confinement for autotrash","clicks":7}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":7225,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false}],"stream":[77074,77076,77078,77087,77088,77091,77093,77094,77095,77096,77097,77098,77099,77100,77101,77102,77114,77115,77122,77410,77412]},"timeline_lookup":[[1,1032],[19,1031],[20,1028]],"tags":[],"id":19475,"title":"Any way to acquire the originally set `HOME` environment variable?","fancy_title":"Any way to acquire the originally set `HOME` environment variable?","posts_count":21,"created_at":"2020-08-18T04:57:14.577Z","views":2197,"reply_count":15,"like_count":6,"last_posted_at":"2020-08-21T16:59:50.528Z","visible":true,"closed":false,"archived":false,"has_summary":false,"archetype":"regular","slug":"any-way-to-acquire-the-originally-set-home-environment-variable","category_id":13,"word_count":2046,"deleted_at":null,"user_id":1417,"featured_link":null,"pinned_globally":false,"pinned_at":null,"pinned_until":null,"image_url":null,"slow_mode_seconds":0,"draft":null,"draft_key":"topic_19475","draft_sequence":null,"unpinned":null,"pinned":false,"current_post_number":1,"highest_post_number":21,"deleted_by":null,"actions_summary":[{"id":4,"count":0,"hidden":false,"can_act":false},{"id":8,"count":0,"hidden":false,"can_act":false},{"id":7,"count":0,"hidden":false,"can_act":false}],"chunk_size":20,"bookmarked":false,"topic_timer":null,"message_bus_last_id":0,"participant_count":5,"show_read_indicator":false,"thumbnails":null,"accepted_answer":{"post_number":21,"username":"ijohnson","excerpt":"Note that edge snapd now has experimental support for SNAP_REAL_HOME: \u003ca href=\"https://github.com/snapcore/snapd/pull/9189\"\u003ehttps://github.com/snapcore/snapd/pull/9189\u003c/a\u003e"},"details":{"notification_level":1,"participants":[{"id":1417,"username":"Lin-Buo-Ren","name":"林博仁(Buo-ren, Lin)","avatar_template":"/user_avatar/forum.snapcraft.io/lin-buo-ren/{size}/4612_2.png","post_count":10,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null},{"id":393,"username":"jamesh","name":"James Henstridge","avatar_template":"/user_avatar/forum.snapcraft.io/jamesh/{size}/3947_2.png","post_count":8,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null},{"id":2438,"username":"ijohnson","name":"Ian Johnson","avatar_template":"/user_avatar/forum.snapcraft.io/ijohnson/{size}/2091_2.png","post_count":1,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null},{"id":4740,"username":"cjp256","name":"Chris Patterson","avatar_template":"/letter_avatar/cjp256/{size}/5_6d6f4cde2641c35611d5cac2fb97c77e.png","post_count":1,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null},{"id":7225,"username":"QkiZ","name":"","avatar_template":"/user_avatar/forum.snapcraft.io/qkiz/{size}/6023_2.png","post_count":1,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null}],"created_by":{"id":1417,"username":"Lin-Buo-Ren","name":"林博仁(Buo-ren, Lin)","avatar_template":"/user_avatar/forum.snapcraft.io/lin-buo-ren/{size}/4612_2.png"},"last_poster":{"id":2438,"username":"ijohnson","name":"Ian Johnson","avatar_template":"/user_avatar/forum.snapcraft.io/ijohnson/{size}/2091_2.png"},"links":[{"url":"https://github.com/snapcore/snapd/pull/9189","title":"snap/snapenv: set SNAP_REAL_HOME by zyga · Pull Request #9189 · snapcore/snapd · GitHub","internal":false,"attachment":false,"reflection":false,"clicks":45,"user_id":2438,"domain":"github.com","root_domain":"github.com"},{"url":"https://forum.snapcraft.io/t/classic-confinement-for-autotrash/17211/9","title":"Classic confinement for autotrash","internal":true,"attachment":false,"reflection":false,"clicks":7,"user_id":7225,"domain":"forum.snapcraft.io","root_domain":"snapcraft.io"},{"url":"https://github.com/ericpruitt/homeishome","title":"GitHub - ericpruitt/homeishome: Override passwd-\u003epw_dir for the current user's password database entry with $HOME.","internal":false,"attachment":false,"reflection":false,"clicks":7,"user_id":1417,"domain":"github.com","root_domain":"github.com"},{"url":"https://github.com/Lin-Buo-Ren/homeishome-launch/blob/master/snap/snapcraft.yaml","title":"homeishome-launch/snapcraft.yaml at master · Lin-Buo-Ren/homeishome-launch · GitHub","internal":false,"attachment":false,"reflection":false,"clicks":6,"user_id":1417,"domain":"github.com","root_domain":"github.com"},{"url":"https://github.com/Lin-Buo-Ren/bfg-snap/blob/master/snap/snapcraft.yaml#L114","title":"bfg-snap/snapcraft.yaml at master · Lin-Buo-Ren/bfg-snap · GitHub","internal":false,"attachment":false,"reflection":false,"clicks":4,"user_id":1417,"domain":"github.com","root_domain":"github.com"},{"url":"https://github.com/ericpruitt/homeishome/issues/1","title":"Unable to use the shared-library-as-executable feature · Issue #1 · ericpruitt/homeishome · GitHub","internal":false,"attachment":false,"reflection":false,"clicks":2,"user_id":1417,"domain":"github.com","root_domain":"github.com"},{"url":"https://github.com/Lin-Buo-Ren/homeishome-launch/blob/master/snap/local/patching/disable-shared-library-execution-feature.patch","title":"homeishome-launch/disable-shared-library-execution-feature.patch at master · Lin-Buo-Ren/homeishome-launch · GitHub","internal":false,"attachment":false,"reflection":false,"clicks":1,"user_id":1417,"domain":"github.com","root_domain":"github.com"},{"url":"https://forum.snapcraft.io/t/environment-variables/7983","title":"Environment variables","internal":true,"attachment":false,"reflection":true,"clicks":1,"user_id":1417,"domain":"forum.snapcraft.io","root_domain":"snapcraft.io"}]}}