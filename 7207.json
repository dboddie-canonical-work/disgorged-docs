{"post_stream":{"posts":[{"id":33034,"name":"Zygmunt Krynicki","username":"zyga-snapd","avatar_template":"/user_avatar/forum.snapcraft.io/zyga-snapd/{size}/14_2.png","created_at":"2018-09-05T09:42:22.829Z","cooked":"\u003cp\u003eLayouts modify the execution environment of a \u003ca href=\"/t/snap-confinement/6233\"\u003estrictly-confined\u003c/a\u003e snap.\u003c/p\u003e\n\u003cp\u003eWith layouts, you can make elements in \u003ccode\u003e$SNAP\u003c/code\u003e, \u003ccode\u003e$SNAP_DATA\u003c/code\u003e, \u003ccode\u003e$SNAP_COMMON\u003c/code\u003e accessible from locations such as \u003ccode\u003e/usr\u003c/code\u003e, \u003ccode\u003e/var\u003c/code\u003e and \u003ccode\u003e/etc\u003c/code\u003e. This helps when using pre-compiled binaries and libraries that expect to find files and directories outside of locations referenced by \u003ccode\u003e$SNAP\u003c/code\u003e or \u003ccode\u003e$SNAP_DATA\u003c/code\u003e.\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003e\u003cimg src=\"https://forum.snapcraft.io/images/emoji/emoji_one/information_source.png?v=9\" title=\":information_source:\" class=\"emoji\" alt=\":information_source:\"\u003e Layouts can only help \u003cem\u003ewithin\u003c/em\u003e a snap’s environment. They cannot be used to expose elements within a snap to the host environment.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eLayouts require snap version \u003cem\u003e2.36+\u003c/em\u003e.\u003c/p\u003e\n\u003ch2\u003eUsing layouts\u003c/h2\u003e\n\u003cp\u003eLayouts are transparently supported by \u003ca href=\"/t/snapcraft-overview/8940\"\u003eSnapcraft\u003c/a\u003e when using a \u003ca href=\"/t/base-snaps/11198\"\u003ebase snap\u003c/a\u003e (e.g. \u003ccode\u003ebase: core18\u003c/code\u003e).\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eⓘ  When not using a base snap, layout options within \u003ccode\u003esnapcraft.yaml\u003c/code\u003e must be made within the scope of a top-level \u003ca href=\"/t/using-in-development-features-in-snapcraft-yaml/5766\"\u003epassthrough\u003c/a\u003e field.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eAs a simple example, consider an application you want to snap that:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003estores all data in \u003ccode\u003e/var/lib/foo\u003c/code\u003e\n\u003c/li\u003e\n\u003cli\u003ehas a configuration file in \u003ccode\u003e/etc/foo.conf\u003c/code\u003e\n\u003c/li\u003e\n\u003cli\u003euses read-only data in \u003ccode\u003e/usr/share/foo\u003c/code\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eA layout that allows such software to be used without snap-specific modifications can be defined as follows:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-yaml\"\u003elayout:\n  /var/lib/foo:\n    bind: $SNAP_DATA/var/lib/foo\n  /usr/share/foo:\n    bind: $SNAP/usr/share/foo\n  /etc/foo.conf:\n    bind-file: $SNAP_DATA/etc/foo.conf\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eNone of the above filesystem modifications are visible to any other snaps, or from the wider user session. They’re only visible within the per-snap mount namespace.\u003c/p\u003e\n\u003ch2\u003eLayout reference\u003c/h2\u003e\n\u003cp\u003eThe syntax for defining a layout is:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-yaml\"\u003elayout:\n  \u0026lt;target-path\u0026gt;: \u0026lt;declaration\u0026gt;\n  \u0026lt;target-path\u0026gt;: \u0026lt;declaration\u0026gt;\n  ..\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eLayouts are defined as a key-value map, mapping from a \u003ccode\u003e\u0026lt;target-path\u0026gt;\u003c/code\u003e to a layout declaration. Each declaration may be one of the following:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ccode\u003esymlink: \u0026lt;source-path\u0026gt;\u003c/code\u003e: create a symbolic link. This method is preferred because it is the cheapest; the other methods significantly increase the startup time of your application.\u003c/li\u003e\n\u003cli\u003e\n\u003ccode\u003ebind: \u0026lt;source-path\u0026gt;\u003c/code\u003e: bind-mount a directory.\u003c/li\u003e\n\u003cli\u003e\n\u003ccode\u003ebind-file: \u0026lt;source-path\u0026gt;\u003c/code\u003e: bind-mount a file\u003c/li\u003e\n\u003cli\u003e\n\u003ccode\u003etype: tmpfs\u003c/code\u003e: mount a private temporary in-memory filesystem\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eLayouts using \u003ccode\u003ebind*\u003c/code\u003e and \u003ccode\u003etmpfs\u003c/code\u003e \u003cstrong\u003esignificantly increase the startup time\u003c/strong\u003e of your snap. We recommend using \u003ccode\u003esymlink\u003c/code\u003e instead, because it has the least amount of overhead.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-yaml\"\u003e  /usr/lib/x86_64-linux-gnu/libEGL.so:\n    symlink: $SNAP/usr/lib/x86_64-linux-gnu/libEGL.so\n  /usr/lib/x86_64-linux-gnu/libGL.so:\n    symlink: $SNAP/usr/lib/x86_64-linux-gnu/libGL.so\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eSome applications, however, might treat symlinks differently than regular files or directories so you may need to use a bind mount in those cases.\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003e\u0026lt;source-path\u0026gt;\u003c/code\u003e must refer to either \u003ccode\u003e$SNAP\u003c/code\u003e, \u003ccode\u003e$SNAP_DATA\u003c/code\u003e or \u003ccode\u003e$SNAP_COMMON\u003c/code\u003e.\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003e\u0026lt;target-path\u0026gt;\u003c/code\u003e can include nearly any path except for:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003e/boot\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e/dev\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e/home\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\n\u003ccode\u003e/lib/firmware\u003c/code\u003e, \u003ccode\u003e/usr/lib/firmware\u003c/code\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ccode\u003e/lib/modules\u003c/code\u003e,  \u003ccode\u003e/usr/lib/modules\u003c/code\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e/lost+found\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e/media\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e/proc\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\n\u003ccode\u003e/run\u003c/code\u003e, \u003ccode\u003e/var/run\u003c/code\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e/sys\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e/tmp\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e/var/lib/snapd\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e/var/snap\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eAs \u003ccode\u003e/lib\u003c/code\u003e and \u003ccode\u003e/run\u003c/code\u003e are symbolic links to \u003ccode\u003e/usr/lib\u003c/code\u003e and \u003ccode\u003e/var/run\u003c/code\u003e respectively, they require separate exceptions to ensure certain locations, such as \u003ccode\u003e/lib/firmware\u003c/code\u003e, can’t be worked around. See below for further limitations.\u003c/p\u003e\n\u003cp\u003eIf \u003ccode\u003e\u0026lt;source-path\u0026gt;\u003c/code\u003e and \u003ccode\u003e\u0026lt;target-path\u0026gt;\u003c/code\u003e don’t already exist, they will be automatically created by snapd. This includes the creation of new empty files, but doesn’t include the creation of symbolic link targets. This is because snapd doesn’t know what kind of objects they may eventually point to. In the previous example, \u003ccode\u003e$SNAP_DATA/etc/foo.conf\u003c/code\u003e is created before any snap application code is executed.\u003c/p\u003e\n\u003ch2\u003eCreating new files and directories in read-only spaces\u003c/h2\u003e\n\u003cp\u003eLayouts can create new directories and files even in read-only locations such as \u003ccode\u003e/usr/share\u003c/code\u003e. The following declaration will create \u003ccode\u003e/usr/share/foo\u003c/code\u003e, for example, visible only to executing snap applications (it’s assumed that \u003ccode\u003e/usr/share/foo\u003c/code\u003e does \u003cstrong\u003enot\u003c/strong\u003e exist in the base snap declared by the application developer):\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-yaml\"\u003elayout:\n  /usr/share/foo:\n    bind: $SNAP/usr/share/foo\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eTo accomplish the above, snapd uses a temporary filesystem (tmpfs) mounted on \u003ccode\u003e/usr/share\u003c/code\u003e and  populated with a set of empty files and directories. These are then used for bind mounts as well as symlinks to reconstruct the original \u003ccode\u003e/usr/share\u003c/code\u003e. This allows snapd to make \u003ccode\u003e/usr/share\u003c/code\u003e writable, and consequently, allows snapd to create \u003ccode\u003e/usr/share/foo\u003c/code\u003e and configure it as desired.\u003c/p\u003e\n\u003ch2\u003eCurrent limitations\u003c/h2\u003e\n\u003cp\u003eThe following apply as of snapd 2.36:\u003c/p\u003e\n\u003ch3\u003eLayouts do not work with \u003cem\u003eclassic\u003c/em\u003e snaps\u003c/h3\u003e\n\u003cp\u003eThis functionality only works with \u003ca href=\"https://forum.snapcraft.io/t/snap-confinement/6233\"\u003estrictly-confined\u003c/a\u003e snaps, and does not work with snaps using \u003cem\u003eclassic\u003c/em\u003e confinement. This may change in the future.\u003c/p\u003e\n\u003ch3\u003eNew entries in / (root)\u003c/h3\u003e\n\u003cp\u003eLayouts cannot currently create new top-level files or directories. For example, the following layout declaration will not work:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-yaml\"\u003elayout:\n  /foo: # Unsupported, cannot create new top-level directories.\n     bind: $SNAP/foo\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3\u003eIncompatible existing file, directory or symbolic link\u003c/h3\u003e\n\u003cp\u003eLayouts cannot replace an existing but incompatible filesystem object. This means, for example, that files cannot replace directories or symbolic links, files cannot replace a directory, and existing symbolic links cannot be redirected to a new target. You can, however, replace a directory with another directory.\u003c/p\u003e","post_number":1,"post_type":1,"updated_at":"2023-05-24T11:39:10.203Z","reply_count":2,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":1861,"reads":311,"readers_count":310,"score":9563.2,"yours":false,"topic_id":7207,"topic_slug":"snap-layouts","display_username":"Zygmunt Krynicki","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":29,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://forum.snapcraft.io/t/using-in-development-features-in-snapcraft-yaml/5766","internal":true,"reflection":false,"title":"Using in-development features in `snapcraft.yaml`","clicks":19},{"url":"https://forum.snapcraft.io/t/snap-confinement/6233","internal":true,"reflection":false,"title":"Snap confinement","clicks":10},{"url":"https://forum.snapcraft.io/t/snapcraft-overview/8940","internal":true,"reflection":false,"title":"Snapcraft overview","clicks":5},{"url":"https://forum.snapcraft.io/t/base-snaps/11198","internal":true,"reflection":false,"title":"Base snaps","clicks":4},{"url":"https://forum.snapcraft.io/t/layouts-re-mapping-snap-directories/1471/85","internal":true,"reflection":true,"title":"Layouts: re-mapping snap directories","clicks":15},{"url":"https://forum.snapcraft.io/t/snaps-and-opencl/8509/4","internal":true,"reflection":true,"title":"Snaps and OpenCL","clicks":5},{"url":"https://forum.snapcraft.io/t/the-system-files-interface/9358/3","internal":true,"reflection":true,"title":"The system-files interface","clicks":5},{"url":"https://forum.snapcraft.io/t/snap-documentation-page-deprecated/3781","internal":true,"reflection":true,"title":"Snap Documentation (page deprecated)","clicks":4},{"url":"https://forum.snapcraft.io/t/layout-magic-collection/10501","internal":true,"reflection":true,"title":"Layout magic collection","clicks":3},{"url":"https://forum.snapcraft.io/t/request-for-classic-confinement-for-hugo-snap/19892/3","internal":true,"reflection":true,"title":"Request for classic confinement for hugo snap","clicks":0},{"url":"https://forum.snapcraft.io/t/the-gnome-3-34-extension/18485","internal":true,"reflection":true,"title":"The gnome-3-34 extension","clicks":0},{"url":"https://forum.snapcraft.io/t/glossary/14612","internal":true,"reflection":true,"title":"Glossary","clicks":0},{"url":"https://forum.snapcraft.io/t/no-printing/17320/17","internal":true,"reflection":true,"title":"No Printing","clicks":0},{"url":"https://forum.snapcraft.io/t/no-printing/17320/7","internal":true,"reflection":true,"title":"No Printing","clicks":0},{"url":"https://forum.snapcraft.io/t/run-snapd-socket-in-layout/16901","internal":true,"reflection":true,"title":"/run/snapd.socket in layout","clicks":0},{"url":"https://forum.snapcraft.io/t/hardcoded-path-to-exec-usr-sbin-pppd/16373/2","internal":true,"reflection":true,"title":"Hardcoded path to exec() /usr/sbin/pppd","clicks":0},{"url":"https://forum.snapcraft.io/t/how-to-make-a-snap-that-read-only-access-files-in-usr-share-app-folder/15795/2","internal":true,"reflection":true,"title":"How to make a snap that read only/access files in /usr/share/app_folder","clicks":0},{"url":"https://forum.snapcraft.io/t/refreshing-gimp-snap-failed-cannot-create-symlink-in-etc-gimp-existing-file-in-the-way/14995/15","internal":true,"reflection":true,"title":"Refreshing gimp snap failed: cannot create symlink in \"/etc/gimp\": existing file in the way","clicks":0},{"url":"https://forum.snapcraft.io/t/classic-confinement-for-charta-app-smartcard-reader/14738/3","internal":true,"reflection":true,"title":"Classic confinement for Charta app (smartcard reader)","clicks":0},{"url":"https://forum.snapcraft.io/t/manual-review-of-logsync-snap/14059/22","internal":true,"reflection":true,"title":"Manual review of logsync snap","clicks":0},{"url":"https://forum.snapcraft.io/t/gsequencer-needs-manual-review-confinement-next-generation/7561/3","internal":true,"reflection":true,"title":"GSequencer needs manual review confinement: next-generation","clicks":0},{"url":"https://forum.snapcraft.io/t/access-to-var-run-for-confined-snap/7745","internal":true,"reflection":true,"title":"Access to /var/run for confined snap","clicks":0},{"url":"https://forum.snapcraft.io/t/the-snap-format/698","internal":true,"reflection":true,"title":"The snap format","clicks":0},{"url":"https://forum.snapcraft.io/t/web-browsers-cant-write-files-downloaded-to-media-vboxsf-subdir/33885","internal":true,"reflection":true,"title":"Web browsers can't write files downloaded to /media/\u003cvboxsf\u003e/subdir","clicks":0},{"url":"https://forum.snapcraft.io/t/unprivileged-access-using-ioctl-tcgets/8605/4","internal":true,"reflection":true,"title":"Unprivileged access using IOCTL tcgets","clicks":0},{"url":"https://forum.snapcraft.io/t/classic-confinement-review-rescript/9683/12","internal":true,"reflection":true,"title":"Classic confinement review: rescript","clicks":0},{"url":"https://forum.snapcraft.io/t/classic-confinement-request-audovia-classic/10456/2","internal":true,"reflection":true,"title":"Classic confinement request: audovia-classic","clicks":0},{"url":"https://forum.snapcraft.io/t/snap-documentation/11127","internal":true,"reflection":true,"title":"Snap documentation","clicks":0},{"url":"https://forum.snapcraft.io/t/request-for-system-files-for-nftables/12035/2","internal":true,"reflection":true,"title":"Request for system-files for nftables","clicks":0},{"url":"https://forum.snapcraft.io/t/permissionerror-errno-13-permission-denied-etc-glances-glances-conf/13824/5","internal":true,"reflection":true,"title":"PermissionError: [Errno 13] Permission denied: '/etc/glances/glances.conf'","clicks":0},{"url":"https://forum.snapcraft.io/t/system-files-permission-for-jabref-native-messaging-hosts-integration/13702/2","internal":true,"reflection":true,"title":"System-files permission for jabref (native-messaging-hosts integration)","clicks":0},{"url":"https://forum.snapcraft.io/t/cannot-edit-configuration-file/14118/17","internal":true,"reflection":true,"title":"Cannot edit configuration file","clicks":0},{"url":"https://forum.snapcraft.io/t/qt-app-with-no-system-libraries-and-without/7638/49","internal":true,"reflection":true,"title":"Qt app with no-system-libraries and without","clicks":0},{"url":"https://forum.snapcraft.io/t/permissions-for-a-utility-snap-to-read-write-user-files/32526/4","internal":true,"reflection":true,"title":"Permissions for a utility snap to read/write user files","clicks":0},{"url":"https://forum.snapcraft.io/t/gtk3-applications/13483","internal":true,"reflection":true,"title":"GTK3 applications","clicks":0},{"url":"https://forum.snapcraft.io/t/the-gnome-extension/31449","internal":true,"reflection":true,"title":"The gnome extension","clicks":0},{"url":"https://forum.snapcraft.io/t/enable-udisks2-interface-in-pi-gadget-for-uc20/27590/7","internal":true,"reflection":true,"title":"Enable udisks2 interface in pi-gadget for UC20","clicks":0},{"url":"https://forum.snapcraft.io/t/classic-confinement-request-avdl/25783/5","internal":true,"reflection":true,"title":"Classic confinement request: avdl","clicks":0},{"url":"https://forum.snapcraft.io/t/how-to-create-delete-path-in-install-remove-hook/25826","internal":true,"reflection":true,"title":"How to create/delete path in install/remove hook?","clicks":0},{"url":"https://forum.snapcraft.io/t/request-for-classic-confinement-for-quicknav/23173/8","internal":true,"reflection":true,"title":"Request for classic confinement for Quicknav","clicks":0},{"url":"https://forum.snapcraft.io/t/the-gnome-3-38-extension/22923","internal":true,"reflection":true,"title":"The gnome-3-38 extension","clicks":0},{"url":"https://forum.snapcraft.io/t/snapcraft-top-level-metadata/8334","internal":true,"reflection":true,"title":"Snapcraft top-level metadata","clicks":0},{"url":"https://forum.snapcraft.io/t/snapcraft-yaml-reference/4276","internal":true,"reflection":true,"title":"Snapcraft.yaml reference","clicks":0},{"url":"https://forum.snapcraft.io/t/read-write-access-to-tmp/21743","internal":true,"reflection":true,"title":"Read/write access to /tmp","clicks":0}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":8}],"moderator":false,"admin":false,"staff":false,"user_id":2,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":true,"last_wiki_edit":"2023-05-24T11:39:10.233Z","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":33109,"name":"Tobias","username":"tobias","avatar_template":"/user_avatar/forum.snapcraft.io/tobias/{size}/4399_2.png","created_at":"2018-09-06T10:53:55.997Z","cooked":"\u003cp\u003eWorks perfectly, thanks again! Using it to map tmp/log directories within my snapped web app (i. e. read-only, but the framework expects them at the app root dir) to writable bind-mounts at $SNAP_DATA. Just have to make sure that those directories do not exist in source.\u003c/p\u003e","post_number":2,"post_type":1,"updated_at":"2018-09-06T10:53:55.997Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":3,"reads":213,"readers_count":212,"score":132.6,"yours":false,"topic_id":7207,"topic_slug":"snap-layouts","display_username":"Tobias","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":3}],"moderator":false,"admin":false,"staff":false,"user_id":3064,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":35217,"name":"Tobias","username":"tobias","avatar_template":"/user_avatar/forum.snapcraft.io/tobias/{size}/4399_2.png","created_at":"2018-10-07T08:35:55.322Z","cooked":"\u003cp\u003e\u003ca class=\"mention\" href=\"/u/zyga-snapd\"\u003e@zyga-snapd\u003c/a\u003e I think I have identified an edge case issue with layouts. Mounting directories and files works fine, but if I declare two target paths for \u003ccode\u003ebind-file\u003c/code\u003e where the second path’s last component (i. e. filename) contains all of the first path’s plus a suffix, snap installation will fail with:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003eerror: cannot perform the following tasks:\n- Setup snap \"my-snap\" (unset) security profiles (cannot setup mount for snap \"my-snap\": cannot update mount namespace of snap \"my-snap\": cannot update preserved namespace of snap \"my-snap\": cannot update snap namespace: no such file or directory)\n- Setup snap \"my-snap\" (unset) security profiles (cannot update mount namespace of snap \"my-snap\": cannot update preserved namespace of snap \"my-snap\": cannot update snap namespace: no such file or directory)\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eMy layout definition:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-yaml\"\u003e$SNAP/api/Gemfile:\n    bind-file: $SNAP_DATA/Gemfile\n$SNAP/api/Gemfile.lock:\n    bind-file: $SNAP_DATA/Gemfile.lock\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eAs you can see, the second target path just adds \u003ccode\u003e.lock\u003c/code\u003e to the filename. If I rename the first mount “Gemfile” to “Gemfile_B”, everything works fine – but this breaks my Rails application. I can configure an alternative name for Gemfile, but Rails expects a \u003ccode\u003e$filename.lock\u003c/code\u003e file for whatever name I choose. To rule out that layouts has a problem with suffix-less files, I tried a layout with \u003ccode\u003eGemfile.gems\u003c/code\u003e and \u003ccode\u003eGemfile.gems.lock\u003c/code\u003e to no avail.\u003c/p\u003e\n\u003cp\u003eI also tested it with \u003ccode\u003ebind\u003c/code\u003e folders (attempting to mount \u003ccode\u003e$SNAP/folder\u003c/code\u003e alongside \u003ccode\u003e$SNAP/folder.suffix\u003c/code\u003e) just to make sure it’s not specific to \u003ccode\u003ebind-file\u003c/code\u003e.\u003c/p\u003e\n\u003cp\u003eAm I “holding it wrong” ™ or is this actually an issue with the layouts feature?\u003c/p\u003e","post_number":3,"post_type":1,"updated_at":"2018-10-07T08:37:30.696Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":20,"reads":192,"readers_count":191,"score":143.4,"yours":false,"topic_id":7207,"topic_slug":"snap-layouts","display_username":"Tobias","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":2,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":3064,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":35252,"name":"Zygmunt Krynicki","username":"zyga-snapd","avatar_template":"/user_avatar/forum.snapcraft.io/zyga-snapd/{size}/14_2.png","created_at":"2018-10-08T16:27:49.963Z","cooked":"\u003cp\u003eI wrote a small test case based on your report and I’m running it now against master. The test passed. I will now revert a bug fix I landed to that area last week to ensure that it was the culprit.\u003c/p\u003e\n\u003cp\u003eEDIT: Some more debugging I cannot reproduce the problem just yet. Can you share more details about your setup:\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eWere the files \u003ccode\u003e$SNAP/api/Gemfile\u003c/code\u003e and \u003ccode\u003e$SNAP/api/Gemfile.lock\u003c/code\u003e present in the snap?\u003c/li\u003e\n\u003cli\u003eDid this test on core or classic system? (\u003ccode\u003esnap version\u003c/code\u003e output is best)\u003c/li\u003e\n\u003cli\u003eWere you experimenting with this snap and it was already installed (and perhaps invoked at least once) or was this a clean install?\u003c/li\u003e\n\u003c/ol\u003e","post_number":4,"post_type":1,"updated_at":"2018-10-08T16:50:50.224Z","reply_count":1,"reply_to_post_number":3,"quote_count":0,"incoming_link_count":41,"reads":163,"readers_count":162,"score":272.6,"yours":false,"topic_id":7207,"topic_slug":"snap-layouts","display_username":"Zygmunt Krynicki","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":2,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"tobias","avatar_template":"/user_avatar/forum.snapcraft.io/tobias/{size}/4399_2.png"},"bookmarked":false,"actions_summary":[{"id":2,"count":2}],"moderator":false,"admin":false,"staff":false,"user_id":2,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":35278,"name":"Tobias","username":"tobias","avatar_template":"/user_avatar/forum.snapcraft.io/tobias/{size}/4399_2.png","created_at":"2018-10-09T09:04:33.092Z","cooked":"\u003cp\u003eThanks for the quick feedback, here are the requested details:\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003ccode\u003e$SNAP/api/Gemfile\u003c/code\u003e and \u003ccode\u003e$SNAP/api/Gemfile.lock\u003c/code\u003e were present during snap creation, but the \u003ccode\u003eoverride-build\u003c/code\u003e script of the Rails part renames them to Gemfile_installed Gemfile.lock_installed. I verified that they are not present in the final snap.\u003c/li\u003e\n\u003cli\u003eBoth:\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eOn classic Ubuntu Desktop (snap built with LXD container)\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003esnap   2.35.2\nsnapd  2.35.2\nseries 16\nubuntu 18.04\nkernel 4.150-36-generic\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eon Ubuntu Core device:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003esnap    2.35.2\nsnapd   2.35.2\nseries  16\nkernel  4.4.0-1098-raspi2\n\u003c/code\u003e\u003c/pre\u003e\n\u003col start=\"3\"\u003e\n\u003cli\u003eClean install – or rather attempting to install, since it aborts the installation because of said error. I made sure that no previous versions were installed during the installation attempt.\u003c/li\u003e\n\u003c/ol\u003e","post_number":5,"post_type":1,"updated_at":"2018-10-09T09:04:33.092Z","reply_count":1,"reply_to_post_number":4,"quote_count":0,"incoming_link_count":4,"reads":159,"readers_count":158,"score":56.8,"yours":false,"topic_id":7207,"topic_slug":"snap-layouts","display_username":"Tobias","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"zyga-snapd","avatar_template":"/user_avatar/forum.snapcraft.io/zyga-snapd/{size}/14_2.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":3064,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":35418,"name":"Zygmunt Krynicki","username":"zyga-snapd","avatar_template":"/user_avatar/forum.snapcraft.io/zyga-snapd/{size}/14_2.png","created_at":"2018-10-10T13:45:08.844Z","cooked":"\u003cp\u003eI’m looking at reproducing this with the new details right now.\u003c/p\u003e\n\u003cp\u003eEDIT: I failed reproducing this. Here is what I tried. I used snapd 2.35.4 from Ubuntu Cosmic:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003esnap    2.35.4+18.10\nsnapd   2.35.4+18.10\nseries  16\nubuntu  18.10\nkernel  4.18.0-8-generic\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThere I created an application with the following definition:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003ename: app\nversion: 1\napps:\n    app:\n        command: bin/app\nlayout:\n    $SNAP/api/tmp:\n        bind: $SNAP_DATA/rails/tmp\n    $SNAP/api/log:\n        bind: $SNAP_DATA/rails/log\n    $SNAP/api/vendor:\n        bind: $SNAP_DATA/rails/vendor\n    $SNAP/api/Gemfile:\n        bind-file: $SNAP_DATA/rails/Gemfile\n    $SNAP/api/Gemfile.lock:\n        bind-file: $SNAP_DATA/rails/Gemfile.lock\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eI made a dummy \u003ccode\u003ebin/app\u003c/code\u003e shell script that just prints \u003ccode\u003eok\u003c/code\u003e. Apart from \u003ccode\u003ebin/app\u003c/code\u003e and \u003ccode\u003emeta/snap.yaml\u003c/code\u003e there were no other files present in the snap.\u003c/p\u003e\n\u003cp\u003eRunning the application I get \u003ccode\u003eok\u003c/code\u003e and a working layout. I can then run \u003ccode\u003esnap run --shell app\u003c/code\u003e to explore the environment.\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003ezyga@fyke:$ snap run --shell app\nTo run a command as administrator (user \"root\"), use \"sudo \u0026lt;command\u0026gt;\".\nSee \"man sudo_root\" for details.\n\nzyga@fyke:$ cd $SNAP\nzyga@fyke:/snap/app/x1$ find\n.\n./api\n./api/vendor\n./api/tmp\n./api/log\n./api/Gemfile\n./api/Gemfile.lock\n./meta\n./meta/snap.yaml\n./bin\n./bin/app\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eLooking at $SNAP_DATA, I see:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003ezyga@fyke:/snap/app/x1$ cd $SNAP_DATA\nzyga@fyke:/var/snap/app/x1$ find\n.\n./rails\n./rails/Gemfile.lock\n./rails/tmp\n./rails/Gemfile\n./rails/vendor\n./rails/log\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eLastly I can inspect the mount namespace but this requires more privileges so I leave the confined shell (exit) and inspect the mount namespace using the nsenter command.\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003ezyga@fyke:/var/snap/app/x1$ exit\nexit\n\nzyga@fyke:$ sudo nsenter -m/run/snapd/ns/app.mnt\nroot@fyke:/# cat /proc/self/mountinfo | tail -n 6\n2130 2257 0:56 / /snap/app/x1/api rw,relatime - tmpfs tmpfs rw,mode=775,uid=1000,gid=1000\n2067 2130 8:1 /var/snap/app/x1/rails/Gemfile.lock /snap/app/x1/api/Gemfile.lock rw,relatime master:1 - ext4 /dev/sda1 rw,errors=remount-ro\n2131 2130 8:1 /var/snap/app/x1/rails/Gemfile /snap/app/x1/api/Gemfile rw,relatime master:1 - ext4 /dev/sda1 rw,errors=remount-ro\n2132 2130 8:1 /var/snap/app/x1/rails/log /snap/app/x1/api/log rw,relatime master:1 - ext4 /dev/sda1 rw,errors=remount-ro\n2133 2130 8:1 /var/snap/app/x1/rails/tmp /snap/app/x1/api/tmp rw,relatime master:1 - ext4 /dev/sda1 rw,errors=remount-ro\n2134 2130 8:1 /var/snap/app/x1/rails/vendor /snap/app/x1/api/vendor rw,relatime master:1 - ext4 /dev/sda1 rw,errors=remount-ro\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eAs you can see \u003ccode\u003e/snap/app/x1/api\u003c/code\u003e is a tmpfs populated with the objects from \u003ccode\u003e$SNAP_DATA\u003c/code\u003e (in this case \u003ccode\u003e/var/snap/app/x1/\u003c/code\u003e).\u003c/p\u003e\n\u003cp\u003eCan you tell me what I am missing in this test?\u003c/p\u003e","post_number":6,"post_type":1,"updated_at":"2018-10-10T18:17:24.164Z","reply_count":1,"reply_to_post_number":5,"quote_count":0,"incoming_link_count":8,"reads":149,"readers_count":148,"score":89.8,"yours":false,"topic_id":7207,"topic_slug":"snap-layouts","display_username":"Zygmunt Krynicki","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":3,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"tobias","avatar_template":"/user_avatar/forum.snapcraft.io/tobias/{size}/4399_2.png"},"bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":2,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":36017,"name":"Tobias","username":"tobias","avatar_template":"/user_avatar/forum.snapcraft.io/tobias/{size}/4399_2.png","created_at":"2018-10-17T10:00:16.703Z","cooked":"\u003cp\u003e(Very belated answer, but fortunately I left this browser tab open \u003cimg src=\"https://forum.snapcraft.io/images/emoji/emoji_one/grinning_face_with_smiling_eyes.png?v=9\" title=\":grinning_face_with_smiling_eyes:\" class=\"emoji\" alt=\":grinning_face_with_smiling_eyes:\"\u003e )\u003c/p\u003e\n\u003cp\u003eThank you for this extensive test! The only difference is that in my snap, $SNAP/api is an existing directory created during snap creation – and that my snap has an \u003ccode\u003einstall\u003c/code\u003e hook attempting to do stuff in the directories that I specified in layouts.\u003c/p\u003e\n\u003cp\u003eShort version: The bug sat in front of my computer \u003cimg src=\"https://forum.snapcraft.io/images/emoji/emoji_one/grinning_face_with_smiling_eyes.png?v=9\" title=\":grinning_face_with_smiling_eyes:\" class=\"emoji\" alt=\":grinning_face_with_smiling_eyes:\"\u003e I misread the docs about nested paths in bind-mounts and added \u003ccode\u003emkdir\u003c/code\u003e commands to my install hook at some point. I previously used the \u003ccode\u003e$SNAP_DATA/rails_{$folder}\u003c/code\u003e version, but then switched to \u003ccode\u003e$SNAP_DATA/rails/$folder\u003c/code\u003e – and added an \u003ccode\u003emkdir $SNAP_DATA/rails/$folder\u003c/code\u003e, which then tried to overwrite the bind-mount.\u003c/p\u003e\n\u003cp\u003eTakeaway: Maybe the error message could be clearer, but not a fault of layouts.\u003c/p\u003e","post_number":7,"post_type":1,"updated_at":"2018-10-17T10:00:16.703Z","reply_count":1,"reply_to_post_number":6,"quote_count":0,"incoming_link_count":0,"reads":129,"readers_count":128,"score":30.8,"yours":false,"topic_id":7207,"topic_slug":"snap-layouts","display_username":"Tobias","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"zyga-snapd","avatar_template":"/user_avatar/forum.snapcraft.io/zyga-snapd/{size}/14_2.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":3064,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":36058,"name":"Zygmunt Krynicki","username":"zyga-snapd","avatar_template":"/user_avatar/forum.snapcraft.io/zyga-snapd/{size}/14_2.png","created_at":"2018-10-18T08:40:04.599Z","cooked":"\u003caside class=\"quote no-group\" data-username=\"tobias\" data-post=\"7\" data-topic=\"7207\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"20\" height=\"20\" src=\"https://forum.snapcraft.io/user_avatar/forum.snapcraft.io/tobias/40/4399_2.png\" class=\"avatar\"\u003e tobias:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eThank you for this extensive test! The only difference is that in my snap, $SNAP/api is an existing directory created during snap creation – and that my snap has an \u003ccode\u003einstall\u003c/code\u003e hook attempting to do stuff in the directories that I specified in layouts.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eWoot, that’s great to know. The up side is that 2.36 ships with layouts enabled and that nested directory limitation lifted now. Please try edge again and see if you can simplify your snapcraft.yaml now. I also heard that snapcraft will support layouts directly (CC \u003ca class=\"mention\" href=\"/u/kyrofa\"\u003e@kyrofa\u003c/a\u003e to confirm please) so that the passthrough section can go away.\u003c/p\u003e","post_number":8,"post_type":1,"updated_at":"2018-10-18T08:40:04.599Z","reply_count":2,"reply_to_post_number":7,"quote_count":1,"incoming_link_count":1,"reads":129,"readers_count":128,"score":40.8,"yours":false,"topic_id":7207,"topic_slug":"snap-layouts","display_username":"Zygmunt Krynicki","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":2,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":36084,"name":"Kyle Fazzari","username":"kyrofa","avatar_template":"/user_avatar/forum.snapcraft.io/kyrofa/{size}/4384_2.png","created_at":"2018-10-18T15:11:30.480Z","cooked":"\u003caside class=\"quote no-group\" data-username=\"zyga-snapd\" data-post=\"8\" data-topic=\"7207\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"20\" height=\"20\" src=\"https://forum.snapcraft.io/user_avatar/forum.snapcraft.io/zyga-snapd/40/14_2.png\" class=\"avatar\"\u003e zyga-snapd:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eCC \u003ca class=\"mention\" href=\"/u/kyrofa\"\u003e@kyrofa\u003c/a\u003e to confirm please\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eYessir, but only in edge right now, it’ll be in the next stable release (but only if using bases).\u003c/p\u003e","post_number":9,"post_type":1,"updated_at":"2018-11-02T22:12:40.940Z","reply_count":0,"reply_to_post_number":8,"quote_count":1,"incoming_link_count":2,"reads":120,"readers_count":119,"score":49.0,"yours":false,"topic_id":7207,"topic_slug":"snap-layouts","display_username":"Kyle Fazzari","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":2,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":17,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":37219,"name":"Samuele Pedroni","username":"pedronis","avatar_template":"/user_avatar/forum.snapcraft.io/pedronis/{size}/46_2.png","created_at":"2018-11-07T16:04:42.568Z","cooked":"\u003cp\u003e\u003ca class=\"mention\" href=\"/u/zyga-snapd\"\u003e@zyga-snapd\u003c/a\u003e, \u003ca class=\"mention\" href=\"/u/degville\"\u003e@degville\u003c/a\u003e  this should probably be mentioned and linked to from \u003ca href=\"https://forum.snapcraft.io/t/the-snap-format/698\" class=\"inline-onebox\"\u003eThe snap format\u003c/a\u003e\u003c/p\u003e","post_number":10,"post_type":1,"updated_at":"2018-11-07T16:04:42.568Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":118,"readers_count":117,"score":28.6,"yours":false,"topic_id":7207,"topic_slug":"snap-layouts","display_username":"Samuele Pedroni","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://forum.snapcraft.io/t/the-snap-format/698","internal":true,"reflection":false,"title":"The snap format","clicks":15}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":13,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":37220,"name":"Graham Morrison","username":"degville","avatar_template":"/user_avatar/forum.snapcraft.io/degville/{size}/2021_2.png","created_at":"2018-11-07T16:11:04.026Z","cooked":"\u003caside class=\"quote no-group quote-modified\" data-username=\"pedronis\" data-post=\"10\" data-topic=\"7207\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"20\" height=\"20\" src=\"https://forum.snapcraft.io/user_avatar/forum.snapcraft.io/pedronis/40/46_2.png\" class=\"avatar\"\u003e pedronis:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003e…this should probably be mentioned and linked to from \u003ca href=\"https://forum.snapcraft.io/t/the-snap-format/698\"\u003eThe snap format \u003c/a\u003e\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eI’ve just added this to \u003cem\u003eThe snap format\u003c/em\u003e document. Thanks!\u003c/p\u003e","post_number":11,"post_type":1,"updated_at":"2018-11-07T16:11:04.026Z","reply_count":0,"reply_to_post_number":10,"quote_count":1,"incoming_link_count":0,"reads":119,"readers_count":118,"score":38.8,"yours":false,"topic_id":7207,"topic_slug":"snap-layouts","display_username":"Graham Morrison","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":true,"admin":true,"staff":true,"user_id":2772,"hidden":false,"trust_level":4,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":42907,"name":"Tobias","username":"tobias","avatar_template":"/user_avatar/forum.snapcraft.io/tobias/{size}/4399_2.png","created_at":"2019-02-12T08:27:19.760Z","cooked":"\u003cp\u003eJust wanted to give feedback that layouts have been working fine for me since 2.36 and switching to snapcraft v3 was seamless in that regard. I have had the \u003ccode\u003epassthrough\u003c/code\u003e wrapper active because I’m using launchpad for ARM builds and when I last checked, those builders didn’t have layouts enabled by default.\u003c/p\u003e\n\u003cp\u003eOne minor hiccup that might be related to layouts: My snap’s \u003ccode\u003einstall\u003c/code\u003e hook performs some tasks in the writable mounted directories. If the hook fails (because I had a thinko or something was missing), any attempt to reinstall a newer, fixed revision of the same snap will throw an error during the \u003ccode\u003einstall\u003c/code\u003e hook that the layout mount at \u003ccode\u003e/var/snap/my-snap/current/some/subdir\u003c/code\u003e does not exist. Once I reboot, the error goes away and I can install the fixed revision just fine.\u003c/p\u003e","post_number":12,"post_type":1,"updated_at":"2019-02-12T08:27:19.760Z","reply_count":1,"reply_to_post_number":8,"quote_count":0,"incoming_link_count":8,"reads":106,"readers_count":105,"score":66.2,"yours":false,"topic_id":7207,"topic_slug":"snap-layouts","display_username":"Tobias","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"zyga-snapd","avatar_template":"/user_avatar/forum.snapcraft.io/zyga-snapd/{size}/14_2.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":3064,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":42917,"name":"Ian Johnson","username":"ijohnson","avatar_template":"/user_avatar/forum.snapcraft.io/ijohnson/{size}/2091_2.png","created_at":"2019-02-12T13:21:48.818Z","cooked":"\u003cp\u003e\u003ca class=\"mention\" href=\"/u/tobias\"\u003e@tobias\u003c/a\u003e, is your issue similar to the one I encountered here: \u003ca href=\"https://forum.snapcraft.io/t/snapd-2-37-1-refresh-broke-layouts-snap-remove-install/9803/4\" class=\"inline-onebox\"\u003eSnapd 2.37.1 refresh broke layouts snap remove/install\u003c/a\u003e ?\u003c/p\u003e\n\u003cp\u003eIt would be interesting to see if you have a similar issue with the mount point showing up with \u003ccode\u003e//deleted\u003c/code\u003e at the end. You could try logging to $HOME the output of \u003ccode\u003ecat /proc/self/mountinfo\u003c/code\u003e during the hook.\u003c/p\u003e","post_number":13,"post_type":1,"updated_at":"2019-02-12T13:21:48.818Z","reply_count":1,"reply_to_post_number":12,"quote_count":0,"incoming_link_count":0,"reads":104,"readers_count":103,"score":25.8,"yours":false,"topic_id":7207,"topic_slug":"snap-layouts","display_username":"Ian Johnson","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://forum.snapcraft.io/t/snapd-2-37-1-refresh-broke-layouts-snap-remove-install/9803/4","internal":true,"reflection":false,"title":"Snapd 2.37.1 refresh broke layouts snap remove/install","clicks":5}],"read":true,"user_title":"","reply_to_user":{"username":"tobias","avatar_template":"/user_avatar/forum.snapcraft.io/tobias/{size}/4399_2.png"},"bookmarked":false,"actions_summary":[],"moderator":true,"admin":false,"staff":true,"user_id":2438,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":42920,"name":"Tobias","username":"tobias","avatar_template":"/user_avatar/forum.snapcraft.io/tobias/{size}/4399_2.png","created_at":"2019-02-12T13:48:39.501Z","cooked":"\u003cp\u003e\u003ca class=\"mention\" href=\"/u/ijohnson\"\u003e@ijohnson\u003c/a\u003e The snap does not get installed when \u003ccode\u003einstall\u003c/code\u003e fails, so I can’t really look inside the snap. I’ll see if I can throw together a test case that’s triggered on-demand after installation.\u003c/p\u003e","post_number":14,"post_type":1,"updated_at":"2019-02-12T13:48:39.501Z","reply_count":1,"reply_to_post_number":13,"quote_count":0,"incoming_link_count":2,"reads":100,"readers_count":99,"score":35.0,"yours":false,"topic_id":7207,"topic_slug":"snap-layouts","display_username":"Tobias","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"ijohnson","avatar_template":"/user_avatar/forum.snapcraft.io/ijohnson/{size}/2091_2.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":3064,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":42922,"name":"Zygmunt Krynicki","username":"zyga-snapd","avatar_template":"/user_avatar/forum.snapcraft.io/zyga-snapd/{size}/14_2.png","created_at":"2019-02-12T13:59:26.536Z","cooked":"\u003cp\u003eInteresting, please file a bug. It seems that on failed install we don’t discard any namespaces we have created.\u003c/p\u003e","post_number":15,"post_type":1,"updated_at":"2019-02-12T13:59:26.536Z","reply_count":1,"reply_to_post_number":14,"quote_count":0,"incoming_link_count":16,"reads":102,"readers_count":101,"score":105.4,"yours":false,"topic_id":7207,"topic_slug":"snap-layouts","display_username":"Zygmunt Krynicki","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"tobias","avatar_template":"/user_avatar/forum.snapcraft.io/tobias/{size}/4399_2.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":2,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":42968,"name":"Tobias","username":"tobias","avatar_template":"/user_avatar/forum.snapcraft.io/tobias/{size}/4399_2.png","created_at":"2019-02-13T07:54:58.516Z","cooked":"\u003cp\u003eDone: \u003ca href=\"https://bugs.launchpad.net/snapcraft/+bug/1815722\" rel=\"noopener nofollow ugc\"\u003ehttps://bugs.launchpad.net/snapcraft/+bug/1815722\u003c/a\u003e\u003c/p\u003e","post_number":16,"post_type":1,"updated_at":"2019-02-13T07:54:58.516Z","reply_count":0,"reply_to_post_number":15,"quote_count":0,"incoming_link_count":0,"reads":103,"readers_count":102,"score":20.6,"yours":false,"topic_id":7207,"topic_slug":"snap-layouts","display_username":"Tobias","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://bugs.launchpad.net/snapcraft/+bug/1815722","internal":false,"reflection":false,"title":"Bug #1815722 “Namespaces for failed snap installations are not d...” : Bugs : Snapcraft","clicks":18}],"read":true,"user_title":null,"reply_to_user":{"username":"zyga-snapd","avatar_template":"/user_avatar/forum.snapcraft.io/zyga-snapd/{size}/14_2.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":3064,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":43864,"name":"Sergio Schvezov","username":"sergiusens","avatar_template":"/user_avatar/forum.snapcraft.io/sergiusens/{size}/5621_2.png","created_at":"2019-02-27T12:12:55.879Z","cooked":"\u003cp\u003eNice edits, really appreciated!\u003c/p\u003e","post_number":17,"post_type":1,"updated_at":"2019-02-27T12:12:55.879Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":103,"readers_count":102,"score":20.6,"yours":false,"topic_id":7207,"topic_slug":"snap-layouts","display_username":"Sergio Schvezov","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"policy-reviewers","title_is_group":false,"bookmarked":false,"actions_summary":[],"moderator":true,"admin":false,"staff":true,"user_id":25,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":45309,"name":"林博仁(Buo-ren, Lin)","username":"Lin-Buo-Ren","avatar_template":"/user_avatar/forum.snapcraft.io/lin-buo-ren/{size}/4612_2.png","created_at":"2019-03-22T06:50:19.430Z","cooked":"\u003cp\u003eI wonder if this feature is compatible with the \u003ccode\u003eSNAPCRAFT_ARCH_TRIPLET\u003c/code\u003e variable?\u003c/p\u003e\n\u003cp\u003eToo lazy to verify it myself \u003cimg src=\"https://forum.snapcraft.io/images/emoji/emoji_one/expressionless.png?v=9\" title=\":expressionless:\" class=\"emoji\" alt=\":expressionless:\"\u003e\u003c/p\u003e","post_number":18,"post_type":1,"updated_at":"2019-03-22T06:50:19.430Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":1,"reads":100,"readers_count":99,"score":25.0,"yours":false,"topic_id":7207,"topic_slug":"snap-layouts","display_username":"林博仁(Buo-ren, Lin)","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"","bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1417,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":46471,"name":"林博仁(Buo-ren, Lin)","username":"Lin-Buo-Ren","avatar_template":"/user_avatar/forum.snapcraft.io/lin-buo-ren/{size}/4612_2.png","created_at":"2019-04-08T09:24:54.477Z","cooked":"\u003cp\u003eI wonder what’s the usecase of \u003ccode\u003esymlink\u003c/code\u003e ?\u003c/p\u003e","post_number":19,"post_type":1,"updated_at":"2019-04-08T09:24:54.477Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":2,"reads":93,"readers_count":92,"score":33.6,"yours":false,"topic_id":7207,"topic_slug":"snap-layouts","display_username":"林博仁(Buo-ren, Lin)","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"","bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1417,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":46472,"name":"Zygmunt Krynicki","username":"zyga-snapd","avatar_template":"/user_avatar/forum.snapcraft.io/zyga-snapd/{size}/14_2.png","created_at":"2019-04-08T09:26:11.488Z","cooked":"\u003cp\u003eNot everything has to be a bind mount. A symlink is much more lightweight way to relocate something.\u003c/p\u003e","post_number":20,"post_type":1,"updated_at":"2019-04-08T09:26:11.488Z","reply_count":0,"reply_to_post_number":19,"quote_count":0,"incoming_link_count":4,"reads":98,"readers_count":97,"score":69.6,"yours":false,"topic_id":7207,"topic_slug":"snap-layouts","display_username":"Zygmunt Krynicki","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"Lin-Buo-Ren","avatar_template":"/user_avatar/forum.snapcraft.io/lin-buo-ren/{size}/4612_2.png"},"bookmarked":false,"actions_summary":[{"id":2,"count":2}],"moderator":false,"admin":false,"staff":false,"user_id":2,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false}],"stream":[33034,33109,35217,35252,35278,35418,36017,36058,36084,37219,37220,42907,42917,42920,42922,42968,43864,45309,46471,46472,51997,52014,52018,52037,52061,52062,52063,52064,54870,58971,59087,59156,59178,59242,59252,59258,61050,64277,64412,67919,67922,68019,68165,105769,105772,105773,105774,105777,105779,121084,121321,123932,123946,123952,123956,123958,123960]},"timeline_lookup":[[1,1745],[2,1744],[3,1713],[4,1711],[6,1710],[7,1703],[8,1702],[9,1701],[10,1681],[12,1585],[15,1584],[17,1570],[18,1547],[19,1530],[21,1430],[22,1429],[25,1428],[29,1374],[30,1301],[31,1298],[34,1297],[35,1296],[37,1256],[38,1197],[39,1194],[40,1146],[42,1145],[43,1143],[44,486],[49,485],[50,92],[51,87],[52,23]],"tags":["zyga"],"id":7207,"title":"Snap layouts","fancy_title":"Snap layouts","posts_count":57,"created_at":"2018-09-05T09:42:22.339Z","views":16612,"reply_count":48,"like_count":34,"last_posted_at":"2023-05-24T11:29:48.946Z","visible":true,"closed":false,"archived":false,"has_summary":true,"archetype":"regular","slug":"snap-layouts","category_id":15,"word_count":4778,"deleted_at":null,"user_id":2,"featured_link":null,"pinned_globally":false,"pinned_at":null,"pinned_until":null,"image_url":null,"slow_mode_seconds":0,"draft":null,"draft_key":"topic_7207","draft_sequence":null,"unpinned":null,"pinned":false,"current_post_number":1,"highest_post_number":57,"deleted_by":null,"actions_summary":[{"id":4,"count":0,"hidden":false,"can_act":false},{"id":8,"count":0,"hidden":false,"can_act":false},{"id":7,"count":0,"hidden":false,"can_act":false}],"chunk_size":20,"bookmarked":false,"topic_timer":null,"message_bus_last_id":0,"participant_count":17,"show_read_indicator":false,"thumbnails":null,"details":{"notification_level":1,"participants":[{"id":2,"username":"zyga-snapd","name":"Zygmunt Krynicki","avatar_template":"/user_avatar/forum.snapcraft.io/zyga-snapd/{size}/14_2.png","post_count":10,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null},{"id":3064,"username":"tobias","name":"Tobias","avatar_template":"/user_avatar/forum.snapcraft.io/tobias/{size}/4399_2.png","post_count":10,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null},{"id":2772,"username":"degville","name":"Graham Morrison","avatar_template":"/user_avatar/forum.snapcraft.io/degville/{size}/2021_2.png","post_count":7,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null},{"id":11710,"username":"rpjday","name":"Robert P. J. Day","avatar_template":"/user_avatar/forum.snapcraft.io/rpjday/{size}/8457_2.png","post_count":6,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null},{"id":21,"username":"jdstrand","name":"Jamie Strandboge","avatar_template":"/user_avatar/forum.snapcraft.io/jdstrand/{size}/6376_2.png","post_count":5,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null},{"id":9,"username":"ogra","name":"Oliver Grawert","avatar_template":"/user_avatar/forum.snapcraft.io/ogra/{size}/22_2.png","post_count":3,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null},{"id":1417,"username":"Lin-Buo-Ren","name":"林博仁(Buo-ren, Lin)","avatar_template":"/user_avatar/forum.snapcraft.io/lin-buo-ren/{size}/4612_2.png","post_count":2,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null},{"id":13,"username":"pedronis","name":"Samuele Pedroni","avatar_template":"/user_avatar/forum.snapcraft.io/pedronis/{size}/46_2.png","post_count":2,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null},{"id":2438,"username":"ijohnson","name":"Ian Johnson","avatar_template":"/user_avatar/forum.snapcraft.io/ijohnson/{size}/2091_2.png","post_count":2,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null},{"id":1601,"username":"Shubham_Pushpkar","name":"suvhm","avatar_template":"/letter_avatar/shubham_pushpkar/{size}/5_6d6f4cde2641c35611d5cac2fb97c77e.png","post_count":1,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null},{"id":14229,"username":"dilyn","name":"Dilyn Corner","avatar_template":"/letter_avatar/dilyn/{size}/5_6d6f4cde2641c35611d5cac2fb97c77e.png","post_count":1,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null},{"id":2687,"username":"TravisEz13","name":"Travis Plunk","avatar_template":"/user_avatar/forum.snapcraft.io/travisez13/{size}/4419_2.png","post_count":1,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null},{"id":33,"username":"roadmr","name":"Daniel Manrique","avatar_template":"/user_avatar/forum.snapcraft.io/roadmr/{size}/4385_2.png","post_count":1,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null},{"id":25,"username":"sergiusens","name":"Sergio Schvezov","avatar_template":"/user_avatar/forum.snapcraft.io/sergiusens/{size}/5621_2.png","post_count":1,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null},{"id":6191,"username":"busybox","name":"Vinit Bidkar","avatar_template":"/letter_avatar/busybox/{size}/5_6d6f4cde2641c35611d5cac2fb97c77e.png","post_count":1,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null},{"id":17,"username":"kyrofa","name":"Kyle Fazzari","avatar_template":"/user_avatar/forum.snapcraft.io/kyrofa/{size}/4384_2.png","post_count":1,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null},{"id":286,"username":"lucyllewy","name":"Lucy Llewellyn","avatar_template":"/user_avatar/forum.snapcraft.io/lucyllewy/{size}/9782_2.png","post_count":1,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null}],"created_by":{"id":2,"username":"zyga-snapd","name":"Zygmunt Krynicki","avatar_template":"/user_avatar/forum.snapcraft.io/zyga-snapd/{size}/14_2.png"},"last_poster":{"id":2772,"username":"degville","name":"Graham Morrison","avatar_template":"/user_avatar/forum.snapcraft.io/degville/{size}/2021_2.png"},"links":[{"url":"https://forum.snapcraft.io/t/using-in-development-features-in-snapcraft-yaml/5766","title":"Using in-development features in `snapcraft.yaml`","internal":true,"attachment":false,"reflection":false,"clicks":19,"user_id":2,"domain":"forum.snapcraft.io","root_domain":"snapcraft.io"},{"url":"https://bugs.launchpad.net/snapcraft/+bug/1815722","title":"Bug #1815722 “Namespaces for failed snap installations are not d...” : Bugs : Snapcraft","internal":false,"attachment":false,"reflection":false,"clicks":18,"user_id":3064,"domain":"bugs.launchpad.net","root_domain":"launchpad.net"},{"url":"https://forum.snapcraft.io/t/the-snap-format/698","title":"The snap format","internal":true,"attachment":false,"reflection":false,"clicks":15,"user_id":13,"domain":"forum.snapcraft.io","root_domain":"snapcraft.io"},{"url":"https://forum.snapcraft.io/t/layouts-re-mapping-snap-directories/1471/85","title":"Layouts: re-mapping snap directories","internal":true,"attachment":false,"reflection":true,"clicks":15,"user_id":2,"domain":"forum.snapcraft.io","root_domain":"snapcraft.io"},{"url":"https://forum.snapcraft.io/t/snap-confinement/6233","title":"Snap confinement","internal":true,"attachment":false,"reflection":false,"clicks":10,"user_id":2,"domain":"forum.snapcraft.io","root_domain":"snapcraft.io"},{"url":"https://forum.snapcraft.io/t/snapcraft-overview/8940","title":"Snapcraft overview","internal":true,"attachment":false,"reflection":false,"clicks":5,"user_id":2,"domain":"forum.snapcraft.io","root_domain":"snapcraft.io"},{"url":"https://forum.snapcraft.io/t/snapd-2-37-1-refresh-broke-layouts-snap-remove-install/9803/4","title":"Snapd 2.37.1 refresh broke layouts snap remove/install","internal":true,"attachment":false,"reflection":false,"clicks":5,"user_id":2438,"domain":"forum.snapcraft.io","root_domain":"snapcraft.io"},{"url":"https://forum.snapcraft.io/t/snaps-and-opencl/8509/4","title":"Snaps and OpenCL","internal":true,"attachment":false,"reflection":true,"clicks":5,"user_id":1497,"domain":"forum.snapcraft.io","root_domain":"snapcraft.io"},{"url":"https://forum.snapcraft.io/t/the-system-files-interface/9358/3","title":"The system-files interface","internal":true,"attachment":false,"reflection":true,"clicks":5,"user_id":21,"domain":"forum.snapcraft.io","root_domain":"snapcraft.io"},{"url":"https://launchpad.net/~glancr/+snap/mirros-one/+build/620945","title":"armhf build of mirros-one snap package in ubuntu xenial-updates : mirros-one : Snap packages : glancr team","internal":false,"attachment":false,"reflection":false,"clicks":4,"user_id":3064,"domain":"launchpad.net","root_domain":"launchpad.net"},{"url":"https://forum.snapcraft.io/t/base-snaps/11198","title":"Base snaps","internal":true,"attachment":false,"reflection":false,"clicks":4,"user_id":2,"domain":"forum.snapcraft.io","root_domain":"snapcraft.io"},{"url":"https://forum.snapcraft.io/t/snap-documentation-page-deprecated/3781","title":"Snap Documentation (page deprecated)","internal":true,"attachment":false,"reflection":true,"clicks":4,"user_id":2772,"domain":"forum.snapcraft.io","root_domain":"snapcraft.io"},{"url":"https://git.launchpad.net/mirros-snap/tree/snap/snapcraft.yaml?h=tmp-core16#n68","title":"mirros-snap - [no description]","internal":false,"attachment":false,"reflection":false,"clicks":4,"user_id":3064,"domain":"git.launchpad.net","root_domain":"launchpad.net"},{"url":"https://forum.snapcraft.io/t/layout-magic-collection/10501","title":"Layout magic collection","internal":true,"attachment":false,"reflection":true,"clicks":3,"user_id":1417,"domain":"forum.snapcraft.io","root_domain":"snapcraft.io"},{"url":"https://status.snapcraft.io","title":null,"internal":false,"attachment":false,"reflection":false,"clicks":1,"user_id":3064,"domain":"status.snapcraft.io","root_domain":"snapcraft.io"},{"url":"https://github.com/snapcore/snapd/blob/master/snap/validate.go#L901-L965","title":null,"internal":false,"attachment":false,"reflection":false,"clicks":1,"user_id":14229,"domain":"github.com","root_domain":"github.com"},{"url":"http://build.snapcraft.io","title":null,"internal":false,"attachment":false,"reflection":false,"clicks":1,"user_id":3064,"domain":"build.snapcraft.io","root_domain":"snapcraft.io"}]}}