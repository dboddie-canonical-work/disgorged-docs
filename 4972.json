{"post_stream":{"posts":[{"id":24040,"name":"Kyle Fazzari","username":"kyrofa","avatar_template":"/user_avatar/forum.snapcraft.io/kyrofa/{size}/4384_2.png","created_at":"2018-04-12T21:32:37.840Z","cooked":"\u003cp\u003eBy default, \u003ca href=\"/t/snapcraft-overview/8940\"\u003eSnapcraft\u003c/a\u003e builds a snap to run on the same architecture as the build environment. This behaviour can be modified with an optional root \u003ccode\u003earchitectures\u003c/code\u003e keyword in the snap’s \u003ca href=\"/t/the-snapcraft-format/8337\"\u003esnapcraft.yaml\u003c/a\u003e.\u003c/p\u003e\n\u003cp\u003eArchitecture features and syntax are dependent on which \u003ca href=\"/t/base-snaps/11198\"\u003ebase\u003c/a\u003e is being used, as outlined below:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"#heading--core22\"\u003ebase: core22\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#heading--core20-core18\"\u003ebase: core20 | core18 | core\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003ebase: core22\u003c/h2\u003e\n\u003ch3\u003eSyntax\u003c/h3\u003e\n\u003cp\u003eThe \u003ccode\u003earchitectures\u003c/code\u003e keyword defines a list of \u003ccode\u003ebuild-on\u003c/code\u003e-\u0026gt;\u003ccode\u003ebuild-for\u003c/code\u003e sets with the following syntax:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-yaml\"\u003earchitectures:\n  - build-on: [\u0026lt;arch 1\u0026gt;, \u0026lt;arch 2\u0026gt;]\n    build-for: [\u0026lt;arch 1\u0026gt;]\n  - build-on: [\u0026lt;arch 3\u0026gt;]\n    build-for: [\u0026lt;arch 4\u0026gt;]\n    ...\n\u003c/code\u003e\u003c/pre\u003e\n\u003cul\u003e\n\u003cli\u003evalid architectures in \u003ccode\u003ecore22\u003c/code\u003e are \u003ccode\u003earm64\u003c/code\u003e, \u003ccode\u003earmhf\u003c/code\u003e, \u003ccode\u003eamd64\u003c/code\u003e, \u003ccode\u003eppc64el\u003c/code\u003e, and \u003ccode\u003es390x\u003c/code\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ccode\u003ebuild-for: all\u003c/code\u003e can be used for snaps that can run on all architectures (e.g. a snap that is only a shell or  python script)\u003c/li\u003e\n\u003cli\u003eonly 1 architecture can be defined for each \u003ccode\u003ebuild-for\u003c/code\u003e parameter\u003c/li\u003e\n\u003cli\u003ethe environmental variable \u003ccode\u003eSNAPCRAFT_BUILD_FOR=\u0026lt;arch\u0026gt;\u003c/code\u003e or the command-line argument \u003ccode\u003e--build-for=\u0026lt;arch\u0026gt;\u003c/code\u003e limits snapcraft to building only the snap matching \u003ccode\u003ebuild-for: [\u0026lt;arch\u0026gt;]\u003c/code\u003e\n\u003c/li\u003e\n\u003cli\u003eif the value list is a single item, it can be simplified to a scalar (e.g. \u003ccode\u003ebuild-on: amd64\u003c/code\u003e)\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003eExamples\u003c/h3\u003e\n\u003ch4\u003eExample 1 - single architecture\u003c/h4\u003e\n\u003cpre\u003e\u003ccode class=\"lang-yaml\"\u003earchitectures:\n  - build-on: amd64\n    build-for: amd64\n\u003c/code\u003e\u003c/pre\u003e\n\u003cul\u003e\n\u003cli\u003ebuilding on \u003ccode\u003eamd64\u003c/code\u003e will produce 1 snap for \u003ccode\u003eamd64\u003c/code\u003e\n\u003c/li\u003e\n\u003cli\u003ebuilding on another architecture will cause Snapcraft to raise an error\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch4\u003eExample 2 - single architecture, shorthand\u003c/h4\u003e\n\u003cpre\u003e\u003ccode class=\"lang-yaml\"\u003earchitectures:\n  - amd64\n\u003c/code\u003e\u003c/pre\u003e\n\u003cul\u003e\n\u003cli\u003ethis is the same as the previous example, but in a shorthand format\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch4\u003eExample 3 - multiple architectures\u003c/h4\u003e\n\u003cpre\u003e\u003ccode class=\"lang-yaml\"\u003earchitectures:\n  - build-on: amd64\n    build-for: amd64\n  - build-on: arm64\n    build-for: arm64\n\u003c/code\u003e\u003c/pre\u003e\n\u003cul\u003e\n\u003cli\u003ebuilding on \u003ccode\u003eamd64\u003c/code\u003e will produce 1 snap for \u003ccode\u003eamd64\u003c/code\u003e\n\u003c/li\u003e\n\u003cli\u003ebuilding on \u003ccode\u003earm64\u003c/code\u003e will produce 1 snap for \u003ccode\u003earm64\u003c/code\u003e\n\u003c/li\u003e\n\u003cli\u003ebuilding on another architecture will cause Snapcraft to raise an error\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch4\u003eExample 4 - multiple architectures, shorthand\u003c/h4\u003e\n\u003cpre\u003e\u003ccode class=\"lang-yaml\"\u003earchitectures:\n  - amd64\n  - arm64\n\u003c/code\u003e\u003c/pre\u003e\n\u003cul\u003e\n\u003cli\u003ethis is the same as the previous example, but in a shorthand format\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch4\u003eExample 5 - multiple architecture, cross-compiling\u003c/h4\u003e\n\u003cpre\u003e\u003ccode class=\"lang-yaml\"\u003earchitectures:\n  - build-on: amd64\n    build-for: amd64\n  - build-on: [amd64, arm64]\n    build-for: arm64\n\u003c/code\u003e\u003c/pre\u003e\n\u003cul\u003e\n\u003cli\u003ebuilding on \u003ccode\u003eamd64\u003c/code\u003e will produce 2 snaps, 1 snap for \u003ccode\u003eamd64\u003c/code\u003e and 1 snap for \u003ccode\u003earm64\u003c/code\u003e\n\u003c/li\u003e\n\u003cli\u003ebuilding on \u003ccode\u003earm64\u003c/code\u003e will produce 1 snap for \u003ccode\u003earm64\u003c/code\u003e\n\u003c/li\u003e\n\u003cli\u003ebuilding on another architecture will cause Snapcraft to raise an error\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch4\u003eExample 6 - Architecture independent\u003c/h4\u003e\n\u003cpre\u003e\u003ccode class=\"lang-yaml\"\u003earchitectures:\n  - build-on: amd64\n    build-for: all\n\u003c/code\u003e\u003c/pre\u003e\n\u003cul\u003e\n\u003cli\u003efor snaps that can run on any architecture (e.g. python or shell scripts), use \u003ccode\u003ebuild-for: all\u003c/code\u003e\n\u003c/li\u003e\n\u003cli\u003ebuilding on \u003ccode\u003eamd64\u003c/code\u003e will produce 1 snap that can run on any architecture\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003ebase: core20 | core18 | core\u003c/h2\u003e\n\u003ch3\u003eSyntax\u003c/h3\u003e\n\u003cp\u003eThe \u003ccode\u003earchitectures\u003c/code\u003e keyword defines a list of build and run architecture sets with the following syntax:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-yaml\"\u003earchitectures:\n  - build-on: [\u0026lt;arch 1\u0026gt;, \u0026lt;arch 2\u0026gt;]\n    run-on: [\u0026lt;arch 1\u0026gt;, \u0026lt;arch 2\u0026gt;]\n  - build-on: [\u0026lt;arch 3\u0026gt;]\n    run-on: [\u0026lt;arch 4\u0026gt;]\n    ...\n\u003c/code\u003e\u003c/pre\u003e\n\u003cul\u003e\n\u003cli\u003evalid architectures include \u003ccode\u003earm64\u003c/code\u003e, \u003ccode\u003earmhf\u003c/code\u003e, \u003ccode\u003eamd64\u003c/code\u003e, \u003ccode\u003ei386\u003c/code\u003e, \u003ccode\u003eppc64el\u003c/code\u003e, and \u003ccode\u003es390x\u003c/code\u003e\n\u003c/li\u003e\n\u003cli\u003esnaps using a base of \u003ccode\u003ecore\u003c/code\u003e and \u003ccode\u003ecore18\u003c/code\u003e can additionally support \u003ccode\u003ei386\u003c/code\u003e\n\u003c/li\u003e\n\u003cli\u003esupport for \u003ccode\u003ei386\u003c/code\u003e was removed in \u003ccode\u003ecore20\u003c/code\u003e (see \u003ca href=\"/t/migrating-bases/23455#heading--arch\"\u003eMigrating bases\u003c/a\u003e for details)\u003c/li\u003e\n\u003cli\u003ethe default value for \u003ccode\u003erun-on\u003c/code\u003e is the value of \u003ccode\u003ebuild-on\u003c/code\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ccode\u003erun-on:\u003c/code\u003e supports a value of \u003ccode\u003eall\u003c/code\u003e to denote a snap that can run everywhere (e.g. a snap that is only shell scripts or python)\u003c/li\u003e\n\u003cli\u003eif the value list is a single item, it can be simplified to a scalar (e.g. \u003ccode\u003ebuild-on: amd64\u003c/code\u003e)\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003eExamples\u003c/h3\u003e\n\u003ch4\u003eExample 1\u003c/h4\u003e\n\u003cpre\u003e\u003ccode class=\"lang-yaml\"\u003e    architectures:\n      - build-on: i386\n        run-on: [amd64, i386]\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch5\u003eSnapcraft’s interpretation\u003c/h5\u003e\n\u003cp\u003eIf running on an i386 host, Snapcraft will build a snap that claims it runs on both amd64 and i386. If running elsewhere, Snapcraft will follow its default behavior, building a snap that runs on the build architecture.\u003c/p\u003e\n\u003ch5\u003eCI systems’ interpretation\u003c/h5\u003e\n\u003cp\u003eAs there is a single non-scalar object in this list, CI systems know to produce only a single snap. Checking the \u003ccode\u003ebuild-on\u003c/code\u003e key, they know that it needs to be built on i386.\u003c/p\u003e\n\u003ch4\u003eExample 2\u003c/h4\u003e\n\u003cpre\u003e\u003ccode class=\"lang-yaml\"\u003e    architectures:\n      - build-on: amd64\n        run-on: all\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch5\u003eSnapcraft’s interpretation\u003c/h5\u003e\n\u003cp\u003eIf running on an amd64 host, Snapcraft will build a snap that claims it can run on all architectures. If running elsewhere, Snapcraft will follow its default behavior, building a snap that runs on the build architecture.\u003c/p\u003e\n\u003ch5\u003eCI systems’ interpretation\u003c/h5\u003e\n\u003cp\u003eCI systems can assume that the user only wants the snap built on amd64.\u003c/p\u003e\n\u003ch4\u003eExample 3\u003c/h4\u003e\n\u003cpre\u003e\u003ccode class=\"lang-yaml\"\u003e    architectures:\n      - build-on: amd64\n        run-on: amd64\n      - build-on: i386\n        run-on: i386\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eWhich is the same as:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-yaml\"\u003e    architectures:\n      - build-on: amd64\n      - build-on: i386\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch5\u003eSnapcraft’s interpretation\u003c/h5\u003e\n\u003cp\u003eAs far as Snapcraft is concerned, this is no different from its default behavior.\u003c/p\u003e\n\u003ch5\u003eCI systems’ interpretation\u003c/h5\u003e\n\u003cp\u003eCI systems can assume that the user only wants the snap built on amd64 and i386, and the resulting snaps are to be considered a build set (e.g. if amd64 succeeds but i386 fails, the entire set should be considered to have failed).\u003c/p\u003e\n\u003ch4\u003eExample 4\u003c/h4\u003e\n\u003cpre\u003e\u003ccode class=\"lang-yaml\"\u003e    architectures:\n      - build-on: amd64\n        run-on: amd64\n      - build-on: i386\n        run-on: i386\n      - build-on: armhf\n        run-on: armhf\n        build-error: ignore\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch5\u003eSnapcraft’s interpretation\u003c/h5\u003e\n\u003cp\u003eAgain, as far as Snapcraft is concerned, this is no different from its default behavior.\u003c/p\u003e\n\u003ch5\u003eCI systems’ interpretation\u003c/h5\u003e\n\u003cp\u003eCI systems can assume that the user only wants the snap built on amd64, i386, and armhf. While the resulting snaps are considered a build set, armhf may fail. If it does, release the rest of the build set as normal (i.e. don’t fail the entire build set if armhf fails). If amd64 or i386 fails, however, still consider the entire build set to have failed.\u003c/p\u003e\n\u003ch4\u003eExample 5\u003c/h4\u003e\n\u003cpre\u003e\u003ccode class=\"lang-yaml\"\u003e    architectures:\n      - build-on: [amd64, i386]\n        run-on: all\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch5\u003eSnapcraft’s interpretation\u003c/h5\u003e\n\u003cp\u003eIf building on amd64 or i386, Snapcraft will produce a snap that claims it runs on all architectures. If running elsewhere, Snapcraft will follow its default behavior, building a snap that runs on the build architecture.\u003c/p\u003e\n\u003ch5\u003eCI systems’ interpretation\u003c/h5\u003e\n\u003cp\u003eThere is only a single non-scalar item in \u003ccode\u003earchitectures\u003c/code\u003e, so CI systems know there is only a single snap to be produced from this, and the resulting snap will claim it runs on all architectures. However, the snap author has specified that either amd64 or i386 could be used to produce this snap, which leaves it up to the CI system to decide which architecture to use. Which one has a smaller build queue?\u003c/p\u003e\n\u003ch4\u003eExample 6\u003c/h4\u003e\n\u003cpre\u003e\u003ccode class=\"lang-yaml\"\u003e    architectures: [amd64, i386]\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eWhich is the same as:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-yaml\"\u003e    architectures:\n      - build-on: [amd64, i386]\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eWhich is the same as:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-yaml\"\u003e    architectures:\n      - build-on: [amd64, i386]\n        run-on: [amd64, i386]\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch5\u003eSnapcraft’s interpretation\u003c/h5\u003e\n\u003cp\u003eIf building on amd64 or i386, Snapcraft will produce a snap that claims it runs on both amd64 and i386. If running elsewhere, Snapcraft will follow its default behavior, building a snap that runs on the build architecture.\u003c/p\u003e\n\u003ch5\u003eCI systems’ interpretation\u003c/h5\u003e\n\u003cp\u003eThere is only a single non-scalar item in \u003ccode\u003earchitectures\u003c/code\u003e, so CI systems know there is only a single snap to be produced from this, and the resulting snap will claim it runs on both amd64 and i386. However, the snap author has specified that either amd64 or i386 could be used to produce this snap, which leaves it up to the CI system to decide which architecture to use. Which one has a smaller build queue?\u003c/p\u003e\n\u003ch4\u003eExample 7\u003c/h4\u003e\n\u003cpre\u003e\u003ccode class=\"lang-yaml\"\u003e    architectures:\n      - build-on: amd64\n        run-on: all\n      - build-on: i386\n        run-on: i386\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch5\u003eSnapcraft’s interpretation\u003c/h5\u003e\n\u003cp\u003eTechnically Snapcraft could work with this, and treat it similarly to Example 5. However, in this proposal it is an error, mostly to inform the user because of the CI systems’ interpretation of this.\u003c/p\u003e\n\u003ch5\u003eCI systems’ interpretation\u003c/h5\u003e\n\u003cp\u003eThere are two non-scalar items in \u003ccode\u003earchitectures\u003c/code\u003e, which implies that two snaps will be built. However, one of the snaps to be produced would claim it runs on i386, while the other would claim it runs \u003cem\u003eeverywhere\u003c/em\u003e (including i386). That means they would \u003cem\u003eboth\u003c/em\u003e be released to i386, which is likely not what the developer intended (since the user will only receive the latest). This is an \u003cstrong\u003eerror case\u003c/strong\u003e.\u003c/p\u003e\n\u003ch2\u003eCI systems and build-sets\u003c/h2\u003e\n\u003cp\u003eContinuous Integration (CI) systems, such as \u003ca href=\"https://build.snapcraft.io\"\u003ebuild.snapcraft.io\u003c/a\u003e, can use the \u003cem\u003earchitectures\u003c/em\u003e keyword to determine which architectures to build a snap on. With none specified, a snap is built on all architectures.\u003c/p\u003e\n\u003cp\u003eA build-set is a set of snaps built at the same time from the same snapcraft.yaml, such as from a  CI-build triggered by a \u003cem\u003egit commit\u003c/em\u003e.\u003c/p\u003e\n\u003cp\u003eRather than manage build revisions separately, a build-set’s revisions can be managed as a group. Assuming a CI system will fail when a single build fails within a build-set, \u003ccode\u003ebuild-error: ignore\u003c/code\u003e can be used to indicate an \u003cem\u003eexperimental\u003c/em\u003e or \u003cem\u003ein-progress\u003c/em\u003e architecture that is included in a build-set if its build succeeds but not cause a CI build failure if it fails.\u003c/p\u003e\n\u003cp\u003eFor example,  without \u003ccode\u003ebuild-error: ignore\u003c/code\u003e, and given a build set of \u003ccode\u003e[amd64, i386, armhf]\u003c/code\u003e. If the \u003ccode\u003earmhf\u003c/code\u003e build fails, the entire build-set is considered to have failed, regardless of whether or not \u003ccode\u003eamd64\u003c/code\u003e and \u003ccode\u003ei386\u003c/code\u003e builds succeeded.\u003c/p\u003e\n\u003cp\u003eEven without local access to a specific hardware architecture, \u003ccode\u003esnapcraft remote-build\u003c/code\u003e enables anyone to run a multi-architecture snap build process on remote servers using \u003ca href=\"https://launchpad.net/\"\u003eLaunchpad\u003c/a\u003e. See \u003ca href=\"/t/remote-build/14400\"\u003eRemote build\u003c/a\u003e for more details.\u003c/p\u003e","post_number":1,"post_type":1,"updated_at":"2022-07-28T14:15:56.644Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":1556,"reads":224,"readers_count":223,"score":7909.8,"yours":false,"topic_id":4972,"topic_slug":"architectures","display_username":"Kyle Fazzari","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":12,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://forum.snapcraft.io/t/the-snapcraft-format/8337","internal":true,"reflection":false,"title":"The snapcraft.yaml schema","clicks":14},{"url":"https://forum.snapcraft.io/t/remote-build/14400","internal":true,"reflection":false,"title":"Remote build","clicks":9},{"url":"https://build.snapcraft.io","internal":false,"reflection":false,"clicks":5},{"url":"https://launchpad.net/","internal":false,"reflection":false,"title":"Launchpad","clicks":4},{"url":"https://forum.snapcraft.io/t/snapcraft-overview/8940","internal":true,"reflection":false,"title":"Snapcraft overview","clicks":1},{"url":"https://forum.snapcraft.io/t/migrating-between-bases/23455","internal":true,"reflection":false,"title":"Migrating between bases","clicks":0},{"url":"https://forum.snapcraft.io/t/base-snaps/11198","internal":true,"reflection":false,"title":"Base snaps","clicks":0},{"url":"https://forum.snapcraft.io/t/how-to-enable-arm64-builds/5618/5","internal":true,"reflection":true,"title":"How to enable arm64 builds?","clicks":18},{"url":"https://forum.snapcraft.io/t/more-architectures-enabled-in-build-snapcraft-io/7733","internal":true,"reflection":true,"title":"More architectures enabled in build.snapcraft.io","clicks":5},{"url":"https://forum.snapcraft.io/t/what-is-the-proper-way-to-build-and-support-multi-architecture-snap-in-store-year-2018/6454/2","internal":true,"reflection":true,"title":"What is the proper way to build and support multi-architecture snap in store (year 2018)?","clicks":3},{"url":"https://forum.snapcraft.io/t/snapcraft-yaml-reference/4276","internal":true,"reflection":true,"title":"Snapcraft.yaml reference","clicks":1},{"url":"https://forum.snapcraft.io/t/welcome-snapcraft-2-42/5322","internal":true,"reflection":true,"title":"Welcome snapcraft 2.42","clicks":1},{"url":"https://forum.snapcraft.io/t/no-snaps-installed-on-a-new-ubuntu-core-port-kernel-gadget/6721/15","internal":true,"reflection":true,"title":"No snaps installed on a new ubuntu core port (kernel, gadget)","clicks":0},{"url":"https://forum.snapcraft.io/t/intermediate-snapcraft-yaml-example/33076","internal":true,"reflection":true,"title":"Intermediate snapcraft.yaml example","clicks":0},{"url":"https://forum.snapcraft.io/t/documentation-roadmap/8763","internal":true,"reflection":true,"title":"Documentation roadmap","clicks":0},{"url":"https://forum.snapcraft.io/t/build-from-github/26004","internal":true,"reflection":true,"title":"Build from GitHub","clicks":0},{"url":"https://forum.snapcraft.io/t/snap-documentation/11127","internal":true,"reflection":true,"title":"Snap documentation","clicks":0},{"url":"https://forum.snapcraft.io/t/is-it-possible-to-drop-an-unsupported-architecture-from-the-store/10510/10","internal":true,"reflection":true,"title":"Is it possible to drop an unsupported architecture from the store?","clicks":0},{"url":"https://forum.snapcraft.io/t/call-for-testing-snapcraft-2-42/5168","internal":true,"reflection":true,"title":"Call for testing: snapcraft 2.42","clicks":0},{"url":"https://forum.snapcraft.io/t/what-is-the-proper-way-to-build-and-support-multi-architecture-snap-in-store-year-2018/6454/10","internal":true,"reflection":true,"title":"What is the proper way to build and support multi-architecture snap in store (year 2018)?","clicks":0},{"url":"https://forum.snapcraft.io/t/cross-compile-an-autotools-project/35643","internal":true,"reflection":true,"title":"Cross-compile an autotools project","clicks":0},{"url":"https://forum.snapcraft.io/t/about-findfs-unable-to-resolve-label-writable/8074/24","internal":true,"reflection":true,"title":"About findfs: unable to resolve 'LABEL=writable'","clicks":0},{"url":"https://forum.snapcraft.io/t/snapcraft-top-level-metadata/8334","internal":true,"reflection":true,"title":"Snapcraft top-level metadata","clicks":0},{"url":"https://forum.snapcraft.io/t/how-can-i-publish-a-snap-that-can-provide-binaries-for-all-the-supported-architectures/8556/4","internal":true,"reflection":true,"title":"How can I publish a snap that can provide binaries for all the supported architectures?","clicks":0},{"url":"https://forum.snapcraft.io/t/python-plugin-byte-compiling/11103/2","internal":true,"reflection":true,"title":"Python plugin byte compiling","clicks":0},{"url":"https://forum.snapcraft.io/t/cross-compile-snap-on-amd64-to-arm/11133/7","internal":true,"reflection":true,"title":"Cross compile snap on amd64 to arm","clicks":0}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":6}],"moderator":false,"admin":false,"staff":false,"user_id":17,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":true,"last_wiki_edit":"2022-07-28T14:15:56.743Z","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":30268,"name":"Erik Berkun-Drevnig","username":"eberkund","avatar_template":"/user_avatar/forum.snapcraft.io/eberkund/{size}/2795_2.png","created_at":"2018-07-22T00:41:26.724Z","cooked":"\u003cp\u003eWhat about cross compilation? Shouldn’t there also be a \u003ccode\u003ebuild-for\u003c/code\u003e keyword?\u003c/p\u003e","post_number":2,"post_type":1,"updated_at":"2018-07-22T00:41:26.724Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":1,"reads":132,"readers_count":131,"score":36.0,"yours":false,"topic_id":4972,"topic_slug":"architectures","display_username":"Erik Berkun-Drevnig","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"","bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":2126,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":32617,"name":"Oliver Grawert","username":"ogra","avatar_template":"/user_avatar/forum.snapcraft.io/ogra/{size}/22_2.png","created_at":"2018-08-30T14:59:54.576Z","cooked":"\u003caside class=\"quote no-group\" data-username=\"eberkund\" data-post=\"2\" data-topic=\"4972\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"20\" height=\"20\" src=\"https://forum.snapcraft.io/user_avatar/forum.snapcraft.io/eberkund/40/2795_2.png\" class=\"avatar\"\u003e eberkund:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eShouldn’t there also be a \u003ccode\u003ebuild-for\u003c/code\u003e keyword?\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003ewell, the combination fo build-on and run-on is essentially that …\u003c/p\u003e\n\u003cp\u003eif you cross build for armhf you’d use “build-on: amd64” and “run-on: armhf” like here:\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://github.com/ogra1/pi-kiosk-gadget/blob/master/snapcraft.yaml#L11\" class=\"onebox\" target=\"_blank\" rel=\"noopener\"\u003ehttps://github.com/ogra1/pi-kiosk-gadget/blob/master/snapcraft.yaml#L11\u003c/a\u003e\u003c/p\u003e","post_number":3,"post_type":1,"updated_at":"2018-08-30T14:59:54.576Z","reply_count":0,"reply_to_post_number":2,"quote_count":1,"incoming_link_count":9,"reads":126,"readers_count":125,"score":69.8,"yours":false,"topic_id":4972,"topic_slug":"architectures","display_username":"Oliver Grawert","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://github.com/ogra1/pi-kiosk-gadget/blob/master/snapcraft.yaml#L11","internal":false,"reflection":false,"title":"pi-kiosk-gadget/snapcraft.yaml at master · ogra1/pi-kiosk-gadget · GitHub","clicks":11}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":9,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":32618,"name":"Oliver Grawert","username":"ogra","avatar_template":"/user_avatar/forum.snapcraft.io/ogra/{size}/22_2.png","created_at":"2018-08-30T15:02:12.958Z","cooked":"\u003cp\u003e\u003ca class=\"mention\" href=\"/u/kyrofa\"\u003e@kyrofa\u003c/a\u003e it would be very helpful if this doc could have some cross reference to the architecture specific bits in \u003ccode\u003estage-packages:\u003c/code\u003e (and/or \u003ccode\u003ebuild-packages\u003c/code\u003e) often you use the more exotic build-on/run-on combinations together with arch specific entries in build/stage-packages entries.\u003c/p\u003e","post_number":4,"post_type":1,"updated_at":"2018-08-30T15:02:38.553Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":4,"reads":111,"readers_count":110,"score":56.8,"yours":false,"topic_id":4972,"topic_slug":"architectures","display_username":"Oliver Grawert","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":9,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":32899,"name":"Erik Berkun-Drevnig","username":"eberkund","avatar_template":"/user_avatar/forum.snapcraft.io/eberkund/{size}/2795_2.png","created_at":"2018-09-03T23:12:07.277Z","cooked":"\u003cp\u003eThanks \u003ca class=\"mention\" href=\"/u/ogra\"\u003e@ogra\u003c/a\u003e I am still a bit confused though. What is the relationship between the root keyword \u003ccode\u003earchitectures\u003c/code\u003e and the command line \u003ccode\u003e--target-arch\u003c/code\u003e flag?\u003c/p\u003e\n\u003cp\u003eFor example \u003ccode\u003esnapcraft --target-arch=armhf\u003c/code\u003e and also how about snaps which are “cross platform” (say Bash scripts or interpretted programs) versus programs which need to be compiled separately and linked to platform specific dynamic libraries?\u003c/p\u003e","post_number":5,"post_type":1,"updated_at":"2018-09-03T23:19:32.494Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":1,"reads":106,"readers_count":105,"score":30.8,"yours":false,"topic_id":4972,"topic_slug":"architectures","display_username":"Erik Berkun-Drevnig","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":2,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"","bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":2126,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":32918,"name":"Oliver Grawert","username":"ogra","avatar_template":"/user_avatar/forum.snapcraft.io/ogra/{size}/22_2.png","created_at":"2018-09-04T08:56:21.000Z","cooked":"\u003cp\u003eOnce you have the proper build-on and run-on lines, there is no need for --target-architecture anymore since you defined it in your snapcraft.yaml already.\u003c/p\u003e\n\u003cp\u003eif you read the first post carefully you will see “run-on: all” … that is for bash scripts and friends \u003cimg src=\"https://forum.snapcraft.io/images/emoji/emoji_one/wink.png?v=9\" title=\":wink:\" class=\"emoji\" alt=\":wink:\"\u003e\u003c/p\u003e","post_number":6,"post_type":1,"updated_at":"2018-09-04T08:56:21.000Z","reply_count":0,"reply_to_post_number":5,"quote_count":0,"incoming_link_count":5,"reads":101,"readers_count":100,"score":89.8,"yours":false,"topic_id":4972,"topic_slug":"architectures","display_username":"Oliver Grawert","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"eberkund","avatar_template":"/user_avatar/forum.snapcraft.io/eberkund/{size}/2795_2.png"},"bookmarked":false,"actions_summary":[{"id":2,"count":3}],"moderator":false,"admin":false,"staff":false,"user_id":9,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":35178,"name":"Colin Watson","username":"cjwatson","avatar_template":"/user_avatar/forum.snapcraft.io/cjwatson/{size}/4388_2.png","created_at":"2018-10-05T13:11:29.439Z","cooked":"\u003cblockquote\u003e\n\u003cp\u003eThis is work in progress, and documents behavior that does not yet exist in its entirety. The snapcraft CLI gained support for this in v2.42, but it’s not yet fully integrated with \u003ca href=\"http://build.snapcraft.io\" rel=\"noopener nofollow ugc\"\u003ebuild.snapcraft.io\u003c/a\u003e.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eThis is now supported by \u003ca href=\"http://build.snapcraft.io\" rel=\"noopener nofollow ugc\"\u003ebuild.snapcraft.io\u003c/a\u003e: that is, builds will be dispatched for the set of architectures requested in \u003ccode\u003esnapcraft.yaml\u003c/code\u003e, provided that they’re supported by BSI.  (In most cases, I expect that the main use case for this will be to disable builds for architectures that you know can’t work, although it will later be a useful building block for build sets.)\u003c/p\u003e\n\u003cp\u003eThis will allow us to enable builds for ppc64el and s390x on BSI (the remaining Ubuntu architectures that we don’t yet support there), but we’ll do that early next week rather than making a significant change like that just before the weekend.\u003c/p\u003e","post_number":7,"post_type":1,"updated_at":"2018-10-05T13:11:29.439Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":2,"reads":102,"readers_count":101,"score":125.0,"yours":false,"topic_id":4972,"topic_slug":"architectures","display_username":"Colin Watson","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"http://build.snapcraft.io","internal":false,"reflection":false,"clicks":15}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":4}],"moderator":false,"admin":false,"staff":false,"user_id":74,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":35251,"name":"Colin Watson","username":"cjwatson","avatar_template":"/user_avatar/forum.snapcraft.io/cjwatson/{size}/4388_2.png","created_at":"2018-10-08T15:36:48.624Z","cooked":"\u003cblockquote\u003e\n\u003cp\u003eThis will allow us to enable builds for ppc64el and s390x on BSI (the remaining Ubuntu architectures that we don’t yet support there), but we’ll do that early next week rather than making a significant change like that just before the weekend.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003e\u003ca href=\"https://forum.snapcraft.io/t/more-architectures-enabled-in-build-snapcraft-io/7733\"\u003eNow done.\u003c/a\u003e\u003c/p\u003e","post_number":8,"post_type":1,"updated_at":"2018-10-08T15:36:48.624Z","reply_count":0,"reply_to_post_number":7,"quote_count":0,"incoming_link_count":1,"reads":90,"readers_count":89,"score":52.8,"yours":false,"topic_id":4972,"topic_slug":"architectures","display_username":"Colin Watson","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://forum.snapcraft.io/t/more-architectures-enabled-in-build-snapcraft-io/7733","internal":true,"reflection":false,"title":"More architectures enabled in build.snapcraft.io","clicks":13}],"read":true,"user_title":null,"reply_to_user":{"username":"cjwatson","avatar_template":"/user_avatar/forum.snapcraft.io/cjwatson/{size}/4388_2.png"},"bookmarked":false,"actions_summary":[{"id":2,"count":2}],"moderator":false,"admin":false,"staff":false,"user_id":74,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":40158,"name":"林博仁(Buo-ren, Lin)","username":"Lin-Buo-Ren","avatar_template":"/user_avatar/forum.snapcraft.io/lin-buo-ren/{size}/4612_2.png","created_at":"2018-12-23T06:13:28.707Z","cooked":"\u003cp\u003eIs it possible to specify an architecture that we want it \u003cstrong\u003enot\u003c/strong\u003e build on?  Enumerating all other arches doesn’t seem to be desirable.\u003c/p\u003e\n\u003cp\u003eFor example I know a certain snap won’t build on armhf architecture, is there a way to disable it without enumerating all other architectures in the \u003ccode\u003ebuild-on\u003c/code\u003e key?\u003c/p\u003e","post_number":9,"post_type":1,"updated_at":"2018-12-23T06:14:23.819Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":1,"reads":81,"readers_count":80,"score":21.0,"yours":false,"topic_id":4972,"topic_slug":"architectures","display_username":"林博仁(Buo-ren, Lin)","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"","bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1417,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":53099,"name":"Nato Boram","username":"NatoBoram","avatar_template":"/user_avatar/forum.snapcraft.io/natoboram/{size}/3517_2.png","created_at":"2019-08-05T16:57:35.779Z","cooked":"\u003cp\u003eWhat are all the supported architectures?\u003c/p\u003e","post_number":10,"post_type":1,"updated_at":"2019-08-05T16:57:35.779Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":1,"reads":62,"readers_count":61,"score":17.2,"yours":false,"topic_id":4972,"topic_slug":"architectures","display_username":"Nato Boram","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":2448,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":55010,"name":"Merlijn Sebrechts","username":"galgalesh","avatar_template":"/user_avatar/forum.snapcraft.io/galgalesh/{size}/9283_2.png","created_at":"2019-09-13T18:39:06.936Z","cooked":"\u003cp\u003eThis should also more explicitly explain \u003ca href=\"https://forum.snapcraft.io/t/what-is-the-proper-way-to-build-and-support-multi-architecture-snap-in-store-year-2018/6454/3\" class=\"inline-onebox\"\u003eWhat is the proper way to build and support multi-architecture snap in store (year 2018)?\u003c/a\u003e and the \u003ccode\u003e$SNAP_ARCH_TRIPLET\u003c/code\u003e variable.\u003c/p\u003e","post_number":11,"post_type":1,"updated_at":"2019-09-13T18:39:06.936Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":6,"reads":61,"readers_count":60,"score":41.8,"yours":false,"topic_id":4972,"topic_slug":"architectures","display_username":"Merlijn Sebrechts","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://forum.snapcraft.io/t/what-is-the-proper-way-to-build-and-support-multi-architecture-snap-in-store-year-2018/6454/3","internal":true,"reflection":false,"title":"What is the proper way to build and support multi-architecture snap in store (year 2018)?","clicks":12}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1418,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":55227,"name":"Jonathan Hartley","username":"tartley","avatar_template":"/user_avatar/forum.snapcraft.io/tartley/{size}/8524_2.png","created_at":"2019-09-17T13:11:37.312Z","cooked":"\u003cp\u003eThe ‘Architectures’ page isn’t visible in the ‘contents’ down the page’s left-hand column. Is that deliberate?\u003c/p\u003e","post_number":12,"post_type":1,"updated_at":"2019-09-17T13:11:37.312Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":1,"reads":62,"readers_count":61,"score":37.0,"yours":false,"topic_id":4972,"topic_slug":"architectures","display_username":"Jonathan Hartley","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":4751,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":55242,"name":"Graham Morrison","username":"degville","avatar_template":"/user_avatar/forum.snapcraft.io/degville/{size}/2021_2.png","created_at":"2019-09-17T14:37:55.444Z","cooked":"\u003caside class=\"quote no-group\" data-username=\"tartley\" data-post=\"12\" data-topic=\"4972\" data-full=\"true\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"20\" height=\"20\" src=\"https://forum.snapcraft.io/user_avatar/forum.snapcraft.io/tartley/40/3710_2.png\" class=\"avatar\"\u003e tartley:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eThe ‘Architectures’ page isn’t visible in the ‘contents’ down the page’s left-hand column. Is that deliberate?\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eIt hasn’t been deliberately left off, and adding it is certainly something we should do if it’s considered important enough (it is linked to from the snapcraft yaml reference pages).\u003c/p\u003e\n\u003cp\u003eI think it probably is important enough, but needs a little work (I can do this).\u003c/p\u003e","post_number":13,"post_type":1,"updated_at":"2019-09-17T14:37:55.444Z","reply_count":0,"reply_to_post_number":12,"quote_count":1,"incoming_link_count":3,"reads":63,"readers_count":62,"score":42.2,"yours":false,"topic_id":4972,"topic_slug":"architectures","display_username":"Graham Morrison","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":true,"admin":true,"staff":true,"user_id":2772,"hidden":false,"trust_level":4,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":98096,"name":"Fabio Colella","username":"fcole90","avatar_template":"/user_avatar/forum.snapcraft.io/fcole90/{size}/6214_2.png","created_at":"2021-08-25T10:11:32.976Z","cooked":"\u003cp\u003eHi, what’s the recommended way to cross-compile (e.g. Go) from amd64 to all other archs?\u003c/p\u003e\n\u003cp\u003eCould this work? Also with CI like GH Actions? Would I need any command like option to produce that?\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-yaml\"\u003ebase: core20\n\narchitectures:\n  - build-on: amd64\n    run on: [amd64, armhf, arm64]\n\u003c/code\u003e\u003c/pre\u003e","post_number":14,"post_type":1,"updated_at":"2021-08-25T10:11:32.976Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":2,"reads":37,"readers_count":36,"score":22.2,"yours":false,"topic_id":4972,"topic_slug":"architectures","display_username":"Fabio Colella","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"","bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":335,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":98506,"name":"James Henstridge","username":"jamesh","avatar_template":"/user_avatar/forum.snapcraft.io/jamesh/{size}/3947_2.png","created_at":"2021-09-01T02:24:54.416Z","cooked":"\u003caside class=\"quote no-group\" data-username=\"fcole90\" data-post=\"14\" data-topic=\"4972\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"20\" height=\"20\" src=\"https://forum.snapcraft.io/user_avatar/forum.snapcraft.io/fcole90/40/6214_2.png\" class=\"avatar\"\u003e fcole90:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eCould this work? Also with CI like GH Actions? Would I need any command like option to produce that?\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eWhat you’ve listed says that a single build on amd64 will produce a snap that can be used on the three architectures amd64, armhf, and arm64. You probably want something more like:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003earchitectures:\n  - build-on: amd64\n    run on: amd64\n  - build-on: amd64\n    run on: armhf\n  - build-on: amd64\n    run on: arm64\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThe \u003ccode\u003esnapcore/action-build@v1\u003c/code\u003e action does not currently do anything with this information in the \u003ccode\u003esnapcraft.yaml\u003c/code\u003e. But if you are set up to do cross builds, then you could probably drive it with:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e    steps:\n      ...\n      - uses: snapcore/action-build@v1\n        with:\n         snapcraft-args: --target-arch arm64\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eYou could either repeat the action three times to perform the three builds in series from a single job, or use the matrix feature to create three parallel jobs.\u003c/p\u003e","post_number":15,"post_type":1,"updated_at":"2021-09-01T02:24:54.416Z","reply_count":0,"reply_to_post_number":14,"quote_count":1,"incoming_link_count":1,"reads":36,"readers_count":35,"score":12.0,"yours":false,"topic_id":4972,"topic_slug":"architectures","display_username":"James Henstridge","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":393,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":112237,"name":"Callahan Kovacs","username":"mr_cal","avatar_template":"/user_avatar/forum.snapcraft.io/mr_cal/{size}/8466_2.png","created_at":"2022-07-27T20:02:14.784Z","cooked":"\u003cp\u003eWhoops, sorry for the spurious edit!   I accidentally saved while updating this post for changes in \u003ccode\u003ecore22\u003c/code\u003e.  I think I reverted my changes.\u003c/p\u003e","post_number":16,"post_type":1,"updated_at":"2022-07-27T20:02:14.784Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":1,"reads":26,"readers_count":25,"score":10.0,"yours":false,"topic_id":4972,"topic_slug":"architectures","display_username":"Callahan Kovacs","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":11310,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":114718,"name":"Manuel Stahl","username":"thymythos","avatar_template":"/user_avatar/forum.snapcraft.io/thymythos/{size}/1368_2.png","created_at":"2022-10-02T16:15:07.004Z","cooked":"\u003cp\u003eThis page should also link to \u003ca href=\"https://snapcraft.io/docs/snapcraft-advanced-grammar\" rel=\"noopener nofollow ugc\"\u003ehttps://snapcraft.io/docs/snapcraft-advanced-grammar\u003c/a\u003e\u003c/p\u003e","post_number":17,"post_type":1,"updated_at":"2022-10-02T16:15:07.004Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":24,"readers_count":23,"score":4.6,"yours":false,"topic_id":4972,"topic_slug":"architectures","display_username":"Manuel Stahl","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://snapcraft.io/docs/snapcraft-advanced-grammar","internal":false,"reflection":false,"clicks":4}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1907,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false}],"stream":[24040,30268,32617,32618,32899,32918,35178,35251,40158,53099,55010,55227,55242,98096,98506,112237,114718]},"timeline_lookup":[[1,1890],[2,1790],[3,1750],[5,1746],[7,1715],[8,1711],[9,1636],[10,1410],[11,1371],[12,1368],[13,1367],[14,660],[15,653],[16,323],[17,256]],"suggested_topics":[{"id":30858,"title":"Snap Explanation guides","fancy_title":"Snap Explanation guides","slug":"snap-explanation-guides","posts_count":3,"reply_count":1,"highest_post_number":3,"image_url":null,"created_at":"2022-07-12T15:01:07.909Z","last_posted_at":"2023-05-15T14:55:39.980Z","bumped":true,"bumped_at":"2023-05-15T14:55:39.980Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags":[],"like_count":0,"views":1373,"category_id":15,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":2772,"username":"degville","name":"Graham Morrison","avatar_template":"/user_avatar/forum.snapcraft.io/degville/{size}/2021_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":11710,"username":"rpjday","name":"Robert P. J. Day","avatar_template":"/user_avatar/forum.snapcraft.io/rpjday/{size}/8457_2.png"}}]},{"id":31051,"title":"Snapcraft Reference","fancy_title":"Snapcraft Reference","slug":"snapcraft-reference","posts_count":5,"reply_count":1,"highest_post_number":5,"image_url":null,"created_at":"2022-07-27T11:51:00.654Z","last_posted_at":"2023-04-24T17:52:24.772Z","bumped":true,"bumped_at":"2023-04-25T05:31:27.608Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags":[],"like_count":0,"views":1238,"category_id":15,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":2772,"username":"degville","name":"Graham Morrison","avatar_template":"/user_avatar/forum.snapcraft.io/degville/{size}/2021_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":14015,"username":"dboddie","name":"David Boddie","avatar_template":"/user_avatar/forum.snapcraft.io/dboddie/{size}/9564_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":11710,"username":"rpjday","name":"Robert P. J. Day","avatar_template":"/user_avatar/forum.snapcraft.io/rpjday/{size}/8457_2.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":2185,"username":"abitrolly","name":"Anatoli Babenia","avatar_template":"/user_avatar/forum.snapcraft.io/abitrolly/{size}/4528_2.png"}}]},{"id":34026,"title":"Tutorial is outdated or something","fancy_title":"Tutorial is outdated or something","slug":"tutorial-is-outdated-or-something","posts_count":4,"reply_count":1,"highest_post_number":4,"image_url":null,"created_at":"2023-02-23T15:15:25.641Z","last_posted_at":"2023-02-23T17:40:48.223Z","bumped":true,"bumped_at":"2023-02-23T17:40:48.223Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags":[],"like_count":1,"views":123,"category_id":15,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":14103,"username":"Greg","name":"Greg Timmons","avatar_template":"/letter_avatar/greg/{size}/5_6d6f4cde2641c35611d5cac2fb97c77e.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":11310,"username":"mr_cal","name":"Callahan Kovacs","avatar_template":"/user_avatar/forum.snapcraft.io/mr_cal/{size}/8466_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":2772,"username":"degville","name":"Graham Morrison","avatar_template":"/user_avatar/forum.snapcraft.io/degville/{size}/2021_2.png"}}]},{"id":32986,"title":"Snapcraft installation and setup","fancy_title":"Snapcraft installation and setup","slug":"snapcraft-installation-and-setup","posts_count":2,"reply_count":0,"highest_post_number":2,"image_url":null,"created_at":"2022-12-07T12:49:10.746Z","last_posted_at":"2022-12-15T10:43:52.370Z","bumped":true,"bumped_at":"2022-12-07T12:49:10.898Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags":[],"like_count":0,"views":819,"category_id":15,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest single","description":"Original Poster, Most Recent Poster","user":{"id":2772,"username":"degville","name":"Graham Morrison","avatar_template":"/user_avatar/forum.snapcraft.io/degville/{size}/2021_2.png"}}]},{"id":32572,"title":"Where to store config files","fancy_title":"Where to store config files","slug":"where-to-store-config-files","posts_count":6,"reply_count":3,"highest_post_number":6,"image_url":null,"created_at":"2022-11-08T18:00:15.178Z","last_posted_at":"2022-11-11T12:55:44.133Z","bumped":true,"bumped_at":"2022-11-11T12:55:44.133Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags":[],"like_count":6,"views":297,"category_id":15,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":13500,"username":"Yuriy","name":"Yuriy Yakimenko","avatar_template":"/letter_avatar/yuriy/{size}/5_6d6f4cde2641c35611d5cac2fb97c77e.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":11991,"username":"goldstar611","name":"Tony","avatar_template":"/letter_avatar/goldstar611/{size}/5_6d6f4cde2641c35611d5cac2fb97c77e.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":1417,"username":"Lin-Buo-Ren","name":"林博仁(Buo-ren, Lin)","avatar_template":"/user_avatar/forum.snapcraft.io/lin-buo-ren/{size}/4612_2.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":2772,"username":"degville","name":"Graham Morrison","avatar_template":"/user_avatar/forum.snapcraft.io/degville/{size}/2021_2.png"}}]}],"tags":[],"id":4972,"title":"Architectures","fancy_title":"Architectures","posts_count":17,"created_at":"2018-04-12T21:32:37.740Z","views":14391,"reply_count":5,"like_count":18,"last_posted_at":"2022-10-02T16:15:07.004Z","visible":true,"closed":false,"archived":false,"has_summary":false,"archetype":"regular","slug":"architectures","category_id":15,"word_count":2443,"deleted_at":null,"user_id":17,"featured_link":null,"pinned_globally":false,"pinned_at":null,"pinned_until":null,"image_url":null,"slow_mode_seconds":0,"draft":null,"draft_key":"topic_4972","draft_sequence":null,"unpinned":null,"pinned":false,"current_post_number":1,"highest_post_number":17,"deleted_by":null,"actions_summary":[{"id":4,"count":0,"hidden":false,"can_act":false},{"id":8,"count":0,"hidden":false,"can_act":false},{"id":7,"count":0,"hidden":false,"can_act":false}],"chunk_size":20,"bookmarked":false,"topic_timer":null,"message_bus_last_id":0,"participant_count":13,"show_read_indicator":false,"thumbnails":null,"details":{"notification_level":1,"participants":[{"id":9,"username":"ogra","name":"Oliver Grawert","avatar_template":"/user_avatar/forum.snapcraft.io/ogra/{size}/22_2.png","post_count":3,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null},{"id":2126,"username":"eberkund","name":"Erik Berkun-Drevnig","avatar_template":"/user_avatar/forum.snapcraft.io/eberkund/{size}/2795_2.png","post_count":2,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null},{"id":74,"username":"cjwatson","name":"Colin Watson","avatar_template":"/user_avatar/forum.snapcraft.io/cjwatson/{size}/4388_2.png","post_count":2,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null},{"id":393,"username":"jamesh","name":"James Henstridge","avatar_template":"/user_avatar/forum.snapcraft.io/jamesh/{size}/3947_2.png","post_count":1,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null},{"id":1417,"username":"Lin-Buo-Ren","name":"林博仁(Buo-ren, Lin)","avatar_template":"/user_avatar/forum.snapcraft.io/lin-buo-ren/{size}/4612_2.png","post_count":1,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null},{"id":1418,"username":"galgalesh","name":"Merlijn Sebrechts","avatar_template":"/user_avatar/forum.snapcraft.io/galgalesh/{size}/9283_2.png","post_count":1,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null},{"id":1907,"username":"thymythos","name":"Manuel Stahl","avatar_template":"/user_avatar/forum.snapcraft.io/thymythos/{size}/1368_2.png","post_count":1,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null},{"id":2448,"username":"NatoBoram","name":"Nato Boram","avatar_template":"/user_avatar/forum.snapcraft.io/natoboram/{size}/3517_2.png","post_count":1,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null},{"id":2772,"username":"degville","name":"Graham Morrison","avatar_template":"/user_avatar/forum.snapcraft.io/degville/{size}/2021_2.png","post_count":1,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null},{"id":4751,"username":"tartley","name":"Jonathan Hartley","avatar_template":"/user_avatar/forum.snapcraft.io/tartley/{size}/8524_2.png","post_count":1,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null},{"id":11310,"username":"mr_cal","name":"Callahan Kovacs","avatar_template":"/user_avatar/forum.snapcraft.io/mr_cal/{size}/8466_2.png","post_count":1,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null},{"id":17,"username":"kyrofa","name":"Kyle Fazzari","avatar_template":"/user_avatar/forum.snapcraft.io/kyrofa/{size}/4384_2.png","post_count":1,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null},{"id":335,"username":"fcole90","name":"Fabio Colella","avatar_template":"/user_avatar/forum.snapcraft.io/fcole90/{size}/6214_2.png","post_count":1,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null}],"created_by":{"id":17,"username":"kyrofa","name":"Kyle Fazzari","avatar_template":"/user_avatar/forum.snapcraft.io/kyrofa/{size}/4384_2.png"},"last_poster":{"id":1907,"username":"thymythos","name":"Manuel Stahl","avatar_template":"/user_avatar/forum.snapcraft.io/thymythos/{size}/1368_2.png"},"links":[{"url":"https://forum.snapcraft.io/t/how-to-enable-arm64-builds/5618/5","title":"How to enable arm64 builds?","internal":true,"attachment":false,"reflection":true,"clicks":18,"user_id":74,"domain":"forum.snapcraft.io","root_domain":"snapcraft.io"},{"url":"http://build.snapcraft.io","title":null,"internal":false,"attachment":false,"reflection":false,"clicks":15,"user_id":74,"domain":"build.snapcraft.io","root_domain":"snapcraft.io"},{"url":"https://forum.snapcraft.io/t/the-snapcraft-format/8337","title":"The snapcraft.yaml schema","internal":true,"attachment":false,"reflection":false,"clicks":14,"user_id":17,"domain":"forum.snapcraft.io","root_domain":"snapcraft.io"},{"url":"https://forum.snapcraft.io/t/more-architectures-enabled-in-build-snapcraft-io/7733","title":"More architectures enabled in build.snapcraft.io","internal":true,"attachment":false,"reflection":false,"clicks":13,"user_id":74,"domain":"forum.snapcraft.io","root_domain":"snapcraft.io"},{"url":"https://forum.snapcraft.io/t/what-is-the-proper-way-to-build-and-support-multi-architecture-snap-in-store-year-2018/6454/3","title":"What is the proper way to build and support multi-architecture snap in store (year 2018)?","internal":true,"attachment":false,"reflection":false,"clicks":12,"user_id":1418,"domain":"forum.snapcraft.io","root_domain":"snapcraft.io"},{"url":"https://github.com/ogra1/pi-kiosk-gadget/blob/master/snapcraft.yaml#L11","title":"pi-kiosk-gadget/snapcraft.yaml at master · ogra1/pi-kiosk-gadget · GitHub","internal":false,"attachment":false,"reflection":false,"clicks":11,"user_id":9,"domain":"github.com","root_domain":"github.com"},{"url":"https://forum.snapcraft.io/t/remote-build/14400","title":"Remote build","internal":true,"attachment":false,"reflection":false,"clicks":9,"user_id":17,"domain":"forum.snapcraft.io","root_domain":"snapcraft.io"},{"url":"https://forum.snapcraft.io/t/more-architectures-enabled-in-build-snapcraft-io/7733","title":"More architectures enabled in build.snapcraft.io","internal":true,"attachment":false,"reflection":true,"clicks":5,"user_id":74,"domain":"forum.snapcraft.io","root_domain":"snapcraft.io"},{"url":"https://build.snapcraft.io","title":null,"internal":false,"attachment":false,"reflection":false,"clicks":5,"user_id":17,"domain":"build.snapcraft.io","root_domain":"snapcraft.io"},{"url":"https://snapcraft.io/docs/snapcraft-advanced-grammar","title":null,"internal":false,"attachment":false,"reflection":false,"clicks":4,"user_id":1907,"domain":"snapcraft.io","root_domain":"snapcraft.io"},{"url":"https://launchpad.net/","title":"Launchpad","internal":false,"attachment":false,"reflection":false,"clicks":4,"user_id":17,"domain":"launchpad.net","root_domain":"launchpad.net"},{"url":"https://forum.snapcraft.io/t/what-is-the-proper-way-to-build-and-support-multi-architecture-snap-in-store-year-2018/6454/2","title":"What is the proper way to build and support multi-architecture snap in store (year 2018)?","internal":true,"attachment":false,"reflection":true,"clicks":3,"user_id":9,"domain":"forum.snapcraft.io","root_domain":"snapcraft.io"},{"url":"https://forum.snapcraft.io/t/welcome-snapcraft-2-42/5322","title":"Welcome snapcraft 2.42","internal":true,"attachment":false,"reflection":true,"clicks":1,"user_id":25,"domain":"forum.snapcraft.io","root_domain":"snapcraft.io"},{"url":"https://forum.snapcraft.io/t/snapcraft-yaml-reference/4276","title":"Snapcraft.yaml reference","internal":true,"attachment":false,"reflection":true,"clicks":1,"user_id":25,"domain":"forum.snapcraft.io","root_domain":"snapcraft.io"},{"url":"https://forum.snapcraft.io/t/snapcraft-overview/8940","title":"Snapcraft overview","internal":true,"attachment":false,"reflection":false,"clicks":1,"user_id":17,"domain":"forum.snapcraft.io","root_domain":"snapcraft.io"}]}}