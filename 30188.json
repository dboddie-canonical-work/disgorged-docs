{"post_stream":{"posts":[{"id":109922,"name":"Sergio Schvezov","username":"sergiusens","avatar_template":"/user_avatar/forum.snapcraft.io/sergiusens/{size}/5621_2.png","created_at":"2022-05-25T22:59:31.483Z","cooked":"\u003cp\u003ecore22 support in Snapcraft 7.0 introduces new underlying layers and concepts that require some changes when migrating from core20 to core22; support for core20 and other bases is unaffected by Snapcraft 7.0.\u003c/p\u003e\n\u003ch1\u003eParts\u003c/h1\u003e\n\u003cp\u003eSnapcraft has moved to a more general syntactical mechanism that can be used consistently across the *craft ecosystem. Most of the following changes are a reflection of that alignment.\u003c/p\u003e\n\u003cp\u003eWhile \u003ccode\u003esnapcraftctl\u003c/code\u003e is still supported, the new \u003ccode\u003ecraftctl\u003c/code\u003e is now preferred.\u003c/p\u003e\n\u003ch2\u003eOverriding pull\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"lang-yaml\"\u003eoverride-pull: |\n    snapcraftctl pull\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003etranslates to\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-yaml\"\u003eoverride-pull: |\n    craftctl default\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003eOverriding build\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"lang-yaml\"\u003eoverride-build: |\n    snapcraftctl build\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003etranslates to\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-yaml\"\u003eoverride-build: |\n    craftctl default\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003eOverriding stage\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"lang-yaml\"\u003eoverride-stage: |\n    snapcraftctl stage\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003etranslates to\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-yaml\"\u003eoverride-stage: |\n    craftctl default\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003eOverriding prime\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"lang-yaml\"\u003eoverride-prime: |\n    snapcraftctl prime\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003etranslates to\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-yaml\"\u003eoverride-prime: |\n    craftctl default\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003eSetting a version\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"lang-yaml\"\u003eoverride-\u0026lt;step\u0026gt;: |\n    snapcraftctl set-version 1.0.0\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003etranslates to\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-yaml\"\u003eoverride-\u0026lt;step\u0026gt;: |\n    craftctl set version=1.0.0\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003eSetting a grade\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"lang-yaml\"\u003eoverride-\u0026lt;step\u0026gt;: |\n    snapcraftctl set-grade stable\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003etranslates to\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-yaml\"\u003eoverride-\u0026lt;step\u0026gt;: |\n    craftctl set grade=stable\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003eGrammar\u003c/h2\u003e\n\u003cp\u003eThe try keyword is no longer available, instead of trying use the architecture specific entry for a predictable result such that\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-yaml\"\u003estage-packages:\n    - try:\n        - criu\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003enow uses the architecture specific on entry\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-yaml\"\u003estage-packages:\n    - on amd64:\n        - criu\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003eArchitectures\u003c/h2\u003e\n\u003cp\u003eThe keywords for architectures are now \u003ccode\u003ebuild-on\u003c/code\u003e and \u003ccode\u003ebuild-for\u003c/code\u003e:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003earchitectures:\n  - build-on: [amd64]\n    run-on: [arm64]\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003etranslates to\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003earchitectures:\n  - build-on: [amd64]\n    build-for: [arm64]\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003eEnvironment variables\u003c/h2\u003e\n\u003cp\u003eThese environment variables are still supported but should be migrated to the following:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ccode\u003eSNAPCRAFT_PART_SRC_WORK\u003c/code\u003e → \u003ccode\u003eCRAFT_PART_SRC_WORK\u003c/code\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ccode\u003eSNAPCRAFT_PART_SRC\u003c/code\u003e → \u003ccode\u003eCRAFT_PART_SRC\u003c/code\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ccode\u003eSNAPCRAFT_PROJECT_DIR\u003c/code\u003e → \u003ccode\u003eCRAFT_PROJECT_DIR\u003c/code\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ccode\u003eSNAPCRAFT_PART_BUILD\u003c/code\u003e → \u003ccode\u003eCRAFT_PART_BUILD\u003c/code\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ccode\u003eSNAPCRAFT_PROJECT_NAME\u003c/code\u003e → \u003ccode\u003eCRAFT_PROJECT_NAME\u003c/code\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ccode\u003eSNAPCRAFT_PART_BUILD_WORK\u003c/code\u003e → \u003ccode\u003eCRAFT_PART_BUILD_WORK\u003c/code\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ccode\u003eSNAPCRAFT_ARCH_TRIPLET\u003c/code\u003e → \u003ccode\u003eCRAFT_ARCH_TRIPLET\u003c/code\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ccode\u003eSNAPCRAFT_PARALLEL_BUILD_COUNT\u003c/code\u003e → \u003ccode\u003eCRAFT_PARALLEL_BUILD_COUNT\u003c/code\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ccode\u003eSNAPCRAFT_PRIME\u003c/code\u003e → \u003ccode\u003eCRAFT_PRIME\u003c/code\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ccode\u003eSNAPCRAFT_TARGET_ARCH\u003c/code\u003e → \u003ccode\u003eCRAFT_TARGET_ARCH\u003c/code\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ccode\u003eSNAPCRAFT_STAGE\u003c/code\u003e → \u003ccode\u003eCRAFT_STAGE\u003c/code\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ccode\u003eSNAPCRAFT_PART_NAME\u003c/code\u003e → \u003ccode\u003eCRAFT_PART_NAME\u003c/code\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ccode\u003eSNAPCRAFT_PART_INSTALL\u003c/code\u003e → \u003ccode\u003eCRAFT_PART_INSTALL\u003c/code\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003eGetting the grade\u003c/h2\u003e\n\u003cp\u003eWhile \u003ccode\u003eSNAPCRAFT_PROJECT_GRADE\u003c/code\u003e is still supported, \u003ccode\u003ecraftctl get grade\u003c/code\u003e is now preferred.\u003c/p\u003e\n\u003ch2\u003eGetting the version\u003c/h2\u003e\n\u003cp\u003eWhile \u003ccode\u003eSNAPCRAFT_PROJECT_VERSION\u003c/code\u003e is still supported, \u003ccode\u003ecraftctl get version\u003c/code\u003e is now preferred.\u003c/p\u003e\n\u003ch2\u003eUnbound variable verification\u003c/h2\u003e\n\u003cp\u003eSnapcraft will now report errors in case of unbound variables in user scriptlets and in variables set by the user in \u003ccode\u003ebuild-environment\u003c/code\u003e. A typical situation this can happen is if \u003ccode\u003eLD_LIBRARY_PATH\u003c/code\u003e is extended and no previous value is set. In this case, the \u003ccode\u003e:+\u003c/code\u003e parameter expansion syntax can be used (such as in \u003ccode\u003e${LD_LIBRARY_PATH:+:$LD_LIBRARY_PATH}\u003c/code\u003e to only expand if the variable is set), or just set the new value since there’s no previous value assigned to the variable.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-yaml\"\u003epart:\n  user-part:\n    ...\n    build-environment:\n      - LD_LIBRARY_PATH: $CRAFT_STAGE/usr/lib/$CRAFT_ARCH_TRIPLET${LD_LIBRARY_PATH:+:$LD_LIBRARY_PATH}\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch1\u003eApplication defaults\u003c/h1\u003e\n\u003ch2\u003eSnapcraft provided environment\u003c/h2\u003e\n\u003cp\u003eSnapcraft used to setup a snap.yaml that looked like the following:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-yaml\"\u003eapps:\n    \u0026lt;user-defined-app\u0026gt;:\n        command-chain: [snap/snapcraft-runner.sh]\n        command: \u0026lt;user-defined-command\u0026gt;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThis was not overridable and to get rid of it, there was a legacy way of dealing with this, which was to define the following in snapcraft.yaml\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-yaml\"\u003eapps:\n    \u0026lt;user-defined-app\u0026gt;:\n        adapter: none\n        command: \u0026lt;user-defined-command\u0026gt;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eSnapcraft has moved to defining an environment for each application entry instead of setting up a command-chain, with a simple way to override or disable.\u003c/p\u003e\n\u003ch3\u003eDefault behavior\u003c/h3\u003e\n\u003cp\u003esnapcraft.yaml has no entries in the root environment, then snap.yaml will have\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-yaml\"\u003eenvironment:\n    LD_LIBRARY_PATH: \u0026lt;snapcraft-value\u0026gt;\n    PATH: \u0026lt;snapcraft-value\u0026gt;\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3\u003eOverriding an entry\u003c/h3\u003e\n\u003cp\u003eA user can override one of these by defining it, such that if they define PATH like,\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-yaml\"\u003eenvironment:\n    PATH: \u0026lt;user-value\u0026gt;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThen snap.yaml will have\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-yaml\"\u003eenvironment:\n    LD_LIBRARY_PATH: \u0026lt;snapcraft-value\u0026gt;\n    PATH: \u0026lt;user-value\u0026gt;\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3\u003eNulling an entry\u003c/h3\u003e\n\u003cp\u003eA user can nullify an entry by using a YAML null entry, such that if they define PATH like,\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-yaml\"\u003eenvironment:\n    PATH: null\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThen snap.yaml will have\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-yaml\"\u003eenvironment:\n    LD_LIBRARY_PATH: \u0026lt;snapcraft-value\u0026gt;\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch1\u003ePlugins\u003c/h1\u003e\n\u003cp\u003eMost plugins do not install the base dependency by default anymore to allow more control when building.\u003c/p\u003e\n\u003ch2\u003eGo plugin\u003c/h2\u003e\n\u003cp\u003ego is no longer installed by default, to use the snap of go from the latest/stable channel do:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-yaml\"\u003eparts:\n    user-part:\n        source: .\n        plugin: go\n        build-snaps: [go/latest/stable]\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eto install from the deb:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-yaml\"\u003eparts:\n    user-part:\n        source: .\n        plugin: go\n        build-packages: [golang-go]\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eto build go from source:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-yaml\"\u003eparts:\n    user-part:\n        source: .\n        plugin: go\n        after: [go-deps]\n    go-deps:\n        source: ...\n        plugin: ...\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003eRust plugin\u003c/h2\u003e\n\u003cp\u003erustc and cargo are no longer installed by default, to install the deb do:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-yaml\"\u003eparts:\n    user-part:\n        source: .\n        plugin: rust\n        build-packages: [cargo, rustc]\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003eNPM plugin\u003c/h2\u003e\n\u003cp\u003enode and npm are no longer installed by default, to use the node snap do:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-yaml\"\u003eparts:\n    user-part:\n        source: .\n        plugin: npm\n        build-snaps: [node/16/stable]\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eto include the node binary in the actual build (and provide npm), do\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-yaml\"\u003eparts:\n    user-part:\n        source: .\n        plugin: npm\n        npm-include-node: true\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003eMeson plugin\u003c/h2\u003e\n\u003cp\u003emeson is no longer installed by default, to use the meson deb do:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-yaml\"\u003eparts:\n    user-part:\n        source: .\n        plugin: meson\n        build-packages: [meson, ninja-build]\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eto build meson from an alternate source:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-yaml\"\u003eparts:\n    user-part:\n        source: .\n        plugin: meson\n        after: [meson-deps]\n    meson-deps:\n        plugin: nil\n        override-build: |\n            pip install meson\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003ePython plugin\u003c/h2\u003e\n\u003cp\u003eThe following environment variable names should be migrated:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ccode\u003eSNAPCRAFT_PYTHON_INTERPRETER\u003c/code\u003e → \u003ccode\u003ePARTS_PYTHON_INTERPRETER\u003c/code\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ccode\u003eSNAPCRAFT_PYTHON_VENV_ARGS\u003c/code\u003e → \u003ccode\u003ePARTS_PYTHON_VENV_ARGS\u003c/code\u003e\n\u003c/li\u003e\n\u003c/ul\u003e","post_number":1,"post_type":1,"updated_at":"2022-12-10T14:15:00.430Z","reply_count":2,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":1072,"reads":167,"readers_count":166,"score":5317.8,"yours":false,"topic_id":30188,"topic_slug":"micro-howto-migrate-from-core20-to-core22","display_username":"Sergio Schvezov","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":10,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://forum.snapcraft.io/t/gnome-extension-for-core22/30800/2","internal":true,"reflection":true,"title":"Gnome extension for core22","clicks":7},{"url":"https://forum.snapcraft.io/t/cannot-use-adapter-none-with-snapcraft-7-0-1-and-base-core22/30208/2","internal":true,"reflection":true,"title":"Cannot use adapter: none with snapcraft 7.0.1 and base: core22","clicks":3},{"url":"https://forum.snapcraft.io/t/release-notes-snapcraft-7/30464/7","internal":true,"reflection":true,"title":"Release notes: Snapcraft 7","clicks":2},{"url":"https://forum.snapcraft.io/t/correct-snapcraft-syntax-for-rust-based-snap-on-core22/30947","internal":true,"reflection":true,"title":"Correct snapcraft syntax for Rust-based snap on core22","clicks":1},{"url":"https://forum.snapcraft.io/t/pythonpath-to-be-explicitly-set-for-core22/32999/4","internal":true,"reflection":true,"title":"PYTHONPATH to be explicitly set for core22?","clicks":0},{"url":"https://forum.snapcraft.io/t/using-the-craftctl-tool/32664/2","internal":true,"reflection":true,"title":"Using the craftctl tool","clicks":0},{"url":"https://forum.snapcraft.io/t/snap-build-fails-with-core22-on-launchpad/31812/2","internal":true,"reflection":true,"title":"Snap build fails with core22 on launchpad","clicks":0},{"url":"https://forum.snapcraft.io/t/architecture-arm64-is-not-supported-error-on-apple-m1-with-core22-base/35634/2","internal":true,"reflection":true,"title":"\"Architecture 'arm64' is not supported\" error on Apple M1 with core22 base","clicks":0},{"url":"https://forum.snapcraft.io/t/this-part-is-missing-libraries-that-cannot-be-satisfied-with-any-available-stage-packages-known-to-snapcraft/33818/12","internal":true,"reflection":true,"title":"This part is missing libraries that cannot be satisfied with any available stage-packages known to snapcraft","clicks":0},{"url":"https://forum.snapcraft.io/t/release-notes-snapcraft-7/30464","internal":true,"reflection":true,"title":"Release notes: Snapcraft 7","clicks":0},{"url":"https://forum.snapcraft.io/t/cant-package-thonny-snap/34091/52","internal":true,"reflection":true,"title":"Cant package Thonny Snap","clicks":0},{"url":"https://forum.snapcraft.io/t/call-for-testing-snapcraft-7/30201/13","internal":true,"reflection":true,"title":"Call for testing: Snapcraft 7","clicks":0},{"url":"https://forum.snapcraft.io/t/call-for-testing-snapcraft-7/30201","internal":true,"reflection":true,"title":"Call for testing: Snapcraft 7","clicks":0},{"url":"https://forum.snapcraft.io/t/core22-doesnt-work-with-qt5/34507/6","internal":true,"reflection":true,"title":"Core22 doesn't work with Qt5","clicks":0},{"url":"https://forum.snapcraft.io/t/pybind11-availability/34789/9","internal":true,"reflection":true,"title":"Pybind11 availability","clicks":0},{"url":"https://forum.snapcraft.io/t/whats-new/20117","internal":true,"reflection":true,"title":"What's new","clicks":0},{"url":"https://forum.snapcraft.io/t/migrating-between-bases/23455/7","internal":true,"reflection":true,"title":"Migrating between bases","clicks":0}],"read":true,"user_title":"policy-reviewers","title_is_group":false,"bookmarked":false,"actions_summary":[{"id":2,"count":2}],"moderator":true,"admin":false,"staff":true,"user_id":25,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":true,"last_wiki_edit":"2022-12-10T14:15:00.499Z","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":110207,"name":"Farshid Tavakolizadeh","username":"farshidtz","avatar_template":"/letter_avatar/farshidtz/{size}/5_6d6f4cde2641c35611d5cac2fb97c77e.png","created_at":"2022-06-01T16:01:48.354Z","cooked":"\u003cp\u003eThere are some conflicting information. The beginning of this thread and the \u003ca href=\"https://forum.snapcraft.io/t/call-for-testing-snapcraft-7/30201\"\u003eCall for testing: Snapcraft 7\u003c/a\u003e imply that the migration from \u003ccode\u003esnapcraftctl\u003c/code\u003e and \u003ccode\u003eSNAPCRAFT_\u003c/code\u003e environment variables is REQUIRED, however, later on claim that they are preferred or recommended.\u003c/p\u003e\n\u003cp\u003eIt would be good to know at which version of snapcraft the support for the former will  he stopped.\u003c/p\u003e","post_number":2,"post_type":1,"updated_at":"2022-06-01T16:50:10.774Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":3,"reads":121,"readers_count":120,"score":43.6,"yours":false,"topic_id":30188,"topic_slug":"micro-howto-migrate-from-core20-to-core22","display_username":"Farshid Tavakolizadeh","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":2,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://forum.snapcraft.io/t/call-for-testing-snapcraft-7/30201","internal":true,"reflection":false,"title":"Call for testing: Snapcraft 7","clicks":2}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":11344,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":110224,"name":"Nicolas Bock","username":"nicolasbock","avatar_template":"/user_avatar/forum.snapcraft.io/nicolasbock/{size}/9211_2.png","created_at":"2022-06-01T21:03:33.162Z","cooked":"\u003cp\u003eCould you clarify when the store will start supporting core22?\u003c/p\u003e","post_number":3,"post_type":1,"updated_at":"2022-06-01T21:03:33.162Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":117,"readers_count":116,"score":28.0,"yours":false,"topic_id":30188,"topic_slug":"micro-howto-migrate-from-core20-to-core22","display_username":"Nicolas Bock","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":8275,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":110261,"name":"Sergio Schvezov","username":"sergiusens","avatar_template":"/user_avatar/forum.snapcraft.io/sergiusens/{size}/5621_2.png","created_at":"2022-06-02T21:12:45.894Z","cooked":"\u003cp\u003eIt is recommended only, at the time of writing of those notes it was originally required (I can amend with a note)\u003c/p\u003e","post_number":4,"post_type":1,"updated_at":"2022-06-02T21:12:45.894Z","reply_count":0,"reply_to_post_number":2,"quote_count":0,"incoming_link_count":1,"reads":112,"readers_count":111,"score":27.2,"yours":false,"topic_id":30188,"topic_slug":"micro-howto-migrate-from-core20-to-core22","display_username":"Sergio Schvezov","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"policy-reviewers","title_is_group":false,"reply_to_user":{"username":"farshidtz","avatar_template":"/letter_avatar/farshidtz/{size}/5_6d6f4cde2641c35611d5cac2fb97c77e.png"},"bookmarked":false,"actions_summary":[],"moderator":true,"admin":false,"staff":true,"user_id":25,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":110262,"name":"Sergio Schvezov","username":"sergiusens","avatar_template":"/user_avatar/forum.snapcraft.io/sergiusens/{size}/5621_2.png","created_at":"2022-06-02T21:13:13.737Z","cooked":"\u003cp\u003ethe store should already support this\u003c/p\u003e","post_number":5,"post_type":1,"updated_at":"2022-06-02T21:13:13.737Z","reply_count":0,"reply_to_post_number":3,"quote_count":0,"incoming_link_count":2,"reads":112,"readers_count":111,"score":47.2,"yours":false,"topic_id":30188,"topic_slug":"micro-howto-migrate-from-core20-to-core22","display_username":"Sergio Schvezov","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"policy-reviewers","title_is_group":false,"reply_to_user":{"username":"nicolasbock","avatar_template":"/user_avatar/forum.snapcraft.io/nicolasbock/{size}/9211_2.png"},"bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":true,"admin":false,"staff":true,"user_id":25,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":110586,"name":"Robert P. J. Day","username":"rpjday","avatar_template":"/user_avatar/forum.snapcraft.io/rpjday/{size}/8457_2.png","created_at":"2022-06-13T16:42:50.031Z","cooked":"\u003cp\u003eI would like to see extended overrides of “append” and “prepend”, as in, “append-pull”, “prepend-build” and so on. While this sounds nitpicky, it’s for readability since it’s maddening to be reading someone’s yaml file and scrolling through their lengthy “override-build”, only to notice “craftctl default” buried somewhere in the middle or, even worse, at the very end. Being able to use “append” and “prepend” would open up the possibility of far more readable overrides.\u003c/p\u003e","post_number":6,"post_type":1,"updated_at":"2022-06-13T16:42:50.031Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":110,"readers_count":109,"score":21.8,"yours":false,"topic_id":30188,"topic_slug":"micro-howto-migrate-from-core20-to-core22","display_username":"Robert P. J. Day","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"","bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":11710,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":110675,"name":"Alfonso","username":"abeato","avatar_template":"/user_avatar/forum.snapcraft.io/abeato/{size}/4510_2.png","created_at":"2022-06-15T14:51:22.539Z","cooked":"\u003cp\u003eIs there a replacement to \u003ccode\u003eSNAPCRAFT_BUILD_INFO=y\u003c/code\u003e in snapcraft 7? \u003ccode\u003eCRAFT_BUILD_INFO\u003c/code\u003e does not seem to do the trick.\u003c/p\u003e","post_number":7,"post_type":1,"updated_at":"2022-06-15T14:51:22.539Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":2,"reads":99,"readers_count":98,"score":34.4,"yours":false,"topic_id":30188,"topic_slug":"micro-howto-migrate-from-core20-to-core22","display_username":"Alfonso","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":48,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":110678,"name":"Ilya Fedin","username":"ilya-fedin","avatar_template":"/user_avatar/forum.snapcraft.io/ilya-fedin/{size}/6164_2.png","created_at":"2022-06-15T15:30:14.219Z","cooked":"\u003cp\u003eHow to have a part with global files with core22? I have a part with patches that stages them and then other parts depend on that part and are using the patches in override-pull, but that no more works, $CRAFT_STAGE doesn’t contain the patches… How is this use-case supposed to work now?\u003c/p\u003e","post_number":8,"post_type":1,"updated_at":"2022-06-15T15:32:08.702Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":2,"reads":99,"readers_count":98,"score":34.4,"yours":false,"topic_id":30188,"topic_slug":"micro-howto-migrate-from-core20-to-core22","display_username":"Ilya Fedin","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":7520,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":110705,"name":"Ilya Fedin","username":"ilya-fedin","avatar_template":"/user_avatar/forum.snapcraft.io/ilya-fedin/{size}/6164_2.png","created_at":"2022-06-15T19:03:01.993Z","cooked":"\u003cp\u003eAnd setting LD_LIBRARY_PATH when building a part leads to \u003ccode\u003e/bin/bash: line 41: LD_LIBRARY_PATH: unbound variable \u003c/code\u003e. This motivated me to create a bug report about regression since Snapcraft 4.0: \u003ca href=\"https://bugs.launchpad.net/snapcraft/+bug/1978859\" rel=\"noopener nofollow ugc\"\u003ehttps://bugs.launchpad.net/snapcraft/+bug/1978859\u003c/a\u003e.\u003c/p\u003e","post_number":9,"post_type":1,"updated_at":"2022-06-15T19:03:01.993Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":5,"reads":100,"readers_count":99,"score":44.4,"yours":false,"topic_id":30188,"topic_slug":"micro-howto-migrate-from-core20-to-core22","display_username":"Ilya Fedin","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://bugs.launchpad.net/snapcraft/+bug/1978859","internal":false,"reflection":false,"title":"Bug #1978859 “Snapcraft doesn't set parts lib \u0026 include director...” : Bugs : Snapcraft","clicks":4}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":7520,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":110841,"name":"Jon","username":"picchietti","avatar_template":"/user_avatar/forum.snapcraft.io/picchietti/{size}/9435_2.png","created_at":"2022-06-18T14:35:43.302Z","cooked":"\u003cp\u003eI’m trying to migrate a snap from core20 to core22. I followed the steps above.\u003c/p\u003e\n\u003cp\u003eI’m seeing the following:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003eBad snapcraft.yaml content:\n- extra field 'run-on' not permitted in 'architectures[0]' configuration\n- extra field 'filesets' not permitted in 'parts.mypart' configuration\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eSo it looks like the validations for core22 are more strict for these fields?\u003c/p\u003e\n\u003cp\u003eI should be able to resolve these errors myself, but I wanted to contribute to this migration documentation.\u003c/p\u003e","post_number":10,"post_type":1,"updated_at":"2022-06-18T14:35:43.302Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":1,"reads":99,"readers_count":98,"score":29.2,"yours":false,"topic_id":30188,"topic_slug":"micro-howto-migrate-from-core20-to-core22","display_username":"Jon","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":12075,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":110866,"name":"Claudio Matsuoka","username":"cmatsuoka","avatar_template":"/user_avatar/forum.snapcraft.io/cmatsuoka/{size}/9338_2.png","created_at":"2022-06-20T00:57:32.965Z","cooked":"\u003caside class=\"quote no-group\" data-username=\"abeato\" data-post=\"7\" data-topic=\"30188\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"20\" height=\"20\" src=\"https://forum.snapcraft.io/user_avatar/forum.snapcraft.io/abeato/40/4510_2.png\" class=\"avatar\"\u003e abeato:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eIs there a replacement to \u003ccode\u003eSNAPCRAFT_BUILD_INFO=y\u003c/code\u003e in snapcraft 7?\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eIt’s not implemented yet. Manifests should be added soon, including annotations.\u003c/p\u003e","post_number":11,"post_type":1,"updated_at":"2022-06-20T00:57:32.965Z","reply_count":0,"reply_to_post_number":7,"quote_count":1,"incoming_link_count":1,"reads":99,"readers_count":98,"score":24.2,"yours":false,"topic_id":30188,"topic_slug":"micro-howto-migrate-from-core20-to-core22","display_username":"Claudio Matsuoka","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":3793,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":110868,"name":"Claudio Matsuoka","username":"cmatsuoka","avatar_template":"/user_avatar/forum.snapcraft.io/cmatsuoka/{size}/9338_2.png","created_at":"2022-06-20T01:14:48.535Z","cooked":"\u003caside class=\"quote no-group\" data-username=\"picchietti\" data-post=\"10\" data-topic=\"30188\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"20\" height=\"20\" src=\"https://forum.snapcraft.io/user_avatar/forum.snapcraft.io/picchietti/40/8575_2.png\" class=\"avatar\"\u003e picchietti:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eI’m seeing the following:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003eBad snapcraft.yaml content:\n- extra field 'run-on' not permitted in 'architectures[0]' configuration\n- extra field 'filesets' not permitted in 'parts.mypart' configuration\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eArchitectures support is currently being worked on, and the \u003ccode\u003ebuild-on\u003c/code\u003e/\u003ccode\u003erun-on\u003c/code\u003e entries were renamed to \u003ccode\u003ebuild-on\u003c/code\u003e/\u003ccode\u003ebuild-to\u003c/code\u003e to better match the \u003ccode\u003eon\u003c/code\u003e/\u003ccode\u003eto\u003c/code\u003e entries used in \u003ca href=\"https://forum.snapcraft.io/t/snapcraft-advanced-grammar/8349\"\u003eadvanced grammar\u003c/a\u003e (but remember, there is no \u003ccode\u003etry\u003c/code\u003e).\u003c/p\u003e\n\u003cp\u003eFileset definitions will be changed to be more flexible, but you can manually expand them as a workaround until the new implementation is released.\u003c/p\u003e","post_number":12,"post_type":1,"updated_at":"2022-06-20T01:14:48.535Z","reply_count":1,"reply_to_post_number":10,"quote_count":1,"incoming_link_count":6,"reads":98,"readers_count":97,"score":69.0,"yours":false,"topic_id":30188,"topic_slug":"micro-howto-migrate-from-core20-to-core22","display_username":"Claudio Matsuoka","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://forum.snapcraft.io/t/snapcraft-advanced-grammar/8349","internal":true,"reflection":false,"title":"Snapcraft advanced grammar","clicks":10}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":3793,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":110902,"name":"Claudio Matsuoka","username":"cmatsuoka","avatar_template":"/user_avatar/forum.snapcraft.io/cmatsuoka/{size}/9338_2.png","created_at":"2022-06-20T13:58:15.663Z","cooked":"\u003caside class=\"quote no-group\" data-username=\"ilya-fedin\" data-post=\"8\" data-topic=\"30188\" data-full=\"true\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"20\" height=\"20\" src=\"https://forum.snapcraft.io/user_avatar/forum.snapcraft.io/ilya-fedin/40/6164_2.png\" class=\"avatar\"\u003e ilya-fedin:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eHow to have a part with global files with core22? I have a part with patches that stages them and then other parts depend on that part and are using the patches in override-pull, but that no more works, $CRAFT_STAGE doesn’t contain the patches… How is this use-case supposed to work now?\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eThe recommended way to handle local patches is to apply them directly instead of staging them. You can use places like \u003ccode\u003e$CRAFT_PROJECT_DIR/\u0026lt;patches-dir\u0026gt;\u003c/code\u003e or \u003ccode\u003esnap/local\u003c/code\u003e to store the patch files.\u003c/p\u003e","post_number":13,"post_type":1,"updated_at":"2022-06-20T13:59:00.816Z","reply_count":1,"reply_to_post_number":8,"quote_count":1,"incoming_link_count":0,"reads":92,"readers_count":91,"score":22.8,"yours":false,"topic_id":30188,"topic_slug":"micro-howto-migrate-from-core20-to-core22","display_username":"Claudio Matsuoka","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":3793,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":110904,"name":"Ilya Fedin","username":"ilya-fedin","avatar_template":"/user_avatar/forum.snapcraft.io/ilya-fedin/{size}/6164_2.png","created_at":"2022-06-20T14:15:21.845Z","cooked":"\u003cp\u003ePatches are for third-party libraries.\u003c/p\u003e","post_number":14,"post_type":1,"updated_at":"2022-06-20T14:15:21.845Z","reply_count":1,"reply_to_post_number":13,"quote_count":0,"incoming_link_count":1,"reads":81,"readers_count":80,"score":25.8,"yours":false,"topic_id":30188,"topic_slug":"micro-howto-migrate-from-core20-to-core22","display_username":"Ilya Fedin","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"cmatsuoka","avatar_template":"/user_avatar/forum.snapcraft.io/cmatsuoka/{size}/9338_2.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":7520,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":110905,"name":"Ilya Fedin","username":"ilya-fedin","avatar_template":"/user_avatar/forum.snapcraft.io/ilya-fedin/{size}/6164_2.png","created_at":"2022-06-20T14:18:17.265Z","cooked":"\u003cp\u003eAh, I see, it should be accessible from any part… It’s a pity it doesn’t really fit into our workflow, we have a centralized repository with patches for third-party libraries used in multiple projects…\u003c/p\u003e","post_number":15,"post_type":1,"updated_at":"2022-06-20T14:18:27.919Z","reply_count":1,"reply_to_post_number":14,"quote_count":0,"incoming_link_count":0,"reads":80,"readers_count":79,"score":20.6,"yours":false,"topic_id":30188,"topic_slug":"micro-howto-migrate-from-core20-to-core22","display_username":"Ilya Fedin","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"ilya-fedin","avatar_template":"/user_avatar/forum.snapcraft.io/ilya-fedin/{size}/6164_2.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":7520,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":110910,"name":"Claudio Matsuoka","username":"cmatsuoka","avatar_template":"/user_avatar/forum.snapcraft.io/cmatsuoka/{size}/9338_2.png","created_at":"2022-06-20T15:06:49.078Z","cooked":"\u003caside class=\"quote no-group\" data-username=\"ilya-fedin\" data-post=\"15\" data-topic=\"30188\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"20\" height=\"20\" src=\"https://forum.snapcraft.io/user_avatar/forum.snapcraft.io/ilya-fedin/40/6164_2.png\" class=\"avatar\"\u003e ilya-fedin:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eIt’s a pity it doesn’t really fit into our workflow, we have a centralized repository with patches for third-party libraries used in multiple projects…\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eOne possibility could be to apply the patches prior to building in \u003ccode\u003eoverride-build\u003c/code\u003e since it will run after the dependency is staged, but some extra care is needed to make patching not fail as already applied when updating the build, while still handling the error in case of failure applying the patch. Unfortunately it seems that patch(1) doesn’t have an option for that, so some scripting would be required. Or you maybe you can pull the patches from the centralized repository along with the part to be patched?\u003c/p\u003e","post_number":16,"post_type":1,"updated_at":"2022-06-20T15:08:40.395Z","reply_count":1,"reply_to_post_number":15,"quote_count":1,"incoming_link_count":1,"reads":83,"readers_count":82,"score":26.0,"yours":false,"topic_id":30188,"topic_slug":"micro-howto-migrate-from-core20-to-core22","display_username":"Claudio Matsuoka","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":3793,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":110913,"name":"Ilya Fedin","username":"ilya-fedin","avatar_template":"/user_avatar/forum.snapcraft.io/ilya-fedin/{size}/6164_2.png","created_at":"2022-06-20T15:45:25.728Z","cooked":"\u003cp\u003eWell, I found another workaround: I copy to $CRAFT_STAGE manually in override-pull, remove the copied folder in override-stage and then \u003ccode\u003estage: [-./*]\u003c/code\u003e to avoid snapcraft removing non-existing files\u003c/p\u003e","post_number":17,"post_type":1,"updated_at":"2022-06-20T15:45:57.789Z","reply_count":1,"reply_to_post_number":16,"quote_count":0,"incoming_link_count":3,"reads":80,"readers_count":79,"score":35.8,"yours":false,"topic_id":30188,"topic_slug":"micro-howto-migrate-from-core20-to-core22","display_username":"Ilya Fedin","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"cmatsuoka","avatar_template":"/user_avatar/forum.snapcraft.io/cmatsuoka/{size}/9338_2.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":7520,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":110914,"name":"Claudio Matsuoka","username":"cmatsuoka","avatar_template":"/user_avatar/forum.snapcraft.io/cmatsuoka/{size}/9338_2.png","created_at":"2022-06-20T15:47:07.130Z","cooked":"\u003cp\u003eOr maybe a git submodule could make all the remote patches appear as local, avoiding more complicated setups.\u003c/p\u003e","post_number":18,"post_type":1,"updated_at":"2022-06-20T15:47:07.130Z","reply_count":0,"reply_to_post_number":17,"quote_count":0,"incoming_link_count":2,"reads":79,"readers_count":78,"score":25.6,"yours":false,"topic_id":30188,"topic_slug":"micro-howto-migrate-from-core20-to-core22","display_username":"Claudio Matsuoka","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"ilya-fedin","avatar_template":"/user_avatar/forum.snapcraft.io/ilya-fedin/{size}/6164_2.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":3793,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":112451,"name":"Robert P. J. Day","username":"rpjday","avatar_template":"/user_avatar/forum.snapcraft.io/rpjday/{size}/8457_2.png","created_at":"2022-08-03T13:35:27.954Z","cooked":"\u003cp\u003eShould this not say “build-for”, not “build-to”?\u003c/p\u003e","post_number":19,"post_type":1,"updated_at":"2022-08-03T13:35:27.954Z","reply_count":1,"reply_to_post_number":12,"quote_count":0,"incoming_link_count":0,"reads":70,"readers_count":69,"score":18.8,"yours":false,"topic_id":30188,"topic_slug":"micro-howto-migrate-from-core20-to-core22","display_username":"Robert P. J. Day","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"","reply_to_user":{"username":"cmatsuoka","avatar_template":"/user_avatar/forum.snapcraft.io/cmatsuoka/{size}/9338_2.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":11710,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":112591,"name":"Claudio Matsuoka","username":"cmatsuoka","avatar_template":"/user_avatar/forum.snapcraft.io/cmatsuoka/{size}/9338_2.png","created_at":"2022-08-08T12:49:35.614Z","cooked":"\u003cp\u003eYes, it’s \u003ccode\u003ebuild-for\u003c/code\u003e. Unfortunately it seems that I can’t edit/update the previous post to fix it.\u003c/p\u003e","post_number":20,"post_type":1,"updated_at":"2022-08-08T12:51:06.677Z","reply_count":0,"reply_to_post_number":19,"quote_count":0,"incoming_link_count":1,"reads":67,"readers_count":66,"score":18.2,"yours":false,"topic_id":30188,"topic_slug":"micro-howto-migrate-from-core20-to-core22","display_username":"Claudio Matsuoka","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":3,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"rpjday","avatar_template":"/user_avatar/forum.snapcraft.io/rpjday/{size}/8457_2.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":3793,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false}],"stream":[109922,110207,110224,110261,110262,110586,110675,110678,110705,110841,110866,110868,110902,110904,110905,110910,110913,110914,112451,112591,115005,116459,116461,116466,118234]},"timeline_lookup":[[1,386],[2,379],[4,378],[6,367],[7,365],[10,362],[11,361],[13,360],[19,317],[20,312],[21,247],[22,213],[25,160]],"tags":[],"id":30188,"title":"(micro) Howto migrate from core20 to core22","fancy_title":"(micro) Howto migrate from core20 to core22","posts_count":25,"created_at":"2022-05-25T22:59:31.296Z","views":3080,"reply_count":14,"like_count":6,"last_posted_at":"2023-01-07T00:37:09.021Z","visible":true,"closed":false,"archived":false,"has_summary":false,"archetype":"regular","slug":"micro-howto-migrate-from-core20-to-core22","category_id":15,"word_count":2075,"deleted_at":null,"user_id":25,"featured_link":null,"pinned_globally":false,"pinned_at":null,"pinned_until":null,"image_url":null,"slow_mode_seconds":0,"draft":null,"draft_key":"topic_30188","draft_sequence":null,"unpinned":null,"pinned":false,"current_post_number":1,"highest_post_number":25,"deleted_by":null,"actions_summary":[{"id":4,"count":0,"hidden":false,"can_act":false},{"id":8,"count":0,"hidden":false,"can_act":false},{"id":7,"count":0,"hidden":false,"can_act":false}],"chunk_size":20,"bookmarked":false,"topic_timer":null,"message_bus_last_id":8,"participant_count":11,"show_read_indicator":false,"thumbnails":null,"details":{"notification_level":1,"participants":[{"id":3793,"username":"cmatsuoka","name":"Claudio Matsuoka","avatar_template":"/user_avatar/forum.snapcraft.io/cmatsuoka/{size}/9338_2.png","post_count":7,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null},{"id":7520,"username":"ilya-fedin","name":"Ilya Fedin","avatar_template":"/user_avatar/forum.snapcraft.io/ilya-fedin/{size}/6164_2.png","post_count":5,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null},{"id":25,"username":"sergiusens","name":"Sergio Schvezov","avatar_template":"/user_avatar/forum.snapcraft.io/sergiusens/{size}/5621_2.png","post_count":3,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null},{"id":11710,"username":"rpjday","name":"Robert P. J. Day","avatar_template":"/user_avatar/forum.snapcraft.io/rpjday/{size}/8457_2.png","post_count":2,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null},{"id":7072,"username":"janw","name":"Jan Wielemaker","avatar_template":"/user_avatar/forum.snapcraft.io/janw/{size}/5915_2.png","post_count":2,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null},{"id":8016,"username":"James-Carroll","name":"James Carroll","avatar_template":"/user_avatar/forum.snapcraft.io/james-carroll/{size}/7921_2.png","post_count":1,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null},{"id":8275,"username":"nicolasbock","name":"Nicolas Bock","avatar_template":"/user_avatar/forum.snapcraft.io/nicolasbock/{size}/9211_2.png","post_count":1,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null},{"id":11344,"username":"farshidtz","name":"Farshid Tavakolizadeh","avatar_template":"/letter_avatar/farshidtz/{size}/5_6d6f4cde2641c35611d5cac2fb97c77e.png","post_count":1,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null},{"id":860,"username":"alan_g","name":"Alan Griffiths","avatar_template":"/user_avatar/forum.snapcraft.io/alan_g/{size}/4484_2.png","post_count":1,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null},{"id":12075,"username":"picchietti","name":"Jon","avatar_template":"/user_avatar/forum.snapcraft.io/picchietti/{size}/9435_2.png","post_count":1,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null},{"id":48,"username":"abeato","name":"Alfonso","avatar_template":"/user_avatar/forum.snapcraft.io/abeato/{size}/4510_2.png","post_count":1,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null}],"created_by":{"id":25,"username":"sergiusens","name":"Sergio Schvezov","avatar_template":"/user_avatar/forum.snapcraft.io/sergiusens/{size}/5621_2.png"},"last_poster":{"id":8016,"username":"James-Carroll","name":"James Carroll","avatar_template":"/user_avatar/forum.snapcraft.io/james-carroll/{size}/7921_2.png"},"links":[{"url":"https://forum.snapcraft.io/t/snapcraft-advanced-grammar/8349","title":"Snapcraft advanced grammar","internal":true,"attachment":false,"reflection":false,"clicks":10,"user_id":3793,"domain":"forum.snapcraft.io","root_domain":"snapcraft.io"},{"url":"https://forum.snapcraft.io/t/gnome-extension-for-core22/30800/2","title":"Gnome extension for core22","internal":true,"attachment":false,"reflection":true,"clicks":7,"user_id":11310,"domain":"forum.snapcraft.io","root_domain":"snapcraft.io"},{"url":"https://bugs.launchpad.net/snapcraft/+bug/1978859","title":"Bug #1978859 “Snapcraft doesn't set parts lib \u0026 include director...” : Bugs : Snapcraft","internal":false,"attachment":false,"reflection":false,"clicks":4,"user_id":7520,"domain":"bugs.launchpad.net","root_domain":"launchpad.net"},{"url":"https://forum.snapcraft.io/t/cannot-use-adapter-none-with-snapcraft-7-0-1-and-base-core22/30208/2","title":"Cannot use adapter: none with snapcraft 7.0.1 and base: core22","internal":true,"attachment":false,"reflection":true,"clicks":3,"user_id":25,"domain":"forum.snapcraft.io","root_domain":"snapcraft.io"},{"url":"https://forum.snapcraft.io/t/release-notes-snapcraft-7/30464/7","title":"Release notes: Snapcraft 7","internal":true,"attachment":false,"reflection":true,"clicks":2,"user_id":11310,"domain":"forum.snapcraft.io","root_domain":"snapcraft.io"},{"url":"https://forum.snapcraft.io/t/call-for-testing-snapcraft-7/30201","title":"Call for testing: Snapcraft 7","internal":true,"attachment":false,"reflection":false,"clicks":2,"user_id":11344,"domain":"forum.snapcraft.io","root_domain":"snapcraft.io"},{"url":"https://snapcraft.io/docs/using-external-metadata","title":null,"internal":false,"attachment":false,"reflection":false,"clicks":2,"user_id":3793,"domain":"snapcraft.io","root_domain":"snapcraft.io"},{"url":"https://forum.snapcraft.io/t/correct-snapcraft-syntax-for-rust-based-snap-on-core22/30947","title":"Correct snapcraft syntax for Rust-based snap on core22","internal":true,"attachment":false,"reflection":true,"clicks":1,"user_id":1710,"domain":"forum.snapcraft.io","root_domain":"snapcraft.io"}]}}